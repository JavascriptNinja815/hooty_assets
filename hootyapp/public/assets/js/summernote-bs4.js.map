{"version":3,"sources":["src/summernote-bs4.js"],"names":["global","factory","exports","module","require","define","amd","jQuery","$$1","hasOwnProperty","Renderer","markup","children","options","callback","prototype","render","$parent","$node","contents","html","className","addClass","data","each","k","v","attr","click","on","$container_1","find","forEach","child","length","append","renderer","create","arguments","isArray","editor","toolbar","editingArea","codable","editable","statusbar","join","airEditor","airEditable","buttonGroup","dropdown","items","map","item","value","content","template","option","undefined","dataValue","dataOption","title","dropdownButtonContents","dropdownCheck","icon","checkClassName","palette","row","rowSize","colors","eventName","colorsName","buttons","col","colSize","color","colorName","push","tooltip","container","trigger","placement","dialog","fade","body","footer","popover","direction","hideArrow","hide","checkbox","id","checked","text","iconClassName","tagName","ui","button","toggleBtn","$btn","isEnable","toggleClass","toggleBtnActive","isActive","onDialogShown","$dialog","handler","one","onDialogHidden","showDialog","modal","hideDialog","createLayout","$note","$editor","airMode","insertAfter","note","removeLayout","layoutInfo","remove","show","eq","itemA","itemB","eq2","peq2","propName","ok","fail","not","f","apply","and","fA","fB","self","a","invoke","obj","method","idCounter","uniqueId","prefix","rect2bnd","rect","$document","$","document","top","scrollTop","left","scrollLeft","width","right","height","bottom","invertObject","inverted","key","namespaceToCamel","namespace","split","name","substring","toUpperCase","debounce","func","wait","immediate","_this","timeout","context","args","later","callNow","clearTimeout","setTimeout","head","array","last","initial","slice","tail","pred","idx","len","all","indexOf","inArray","contains","sum","fn","reduce","memo","from","collection","result","isEmpty$1","clusterBy","aTail","aLast","compact","aResult","unique","results","next","prev","lists","isEmpty","isSupportAmd","isFontInstalled","fontName","testFontName","$tester","css","position","fontSize","appendTo","originalWidth","userAgent","navigator","isMSIE","test","browserVersion","matches","exec","parseFloat","isEdge","hasCodeMirror","window","CodeMirror","__webpack_require__","resolve","e","specified","isSupportTouch","MaxTouchPoints","msMaxTouchPoints","inputEventName","env","isMac","appVersion","isFF","isPhantom","isWebkit","isChrome","isSafari","jqueryVersion","jquery","isW3CRangeSupport","createRange","NBSP_CHAR","String","fromCharCode","ZERO_WIDTH_NBSP_CHAR","isEditable","node","hasClass","isControlSizing","makePredByNodeName","nodeName","isText","nodeType","isElement","isVoid","isPara","isHeading","isPre","isLi","isPurePara","isTable","isData","isInline","isBodyContainer","isList","isHr","isBlockquote","isCell","isAnchor","isParaInline","ancestor","isBodyInline","isBody","isClosestSibling","nodeA","nodeB","nextSibling","previousSibling","withClosestSiblings","siblings","blankHTML","nodeLength","nodeValue","childNodes","innerHTML","paddingBlankHTML","parentNode","singleChildAncestor","listAncestor","ancestors","el","lastAncestor","filter","commonAncestor","n","listPrev","nodes","listNext","listDescendant","descendants","fnWalk","current","wrap","wrapperName","parent","wrapper","insertBefore","appendChild","preceding","appendChildNodes","aChild","isLeftEdgePoint","point","offset","isRightEdgePoint","isEdgePoint","isLeftEdgeOf","isRightEdgeOf","isLeftEdgePointOf","isRightEdgePointOf","hasChildren","prevPoint","isSkipInnerOffset","nextPoint","isSamePoint","pointA","pointB","isVisiblePoint","leftNode","rightNode","prevPointUntil","nextPointUntil","isCharPoint","ch","charAt","walkPoint","startPoint","endPoint","isSkipOffset","makeOffsetPath","reverse","fromOffsetPath","offsets","i","splitNode","isSkipPaddingBlankHTML","isNotSplitEdgePoint","splitText","childNode","clone","cloneNode","splitTree","root","splitPoint","topAncestor","splitRoot","pivot","createElement","createText","createTextNode","isRemoveChild","removeNode","removeChild","removeWhile","replace","newNode","style","cssText","isTextarea","stripLinebreaks","val","isNewlineOnBlock","regexTag","match","endSlash","isEndOfInlineContainer","isBlockNode","trim","posFromPlaceholder","placeholder","$placeholder","pos","outerHeight","attachEvents","events","Object","keys","detachEvents","off","isCustomStyleTag","classList","dom","blank","emptyPara","isBlock","isDiv","isBR","isSpan","isB","isU","isS","isI","isImg","isEmptyAnchor","summernote","lang","extend","font","bold","italic","underline","clear","strikethrough","subscript","superscript","size","image","insert","resizeFull","resizeHalf","resizeQuarter","floatLeft","floatRight","floatNone","shapeRounded","shapeCircle","shapeThumbnail","shapeNone","dragImageHere","dropImage","selectFromFiles","maximumFileSize","maximumFileSizeError","url","original","video","videoLink","providers","link","unlink","edit","textToDisplay","openInNewWindow","table","addRowAbove","addRowBelow","addColLeft","addColRight","delRow","delCol","delTable","hr","p","blockquote","pre","h1","h2","h3","h4","h5","h6","unordered","ordered","help","fullscreen","codeview","paragraph","outdent","indent","center","justify","recent","more","background","foreground","transparent","setTransparent","reset","resetToDefault","shortcut","shortcuts","close","textFormatting","action","paragraphFormatting","documentStyle","extraKeys","history","undo","redo","specialChar","select","KEY_MAP","isEdit","keyCode","BACKSPACE","TAB","ENTER","SPACE","DELETE","isMove","LEFT","UP","RIGHT","DOWN","nameFromCode","code","textRangeToPoint","textRange","isStart","parentElement","tester","createTextRange","prevContainer","moveToElementText","compareEndPoints","textRangeStart","curTextNode","collapse","firstChild","pointTester","duplicate","setEndPoint","textCount","dummy","cont","pointToTextRange","textRangeInfo","isCollapseToStart","prevTextNodes","collapseToStart","info","moveStart","WrappedRange","sc","so","ec","eo","isOnEditable","makeIsOn","isOnList","isOnAnchor","isOnCell","isOnData","nativeRange","w3cRange","setStart","setEnd","getPoints","getStartPoint","getEndPoint","nativeRng","selection","getSelection","rangeCount","removeAllRanges","addRange","scrollIntoView","offsetTop","Math","abs","normalize","getVisiblePoint","isLeftToRight","block","isCollapsed","includeAncestor","fullyContains","leftEdgeNodes","expand","startAncestor","endAncestor","boundaryPoints","isSameContainer","deleteContents","rng","emptyParents","wrapBodyInlineWithPara","inlineSiblings","concat","para","insertNode","pasteHTML","contentsContainer","toString","getWordRange","findAfter","bookmark","s","path","paraBookmark","paras","getClientRects","range","wrappedRange","createFromSelection","createFromNode","anchorNode","getRangeAt","startContainer","startOffset","endContainer","endOffset","textRangeEnd","isTextNode","createFromNodeBefore","createFromNodeAfter","createFromBookmark","createFromParaBookmark","readFileAsDataURL","file","Deferred","deferred","FileReader","onload","dataURL","target","onerror","err","reject","readAsDataURL","promise","createImage","$img","detach","display","History","$editable","stack","stackOffset","makeSnapshot","emptyBookmark","applySnapshot","snapshot","rewind","recordUndo","Style","jQueryCSS","$obj","propertyNames","result_1","propertyName","fromNode","properties","styleInfo","parseInt","stylePara","styleNodes","expandClosestSibling","onlyPartialContains","nodesInRange_1","tails","elem","$cont","queryCommandState","queryCommandValue","orderedTypes","isUnordered","lineHeight","toFixed","anchor","Bullet","insertOrderedList","toggleList","insertUnorderedList","clustereds","wrapList","releaseList","listName","wrappedParas_1","diffLists","listNode","prevList","nextList","isEscapseToBody","releasedParas","headList","lastList","middleList","rootLists","rootList","listNodes","Typing","bullet","insertTab","tabsize","tab","Array","insertParagraph","nextPara","emptyAnchors","TableResultAction","where","domTable","_startPoint","_virtualTable","_actionCellList","setStartPoint","toLowerCase","console","error","colPos","cellIndex","rowPos","rowIndex","setVirtualTablePosition","baseRow","baseCell","isRowSpan","isColSpan","isVirtualCell","objPosition","getActionCell","virtualTableCellObj","resultAction","virtualRowPosition","virtualColPosition","recoverCellIndex","newCellIndex","addCellInfoToVirtual","cell","cellHasColspan","colSpan","cellHasRowspan","rowSpan","isThisSelectedCell","rowspanNumber","attributes","rp","rowspanIndex","adjustStartPoint","colspanNumber","cp","cellspanIndex","isSelectedCell","createVirtualTable","rows","cells","getDeleteResultActionToCell","Column","SubtractSpanCount","Row","isVirtual","AddCell","RemoveCell","getAddResultActionToCell","SumSpanCount","Ignore","init","getActionList","fixedRow","fixedCol","actualPosition","canContinue","rowPosition","colPosition","requestAction","Add","Delete","Table","isShift","nextCell","addRow","currentTr","closest","trAttributes","recoverAttributes","vTable","actions","idCell","currentCell","tdAttributes","baseCellTr","isTopFromRowSpan","newTd","removeAttr","setAttribute","before","lastTrIndex","after","addCol","rowsGroup","actionIndex","resultStr","attrList","deleteRow","cellPos","index","virtualPosition","virtualTable","hasRowspan","nextRow","cloneRow","removeAttribute","deleteCol","hasColspan","createTable","colCount","rowCount","tds","tdHTML","idxCol","trs","trHTML","idxRow","$table","tableClassName","deleteTable","KEY_BOGUS","Editor","langInfo","lastRange","typing","untab","formatPara","insertHorizontalRule","commands","sCmd","beforeCommand","execCommand","afterCommand","wrapCommand","fontStyling","formatBlock","isLimited","insertText","textNode","$target","onApplyCustomStyle","callbacks","call","onFormatBlock","hrNode","createLink","linkInfo","linkUrl","linkText","isNewWindow","isTextChanged","onCreateLink","anchors","startRange","endRange","colorInfo","foreColor","backColor","insertTable","dim","dimension","removeMedia","restoreTarget","triggerEvent","floatMe","resize","initialize","event","isDefaultPrevented","handleKeyMap","preventDefaultEditableShortCuts","outerWidth","maxHeight","minHeight","destroy","keyMap","metaKey","ctrlKey","altKey","shiftKey","keyName","preventDefault","pad","maxTextLength","focus","saveRange","thenCollapse","restoreRange","saveTarget","clearTarget","removeData","currentStyle","styleFromNode","isPreventTrigger","normalizeContent","tabSize","insertImage","src","param","then","$image","min","insertImages","files","filename","maximumImageFileSize","insertImagesOrCallback","onImageUpload","getSelectedText","currentRange","spans","firstSpan","getLinkInfo","$anchor","resizeTo","bKeepRatio","imageSize","newRatio","y","x","ratio","hasFocus","is","empty","Clipboard","pasteByEvent","bind","clipboardData","originalEvent","kind","type","getAsFile","Dropzone","$eventListener","documentEventHandlers","$dropzone","prependTo","disableDragAndDrop","onDrop","attachDragAndDropEvent","$dropzoneMessage","onDragenter","isCodeview","hasEditorSize","add","onDragleave","removeClass","dataTransfer","types","getData","substr","cm","CodeView","$codable","sync","isActivated","save","toggle","deactivate","activate","prettifyHtml","cmEditor_1","fromTextArea","codemirror","tern","server_1","TernServer","ternServer","updateArgHints","getValue","setSize","cmEditor","toTextArea","isChange","EDITABLE_PADDING","Statusbar","$statusbar","disableResizeEditor","stopPropagation","editableTop","onMouseMove","clientY","minheight","max","Fullscreen","$toolbar","$window","$scrollbar","onResize","h","setsize","isFullscreen","Handle","$editingArea","we","update","$handle","disableResizeImage","$target_1","posStart_1","scrollTop_1","onMouseMove_1","clientX","isDisabled","isImage","$selection","w","origImageObj","Image","sizingText","defaultScheme","linkPattern","AutoLink","handleKeyup","handleKeydown","lastWordRange","keyword","wordRange","AutoSync","shouldInitialize","Placeholder","isShow","Buttons","invertedKeyMap","representShortcut","editorMethod","o","addToolbarButtons","addImagePopoverButtons","addLinkPopoverButtons","addTablePopoverButtons","fontInstalledMap","fontNamesIgnoreCheck","isFontDeservedToAdd","genericFamilies","icons","magic","styleTags","tag","createInvokeHandler","_loop_1","styleIdx","styleLen","this_1","createInvokeHandlerAndUpdateState","eraser","fontname","fontNames","menuCheck","fontSizes","$button","currentTarget","$recentColor","$dropdown","$holder","$color","$currentButton","unorderedlist","orderedlist","justifyLeft","alignLeft","justifyCenter","alignCenter","justifyRight","alignRight","justifyFull","alignJustify","textHeight","lineHeights","$catcher","insertTableMaxSize","mousedown","tableMoveHandler","picture","minus","arrowsAlt","question","trash","rowAbove","rowBelow","colBefore","colAfter","rowRemove","colRemove","build","$container","groups","groupIdx","groupLen","group","groupName","$group","btn","updateCurrentStyle","updateBtnStates","fontName_1","$item","isChecked","fontSize_1","lineHeight_1","infos","selector","PX_PER_EM","$picker","$dimensionDisplay","$highlighted","$unhighlighted","posOffset","offsetX","posCatcher","pageX","pageY","offsetY","c","ceil","r","Toolbar","followScroll","toolbarContainer","changeContainer","followingToolbar","$toolbarWrapper","editorHeight","editorWidth","toolbarHeight","otherBarHeight","otherStaticBar","currentOffset","editorOffsetTop","editorOffsetBottom","activateOffset","deactivateOffsetBottom","updateFullscreen","updateCodeview","isIncludeCodeview","LinkDialog","$body","dialogsInBody","disableLinkTarget","buttonClass","dialogsFade","bindEnterKey","$input","toggleLinkBtn","$linkBtn","$linkText","$linkUrl","showLinkDialog","$openInNewWindow","handleLinkTextUpdate","handleLinkUrlUpdate","linkTargetBlank","prop","state","LinkPopover","$popover","$content","prepend","href","ImageDialog","imageLimitation","unit","floor","log","readableSize","pow","showImageDialog","$imageInput","$imageUrl","$imageBtn","replaceWith","ImagePopover","posEditor","popatmouse","TablePopover","VideoDialog","createVideoNode","ytRegExp","ytMatch","igRegExp","igMatch","vRegExp","vMatch","vimRegExp","vimMatch","dmRegExp","dmMatch","youkuRegExp","youkuMatch","qqRegExp","qqMatch","qqRegExp2","qqMatch2","mp4RegExp","mp4Match","oggRegExp","oggMatch","webmRegExp","webmMatch","$video","youtubeId","vid","showVideoDialog","$videoUrl","$videoBtn","HelpDialog","createShortcutList","command","$row","showHelpDialog","AIR_MODE_POPOVER_X_OFFSET","AirPopover","relatedTarget","air","bnd","POPOVER_DIST","HintPopover","hint","hintDirection","hints","selectItem","innerHeight","moveDown","$current","$next","$nextGroup","first","moveUp","$prev","$prevGroup","nodeFromItem","createItemTemplates","hintIdx","searchKeyword","search","createGroup","keyword_1","Context","memos","modules","_initialize","_destroy","disabled","disable","plugins","initializeModule","removeModule","removeMemo","enable","ModuleClass","withoutIntialize","splits","hasSeparator","moduleName","methodName","isExternalAPICalled","hasInitOptions","version","styleWithSpan","textareaAutoSync","onInit","onFocus","onBlur","onBlurCodeview","onEnter","onKeyup","onKeydown","onImageUploadError","mode","htmlMode","lineNumbers","pc","mac"],"mappings":"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","sourcesContent":["/**\n * Super simple wysiwyg editor v0.8.10\n * https://summernote.org\n *\n * Copyright 2013- Alan Hong. and other contributors\n * summernote may be freely distributed under the MIT license.\n *\n * Date: 2018-02-20T00:34Z\n */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(require('jquery')) : typeof define === 'function' && define.amd ? define(['jquery'], factory) : factory(global.jQuery)\n})(this, function ($$1) {\n  'use strict'\n\n  $$1 = $$1 && $$1.hasOwnProperty('default') ? $$1['default'] : $$1\n\n  var Renderer =\n  /** @class */\n  (function () {\n    function Renderer (markup, children, options, callback) {\n      this.markup = markup\n      this.children = children\n      this.options = options\n      this.callback = callback\n    }\n\n    Renderer.prototype.render = function ($parent) {\n      var $node = $$1(this.markup)\n\n      if (this.options && this.options.contents) {\n        $node.html(this.options.contents)\n      }\n\n      if (this.options && this.options.className) {\n        $node.addClass(this.options.className)\n      }\n\n      if (this.options && this.options.data) {\n        $$1.each(this.options.data, function (k, v) {\n          $node.attr('data-' + k, v)\n        })\n      }\n\n      if (this.options && this.options.click) {\n        $node.on('click', this.options.click)\n      }\n\n      if (this.children) {\n        var $container_1 = $node.find('.note-children-container')\n        this.children.forEach(function (child) {\n          child.render($container_1.length ? $container_1 : $node)\n        })\n      }\n\n      if (this.callback) {\n        this.callback($node, this.options)\n      }\n\n      if (this.options && this.options.callback) {\n        this.options.callback($node)\n      }\n\n      if ($parent) {\n        $parent.append($node)\n      }\n\n      return $node\n    }\n\n    return Renderer\n  }())\n\n  var renderer = {\n    create: function (markup, callback) {\n      return function () {\n        var options = typeof arguments[1] === 'object' ? arguments[1] : arguments[0]\n        var children = $$1.isArray(arguments[0]) ? arguments[0] : []\n\n        if (options && options.children) {\n          children = options.children\n        }\n\n        return new Renderer(markup, children, options, callback)\n      }\n    }\n  }\n  var editor = renderer.create('<div class=\"note-editor note-frame card\"/>')\n  var toolbar = renderer.create('<div class=\"note-toolbar-wrapper\"><div class=\"note-toolbar card-header\" role=\"toolbar\"></div></div>')\n  var editingArea = renderer.create('<div class=\"note-editing-area\"/>')\n  var codable = renderer.create('<textarea class=\"note-codable\" role=\"textbox\" aria-multiline=\"true\"/>')\n  var editable = renderer.create('<div class=\"note-editable card-block\" contentEditable=\"true\" role=\"textbox\" aria-multiline=\"true\"/>')\n  var statusbar = renderer.create(['<output class=\"note-status-output\" aria-live=\"polite\"/>', '<div class=\"note-statusbar\" role=\"status\">', '  <output class=\"note-status-output\" aria-live=\"polite\"></output>', '  <div class=\"note-resizebar\" role=\"seperator\" aria-orientation=\"horizontal\" aria-label=\"Resize\">', '    <div class=\"note-icon-bar\"/>', '    <div class=\"note-icon-bar\"/>', '    <div class=\"note-icon-bar\"/>', '  </div>', '</div>'].join(''))\n  var airEditor = renderer.create('<div class=\"note-editor\"/>')\n  var airEditable = renderer.create(['<output class=\"note-status-output\" aria-live=\"polite\"/>', '<div class=\"note-editable\" contentEditable=\"true\" role=\"textbox\" aria-multiline=\"true\"/>'].join(''))\n  var buttonGroup = renderer.create('<div class=\"note-btn-group btn-group\">')\n  var dropdown = renderer.create('<div class=\"dropdown-menu\" role=\"list\">', function ($node, options) {\n    var markup = $$1.isArray(options.items) ? options.items.map(function (item) {\n      var value = typeof item === 'string' ? item : item.value || ''\n      var content = options.template ? options.template(item) : item\n      var option = typeof item === 'object' ? item.option : undefined\n      var dataValue = 'data-value=\"' + value + '\"'\n      var dataOption = option !== undefined ? ' data-option=\"' + option + '\"' : ''\n      return '<a class=\"dropdown-item\" href=\"#\" ' + (dataValue + dataOption) + ' role=\"listitem\" aria-label=\"' + item + '\">' + content + '</a>'\n    }).join('') : options.items\n    $node.html(markup).attr({\n      'aria-label': options.title\n    })\n  })\n\n  var dropdownButtonContents = function (contents) {\n    return contents\n  }\n\n  var dropdownCheck = renderer.create('<div class=\"dropdown-menu note-check\" role=\"list\">', function ($node, options) {\n    var markup = $$1.isArray(options.items) ? options.items.map(function (item) {\n      var value = typeof item === 'string' ? item : item.value || ''\n      var content = options.template ? options.template(item) : item\n      return '<a class=\"dropdown-item\" href=\"#\" data-value=\"' + value + '\" role=\"listitem\" aria-label=\"' + item + '\">' + icon(options.checkClassName) + ' ' + content + '</a>'\n    }).join('') : options.items\n    $node.html(markup).attr({\n      'aria-label': options.title\n    })\n  })\n  var palette = renderer.create('<div class=\"note-color-palette\"/>', function ($node, options) {\n    var contents = []\n\n    for (var row = 0, rowSize = options.colors.length; row < rowSize; row++) {\n      var eventName = options.eventName\n      var colors = options.colors[row]\n      var colorsName = options.colorsName[row]\n      var buttons = []\n\n      for (var col = 0, colSize = colors.length; col < colSize; col++) {\n        var color = colors[col]\n        var colorName = colorsName[col]\n        buttons.push(['<button type=\"button\" class=\"note-color-btn\"', 'style=\"background-color:', color, '\" ', 'data-event=\"', eventName, '\" ', 'data-value=\"', color, '\" ', 'title=\"', colorName, '\" ', 'aria-label=\"', colorName, '\" ', 'data-toggle=\"button\" tabindex=\"-1\"></button>'].join(''))\n      }\n\n      contents.push('<div class=\"note-color-row\">' + buttons.join('') + '</div>')\n    }\n\n    $node.html(contents.join(''))\n\n    if (options.tooltip) {\n      $node.find('.note-color-btn').tooltip({\n        container: options.container,\n        trigger: 'hover',\n        placement: 'bottom'\n      })\n    }\n  })\n  var dialog = renderer.create('<div class=\"modal\" aria-hidden=\"false\" tabindex=\"-1\" role=\"dialog\"/>', function ($node, options) {\n    if (options.fade) {\n      $node.addClass('fade')\n    }\n\n    $node.attr({\n      'aria-label': options.title\n    })\n    $node.html(['<div class=\"modal-dialog\">', '  <div class=\"modal-content\">', options.title ? '    <div class=\"modal-header\">' + '      <h4 class=\"modal-title\">' + options.title + '</h4>' + '      <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" aria-hidden=\"true\">&times;</button>' + '    </div>' : '', '    <div class=\"modal-body\">' + options.body + '</div>', options.footer ? '    <div class=\"modal-footer\">' + options.footer + '</div>' : '', '  </div>', '</div>'].join(''))\n  })\n  var popover = renderer.create(['<div class=\"note-popover popover in\">', '  <div class=\"arrow\"/>', '  <div class=\"popover-content note-children-container\"/>', '</div>'].join(''), function ($node, options) {\n    var direction = typeof options.direction !== 'undefined' ? options.direction : 'bottom'\n    $node.addClass(direction)\n\n    if (options.hideArrow) {\n      $node.find('.arrow').hide()\n    }\n  })\n  var checkbox = renderer.create('<label class=\"custom-control custom-checkbox\"></label>', function ($node, options) {\n    if (options.id) {\n      $node.attr('for', options.id)\n    }\n\n    $node.html([' <input role=\"checkbox\" type=\"checkbox\" class=\"custom-control-input\"' + (options.id ? ' id=\"' + options.id + '\"' : ''), options.checked ? ' checked' : '', ' aria-checked=\"' + (options.checked ? 'true' : 'false') + '\"/>', ' <span class=\"custom-control-indicator\"></span>', ' <span class=\"custom-control-description\">' + (options.text ? options.text : '') + '</span>', '</label>'].join(''))\n  })\n\n  var icon = function (iconClassName, tagName) {\n    tagName = tagName || 'i'\n    return '<' + tagName + ' class=\"' + iconClassName + '\"/>'\n  }\n\n  var ui = {\n    editor: editor,\n    toolbar: toolbar,\n    editingArea: editingArea,\n    codable: codable,\n    editable: editable,\n    statusbar: statusbar,\n    airEditor: airEditor,\n    airEditable: airEditable,\n    buttonGroup: buttonGroup,\n    dropdown: dropdown,\n    dropdownButtonContents: dropdownButtonContents,\n    dropdownCheck: dropdownCheck,\n    palette: palette,\n    dialog: dialog,\n    popover: popover,\n    icon: icon,\n    checkbox: checkbox,\n    options: {},\n    button: function ($node, options) {\n      return renderer.create('<button type=\"button\" class=\"note-btn btn btn-light btn-sm\" role=\"button\" tabindex=\"-1\">', function ($node, options) {\n        if (options && options.tooltip) {\n          $node.attr({\n            title: options.tooltip,\n            'aria-label': options.tooltip\n          }).tooltip({\n            container: options.container,\n            trigger: 'hover',\n            placement: 'bottom'\n          })\n        }\n      })($node, options)\n    },\n    toggleBtn: function ($btn, isEnable) {\n      $btn.toggleClass('disabled', !isEnable)\n      $btn.attr('disabled', !isEnable)\n    },\n    toggleBtnActive: function ($btn, isActive) {\n      $btn.toggleClass('active', isActive)\n    },\n    onDialogShown: function ($dialog, handler) {\n      $dialog.one('shown.bs.modal', handler)\n    },\n    onDialogHidden: function ($dialog, handler) {\n      $dialog.one('hidden.bs.modal', handler)\n    },\n    showDialog: function ($dialog) {\n      $dialog.modal('show')\n    },\n    hideDialog: function ($dialog) {\n      $dialog.modal('hide')\n    },\n    createLayout: function ($note, options) {\n      var $editor = (options.airMode ? ui.airEditor([ui.editingArea([ui.airEditable()])]) : ui.editor([ui.toolbar(), ui.editingArea([ui.codable(), ui.editable()]), ui.statusbar()])).render()\n      $editor.insertAfter($note)\n      return {\n        note: $note,\n        editor: $editor,\n        toolbar: $editor.find('.note-toolbar'),\n        editingArea: $editor.find('.note-editing-area'),\n        editable: $editor.find('.note-editable'),\n        codable: $editor.find('.note-codable'),\n        statusbar: $editor.find('.note-statusbar')\n      }\n    },\n    removeLayout: function ($note, layoutInfo) {\n      $note.html(layoutInfo.editable.html())\n      layoutInfo.editor.remove()\n      $note.show()\n    }\n  }\n  /**\n   * @class core.func\n   *\n   * func utils (for high-order func's arg)\n   *\n   * @singleton\n   * @alternateClassName func\n   */\n\n  function eq (itemA) {\n    return function (itemB) {\n      return itemA === itemB\n    }\n  }\n\n  function eq2 (itemA, itemB) {\n    return itemA === itemB\n  }\n\n  function peq2 (propName) {\n    return function (itemA, itemB) {\n      return itemA[propName] === itemB[propName]\n    }\n  }\n\n  function ok () {\n    return true\n  }\n\n  function fail () {\n    return false\n  }\n\n  function not (f) {\n    return function () {\n      return !f.apply(f, arguments)\n    }\n  }\n\n  function and (fA, fB) {\n    return function (item) {\n      return fA(item) && fB(item)\n    }\n  }\n\n  function self (a) {\n    return a\n  }\n\n  function invoke (obj, method) {\n    return function () {\n      return obj[method].apply(obj, arguments)\n    }\n  }\n\n  var idCounter = 0\n  /**\n   * generate a globally-unique id\n   *\n   * @param {String} [prefix]\n   */\n\n  function uniqueId (prefix) {\n    var id = ++idCounter + ''\n    return prefix ? prefix + id : id\n  }\n  /**\n   * returns bnd (bounds) from rect\n   *\n   * - IE Compatibility Issue: http://goo.gl/sRLOAo\n   * - Scroll Issue: http://goo.gl/sNjUc\n   *\n   * @param {Rect} rect\n   * @return {Object} bounds\n   * @return {Number} bounds.top\n   * @return {Number} bounds.left\n   * @return {Number} bounds.width\n   * @return {Number} bounds.height\n   */\n\n  function rect2bnd (rect) {\n    var $document = $(document)\n    return {\n      top: rect.top + $document.scrollTop(),\n      left: rect.left + $document.scrollLeft(),\n      width: rect.right - rect.left,\n      height: rect.bottom - rect.top\n    }\n  }\n  /**\n   * returns a copy of the object where the keys have become the values and the values the keys.\n   * @param {Object} obj\n   * @return {Object}\n   */\n\n  function invertObject (obj) {\n    var inverted = {}\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        inverted[obj[key]] = key\n      }\n    }\n\n    return inverted\n  }\n  /**\n   * @param {String} namespace\n   * @param {String} [prefix]\n   * @return {String}\n   */\n\n  function namespaceToCamel (namespace, prefix) {\n    prefix = prefix || ''\n    return prefix + namespace.split('.').map(function (name) {\n      return name.substring(0, 1).toUpperCase() + name.substring(1)\n    }).join('')\n  }\n  /**\n   * Returns a function, that, as long as it continues to be invoked, will not\n   * be triggered. The function will be called after it stops being called for\n   * N milliseconds. If `immediate` is passed, trigger the function on the\n   * leading edge, instead of the trailing.\n   * @param {Function} func\n   * @param {Number} wait\n   * @param {Boolean} immediate\n   * @return {Function}\n   */\n\n  function debounce (func, wait, immediate) {\n    var _this = this\n\n    var timeout\n    return function () {\n      var context = _this\n      var args = arguments\n\n      var later = function () {\n        timeout = null\n\n        if (!immediate) {\n          func.apply(context, args)\n        }\n      }\n\n      var callNow = immediate && !timeout\n      clearTimeout(timeout)\n      timeout = setTimeout(later, wait)\n\n      if (callNow) {\n        func.apply(context, args)\n      }\n    }\n  }\n\n  var func = {\n    eq: eq,\n    eq2: eq2,\n    peq2: peq2,\n    ok: ok,\n    fail: fail,\n    self: self,\n    not: not,\n    and: and,\n    invoke: invoke,\n    uniqueId: uniqueId,\n    rect2bnd: rect2bnd,\n    invertObject: invertObject,\n    namespaceToCamel: namespaceToCamel,\n    debounce: debounce\n  }\n  /**\n   * returns the first item of an array.\n   *\n   * @param {Array} array\n   */\n\n  function head (array) {\n    return array[0]\n  }\n  /**\n   * returns the last item of an array.\n   *\n   * @param {Array} array\n   */\n\n  function last (array) {\n    return array[array.length - 1]\n  }\n  /**\n   * returns everything but the last entry of the array.\n   *\n   * @param {Array} array\n   */\n\n  function initial (array) {\n    return array.slice(0, array.length - 1)\n  }\n  /**\n   * returns the rest of the items in an array.\n   *\n   * @param {Array} array\n   */\n\n  function tail (array) {\n    return array.slice(1)\n  }\n  /**\n   * returns item of array\n   */\n\n  function find (array, pred) {\n    for (var idx = 0, len = array.length; idx < len; idx++) {\n      var item = array[idx]\n\n      if (pred(item)) {\n        return item\n      }\n    }\n  }\n  /**\n   * returns true if all of the values in the array pass the predicate truth test.\n   */\n\n  function all (array, pred) {\n    for (var idx = 0, len = array.length; idx < len; idx++) {\n      if (!pred(array[idx])) {\n        return false\n      }\n    }\n\n    return true\n  }\n  /**\n   * returns index of item\n   */\n\n  function indexOf (array, item) {\n    return $$1.inArray(item, array)\n  }\n  /**\n   * returns true if the value is present in the list.\n   */\n\n  function contains (array, item) {\n    return indexOf(array, item) !== -1\n  }\n  /**\n   * get sum from a list\n   *\n   * @param {Array} array - array\n   * @param {Function} fn - iterator\n   */\n\n  function sum (array, fn) {\n    fn = fn || func.self\n    return array.reduce(function (memo, v) {\n      return memo + fn(v)\n    }, 0)\n  }\n  /**\n   * returns a copy of the collection with array type.\n   * @param {Collection} collection - collection eg) node.childNodes, ...\n   */\n\n  function from (collection) {\n    var result = []\n    var length = collection.length\n    var idx = -1\n\n    while (++idx < length) {\n      result[idx] = collection[idx]\n    }\n\n    return result\n  }\n  /**\n   * returns whether list is empty or not\n   */\n\n  function isEmpty$1 (array) {\n    return !array || !array.length\n  }\n  /**\n   * cluster elements by predicate function.\n   *\n   * @param {Array} array - array\n   * @param {Function} fn - predicate function for cluster rule\n   * @param {Array[]}\n   */\n\n  function clusterBy (array, fn) {\n    if (!array.length) {\n      return []\n    }\n\n    var aTail = tail(array)\n    return aTail.reduce(function (memo, v) {\n      var aLast = last(memo)\n\n      if (fn(last(aLast), v)) {\n        aLast[aLast.length] = v\n      } else {\n        memo[memo.length] = [v]\n      }\n\n      return memo\n    }, [[head(array)]])\n  }\n  /**\n   * returns a copy of the array with all false values removed\n   *\n   * @param {Array} array - array\n   * @param {Function} fn - predicate function for cluster rule\n   */\n\n  function compact (array) {\n    var aResult = []\n\n    for (var idx = 0, len = array.length; idx < len; idx++) {\n      if (array[idx]) {\n        aResult.push(array[idx])\n      }\n    }\n\n    return aResult\n  }\n  /**\n   * produces a duplicate-free version of the array\n   *\n   * @param {Array} array\n   */\n\n  function unique (array) {\n    var results = []\n\n    for (var idx = 0, len = array.length; idx < len; idx++) {\n      if (!contains(results, array[idx])) {\n        results.push(array[idx])\n      }\n    }\n\n    return results\n  }\n  /**\n   * returns next item.\n   * @param {Array} array\n   */\n\n  function next (array, item) {\n    var idx = indexOf(array, item)\n\n    if (idx === -1) {\n      return null\n    }\n\n    return array[idx + 1]\n  }\n  /**\n   * returns prev item.\n   * @param {Array} array\n   */\n\n  function prev (array, item) {\n    var idx = indexOf(array, item)\n\n    if (idx === -1) {\n      return null\n    }\n\n    return array[idx - 1]\n  }\n  /**\n   * @class core.list\n   *\n   * list utils\n   *\n   * @singleton\n   * @alternateClassName list\n   */\n\n  var lists = {\n    head: head,\n    last: last,\n    initial: initial,\n    tail: tail,\n    prev: prev,\n    next: next,\n    find: find,\n    contains: contains,\n    all: all,\n    sum: sum,\n    from: from,\n    isEmpty: isEmpty$1,\n    clusterBy: clusterBy,\n    compact: compact,\n    unique: unique\n  }\n  var isSupportAmd = typeof define === 'function' && define.amd; // eslint-disable-line\n\n  /**\n   * returns whether font is installed or not.\n   *\n   * @param {String} fontName\n   * @return {Boolean}\n   */\n\n  function isFontInstalled (fontName) {\n    var testFontName = fontName === 'Comic Sans MS' ? 'Courier New' : 'Comic Sans MS'\n    var $tester = $$1('<div>').css({\n      position: 'absolute',\n      left: '-9999px',\n      top: '-9999px',\n      fontSize: '200px'\n    }).text('mmmmmmmmmwwwwwww').appendTo(document.body)\n    var originalWidth = $tester.css('fontFamily', testFontName).width()\n    var width = $tester.css('fontFamily', fontName + ',' + testFontName).width()\n    $tester.remove()\n    return originalWidth !== width\n  }\n\n  var userAgent = navigator.userAgent\n  var isMSIE = /MSIE|Trident/i.test(userAgent)\n  var browserVersion\n\n  if (isMSIE) {\n    var matches = /MSIE (\\d+[.]\\d+)/.exec(userAgent)\n\n    if (matches) {\n      browserVersion = parseFloat(matches[1])\n    }\n\n    matches = /Trident\\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(userAgent)\n\n    if (matches) {\n      browserVersion = parseFloat(matches[1])\n    }\n  }\n\n  var isEdge = /Edge\\/\\d+/.test(userAgent)\n  var hasCodeMirror = !!window.CodeMirror\n\n  if (!hasCodeMirror && isSupportAmd) {\n    // Webpack\n    if (typeof __webpack_require__ === 'function') {\n      try {\n        // If CodeMirror can't be resolved, `require.resolve` will throw an\n        // exception and `hasCodeMirror` won't be set to `true`.\n        require.resolve('codemirror')\n\n        hasCodeMirror = true\n      } catch (e) { // do nothing\n      }\n    } else if (typeof require !== 'undefined') {\n      // Browserify\n      if (typeof require.resolve !== 'undefined') {\n        try {\n          // If CodeMirror can't be resolved, `require.resolve` will throw an\n          // exception and `hasCodeMirror` won't be set to `true`.\n          require.resolve('codemirror')\n\n          hasCodeMirror = true\n        } catch (e) {} // do nothing\n        // Almond/Require\n      } else if (typeof require.specified !== 'undefined') {\n        hasCodeMirror = require.specified('codemirror')\n      }\n    }\n  }\n\n  var isSupportTouch = 'ontouchstart' in window || navigator.MaxTouchPoints > 0 || navigator.msMaxTouchPoints > 0 // [workaround] IE doesn't have input events for contentEditable\n  // - see: https://goo.gl/4bfIvA\n\n  var inputEventName = isMSIE || isEdge ? 'DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted' : 'input'\n  /**\n   * @class core.env\n   *\n   * Object which check platform and agent\n   *\n   * @singleton\n   * @alternateClassName env\n   */\n\n  var env = {\n    isMac: navigator.appVersion.indexOf('Mac') > -1,\n    isMSIE: isMSIE,\n    isEdge: isEdge,\n    isFF: !isEdge && /firefox/i.test(userAgent),\n    isPhantom: /PhantomJS/i.test(userAgent),\n    isWebkit: !isEdge && /webkit/i.test(userAgent),\n    isChrome: !isEdge && /chrome/i.test(userAgent),\n    isSafari: !isEdge && /safari/i.test(userAgent),\n    browserVersion: browserVersion,\n    jqueryVersion: parseFloat($$1.fn.jquery),\n    isSupportAmd: isSupportAmd,\n    isSupportTouch: isSupportTouch,\n    hasCodeMirror: hasCodeMirror,\n    isFontInstalled: isFontInstalled,\n    isW3CRangeSupport: !!document.createRange,\n    inputEventName: inputEventName\n  }\n  var NBSP_CHAR = String.fromCharCode(160)\n  var ZERO_WIDTH_NBSP_CHAR = '\\ufeff'\n  /**\n   * @method isEditable\n   *\n   * returns whether node is `note-editable` or not.\n   *\n   * @param {Node} node\n   * @return {Boolean}\n   */\n\n  function isEditable (node) {\n    return node && $$1(node).hasClass('note-editable')\n  }\n  /**\n   * @method isControlSizing\n   *\n   * returns whether node is `note-control-sizing` or not.\n   *\n   * @param {Node} node\n   * @return {Boolean}\n   */\n\n  function isControlSizing (node) {\n    return node && $$1(node).hasClass('note-control-sizing')\n  }\n  /**\n   * @method makePredByNodeName\n   *\n   * returns predicate which judge whether nodeName is same\n   *\n   * @param {String} nodeName\n   * @return {Function}\n   */\n\n  function makePredByNodeName (nodeName) {\n    nodeName = nodeName.toUpperCase()\n    return function (node) {\n      return node && node.nodeName.toUpperCase() === nodeName\n    }\n  }\n  /**\n   * @method isText\n   *\n   *\n   *\n   * @param {Node} node\n   * @return {Boolean} true if node's type is text(3)\n   */\n\n  function isText (node) {\n    return node && node.nodeType === 3\n  }\n  /**\n   * @method isElement\n   *\n   *\n   *\n   * @param {Node} node\n   * @return {Boolean} true if node's type is element(1)\n   */\n\n  function isElement (node) {\n    return node && node.nodeType === 1\n  }\n  /**\n   * ex) br, col, embed, hr, img, input, ...\n   * @see http://www.w3.org/html/wg/drafts/html/master/syntax.html#void-elements\n   */\n\n  function isVoid (node) {\n    return node && /^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT/.test(node.nodeName.toUpperCase())\n  }\n\n  function isPara (node) {\n    if (isEditable(node)) {\n      return false\n    } // Chrome(v31.0), FF(v25.0.1) use DIV for paragraph\n\n    return node && /^DIV|^P|^LI|^H[1-7]/.test(node.nodeName.toUpperCase())\n  }\n\n  function isHeading (node) {\n    return node && /^H[1-7]/.test(node.nodeName.toUpperCase())\n  }\n\n  var isPre = makePredByNodeName('PRE')\n  var isLi = makePredByNodeName('LI')\n\n  function isPurePara (node) {\n    return isPara(node) && !isLi(node)\n  }\n\n  var isTable = makePredByNodeName('TABLE')\n  var isData = makePredByNodeName('DATA')\n\n  function isInline (node) {\n    return !isBodyContainer(node) && !isList(node) && !isHr(node) && !isPara(node) && !isTable(node) && !isBlockquote(node) && !isData(node)\n  }\n\n  function isList (node) {\n    return node && /^UL|^OL/.test(node.nodeName.toUpperCase())\n  }\n\n  var isHr = makePredByNodeName('HR')\n\n  function isCell (node) {\n    return node && /^TD|^TH/.test(node.nodeName.toUpperCase())\n  }\n\n  var isBlockquote = makePredByNodeName('BLOCKQUOTE')\n\n  function isBodyContainer (node) {\n    return isCell(node) || isBlockquote(node) || isEditable(node)\n  }\n\n  var isAnchor = makePredByNodeName('A')\n\n  function isParaInline (node) {\n    return isInline(node) && !!ancestor(node, isPara)\n  }\n\n  function isBodyInline (node) {\n    return isInline(node) && !ancestor(node, isPara)\n  }\n\n  var isBody = makePredByNodeName('BODY')\n  /**\n   * returns whether nodeB is closest sibling of nodeA\n   *\n   * @param {Node} nodeA\n   * @param {Node} nodeB\n   * @return {Boolean}\n   */\n\n  function isClosestSibling (nodeA, nodeB) {\n    return nodeA.nextSibling === nodeB || nodeA.previousSibling === nodeB\n  }\n  /**\n   * returns array of closest siblings with node\n   *\n   * @param {Node} node\n   * @param {function} [pred] - predicate function\n   * @return {Node[]}\n   */\n\n  function withClosestSiblings (node, pred) {\n    pred = pred || func.ok\n    var siblings = []\n\n    if (node.previousSibling && pred(node.previousSibling)) {\n      siblings.push(node.previousSibling)\n    }\n\n    siblings.push(node)\n\n    if (node.nextSibling && pred(node.nextSibling)) {\n      siblings.push(node.nextSibling)\n    }\n\n    return siblings\n  }\n  /**\n   * blank HTML for cursor position\n   * - [workaround] old IE only works with &nbsp;\n   * - [workaround] IE11 and other browser works with bogus br\n   */\n\n  var blankHTML = env.isMSIE && env.browserVersion < 11 ? '&nbsp;' : '<br>'\n  /**\n   * @method nodeLength\n   *\n   * returns #text's text size or element's childNodes size\n   *\n   * @param {Node} node\n   */\n\n  function nodeLength (node) {\n    if (isText(node)) {\n      return node.nodeValue.length\n    }\n\n    if (node) {\n      return node.childNodes.length\n    }\n\n    return 0\n  }\n  /**\n   * returns whether node is empty or not.\n   *\n   * @param {Node} node\n   * @return {Boolean}\n   */\n\n  function isEmpty (node) {\n    var len = nodeLength(node)\n\n    if (len === 0) {\n      return true\n    } else if (!isText(node) && len === 1 && node.innerHTML === blankHTML) {\n      // ex) <p><br></p>, <span><br></span>\n      return true\n    } else if (lists.all(node.childNodes, isText) && node.innerHTML === '') {\n      // ex) <p></p>, <span></span>\n      return true\n    }\n\n    return false\n  }\n  /**\n   * padding blankHTML if node is empty (for cursor position)\n   */\n\n  function paddingBlankHTML (node) {\n    if (!isVoid(node) && !nodeLength(node)) {\n      node.innerHTML = blankHTML\n    }\n  }\n  /**\n   * find nearest ancestor predicate hit\n   *\n   * @param {Node} node\n   * @param {Function} pred - predicate function\n   */\n\n  function ancestor (node, pred) {\n    while (node) {\n      if (pred(node)) {\n        return node\n      }\n\n      if (isEditable(node)) {\n        break\n      }\n\n      node = node.parentNode\n    }\n\n    return null\n  }\n  /**\n   * find nearest ancestor only single child blood line and predicate hit\n   *\n   * @param {Node} node\n   * @param {Function} pred - predicate function\n   */\n\n  function singleChildAncestor (node, pred) {\n    node = node.parentNode\n\n    while (node) {\n      if (nodeLength(node) !== 1) {\n        break\n      }\n\n      if (pred(node)) {\n        return node\n      }\n\n      if (isEditable(node)) {\n        break\n      }\n\n      node = node.parentNode\n    }\n\n    return null\n  }\n  /**\n   * returns new array of ancestor nodes (until predicate hit).\n   *\n   * @param {Node} node\n   * @param {Function} [optional] pred - predicate function\n   */\n\n  function listAncestor (node, pred) {\n    pred = pred || func.fail\n    var ancestors = []\n    ancestor(node, function (el) {\n      if (!isEditable(el)) {\n        ancestors.push(el)\n      }\n\n      return pred(el)\n    })\n    return ancestors\n  }\n  /**\n   * find farthest ancestor predicate hit\n   */\n\n  function lastAncestor (node, pred) {\n    var ancestors = listAncestor(node)\n    return lists.last(ancestors.filter(pred))\n  }\n  /**\n   * returns common ancestor node between two nodes.\n   *\n   * @param {Node} nodeA\n   * @param {Node} nodeB\n   */\n\n  function commonAncestor (nodeA, nodeB) {\n    var ancestors = listAncestor(nodeA)\n\n    for (var n = nodeB; n; n = n.parentNode) {\n      if ($$1.inArray(n, ancestors) > -1) {\n        return n\n      }\n    }\n\n    return null // difference document area\n  }\n  /**\n   * listing all previous siblings (until predicate hit).\n   *\n   * @param {Node} node\n   * @param {Function} [optional] pred - predicate function\n   */\n\n  function listPrev (node, pred) {\n    pred = pred || func.fail\n    var nodes = []\n\n    while (node) {\n      if (pred(node)) {\n        break\n      }\n\n      nodes.push(node)\n      node = node.previousSibling\n    }\n\n    return nodes\n  }\n  /**\n   * listing next siblings (until predicate hit).\n   *\n   * @param {Node} node\n   * @param {Function} [pred] - predicate function\n   */\n\n  function listNext (node, pred) {\n    pred = pred || func.fail\n    var nodes = []\n\n    while (node) {\n      if (pred(node)) {\n        break\n      }\n\n      nodes.push(node)\n      node = node.nextSibling\n    }\n\n    return nodes\n  }\n  /**\n   * listing descendant nodes\n   *\n   * @param {Node} node\n   * @param {Function} [pred] - predicate function\n   */\n\n  function listDescendant (node, pred) {\n    var descendants = []\n    pred = pred || func.ok; // start DFS(depth first search) with node\n\n    (function fnWalk (current) {\n      if (node !== current && pred(current)) {\n        descendants.push(current)\n      }\n\n      for (var idx = 0, len = current.childNodes.length; idx < len; idx++) {\n        fnWalk(current.childNodes[idx])\n      }\n    })(node)\n\n    return descendants\n  }\n  /**\n   * wrap node with new tag.\n   *\n   * @param {Node} node\n   * @param {Node} tagName of wrapper\n   * @return {Node} - wrapper\n   */\n\n  function wrap (node, wrapperName) {\n    var parent = node.parentNode\n    var wrapper = $$1('<' + wrapperName + '>')[0]\n    parent.insertBefore(wrapper, node)\n    wrapper.appendChild(node)\n    return wrapper\n  }\n  /**\n   * insert node after preceding\n   *\n   * @param {Node} node\n   * @param {Node} preceding - predicate function\n   */\n\n  function insertAfter (node, preceding) {\n    var next = preceding.nextSibling\n    var parent = preceding.parentNode\n\n    if (next) {\n      parent.insertBefore(node, next)\n    } else {\n      parent.appendChild(node)\n    }\n\n    return node\n  }\n  /**\n   * append elements.\n   *\n   * @param {Node} node\n   * @param {Collection} aChild\n   */\n\n  function appendChildNodes (node, aChild) {\n    $$1.each(aChild, function (idx, child) {\n      node.appendChild(child)\n    })\n    return node\n  }\n  /**\n   * returns whether boundaryPoint is left edge or not.\n   *\n   * @param {BoundaryPoint} point\n   * @return {Boolean}\n   */\n\n  function isLeftEdgePoint (point) {\n    return point.offset === 0\n  }\n  /**\n   * returns whether boundaryPoint is right edge or not.\n   *\n   * @param {BoundaryPoint} point\n   * @return {Boolean}\n   */\n\n  function isRightEdgePoint (point) {\n    return point.offset === nodeLength(point.node)\n  }\n  /**\n   * returns whether boundaryPoint is edge or not.\n   *\n   * @param {BoundaryPoint} point\n   * @return {Boolean}\n   */\n\n  function isEdgePoint (point) {\n    return isLeftEdgePoint(point) || isRightEdgePoint(point)\n  }\n  /**\n   * returns whether node is left edge of ancestor or not.\n   *\n   * @param {Node} node\n   * @param {Node} ancestor\n   * @return {Boolean}\n   */\n\n  function isLeftEdgeOf (node, ancestor) {\n    while (node && node !== ancestor) {\n      if (position(node) !== 0) {\n        return false\n      }\n\n      node = node.parentNode\n    }\n\n    return true\n  }\n  /**\n   * returns whether node is right edge of ancestor or not.\n   *\n   * @param {Node} node\n   * @param {Node} ancestor\n   * @return {Boolean}\n   */\n\n  function isRightEdgeOf (node, ancestor) {\n    if (!ancestor) {\n      return false\n    }\n\n    while (node && node !== ancestor) {\n      if (position(node) !== nodeLength(node.parentNode) - 1) {\n        return false\n      }\n\n      node = node.parentNode\n    }\n\n    return true\n  }\n  /**\n   * returns whether point is left edge of ancestor or not.\n   * @param {BoundaryPoint} point\n   * @param {Node} ancestor\n   * @return {Boolean}\n   */\n\n  function isLeftEdgePointOf (point, ancestor) {\n    return isLeftEdgePoint(point) && isLeftEdgeOf(point.node, ancestor)\n  }\n  /**\n   * returns whether point is right edge of ancestor or not.\n   * @param {BoundaryPoint} point\n   * @param {Node} ancestor\n   * @return {Boolean}\n   */\n\n  function isRightEdgePointOf (point, ancestor) {\n    return isRightEdgePoint(point) && isRightEdgeOf(point.node, ancestor)\n  }\n  /**\n   * returns offset from parent.\n   *\n   * @param {Node} node\n   */\n\n  function position (node) {\n    var offset = 0\n\n    while (node = node.previousSibling) {\n      offset += 1\n    }\n\n    return offset\n  }\n\n  function hasChildren (node) {\n    return !!(node && node.childNodes && node.childNodes.length)\n  }\n  /**\n   * returns previous boundaryPoint\n   *\n   * @param {BoundaryPoint} point\n   * @param {Boolean} isSkipInnerOffset\n   * @return {BoundaryPoint}\n   */\n\n  function prevPoint (point, isSkipInnerOffset) {\n    var node\n    var offset\n\n    if (point.offset === 0) {\n      if (isEditable(point.node)) {\n        return null\n      }\n\n      node = point.node.parentNode\n      offset = position(point.node)\n    } else if (hasChildren(point.node)) {\n      node = point.node.childNodes[point.offset - 1]\n      offset = nodeLength(node)\n    } else {\n      node = point.node\n      offset = isSkipInnerOffset ? 0 : point.offset - 1\n    }\n\n    return {\n      node: node,\n      offset: offset\n    }\n  }\n  /**\n   * returns next boundaryPoint\n   *\n   * @param {BoundaryPoint} point\n   * @param {Boolean} isSkipInnerOffset\n   * @return {BoundaryPoint}\n   */\n\n  function nextPoint (point, isSkipInnerOffset) {\n    var node, offset\n\n    if (nodeLength(point.node) === point.offset) {\n      if (isEditable(point.node)) {\n        return null\n      }\n\n      node = point.node.parentNode\n      offset = position(point.node) + 1\n    } else if (hasChildren(point.node)) {\n      node = point.node.childNodes[point.offset]\n      offset = 0\n    } else {\n      node = point.node\n      offset = isSkipInnerOffset ? nodeLength(point.node) : point.offset + 1\n    }\n\n    return {\n      node: node,\n      offset: offset\n    }\n  }\n  /**\n   * returns whether pointA and pointB is same or not.\n   *\n   * @param {BoundaryPoint} pointA\n   * @param {BoundaryPoint} pointB\n   * @return {Boolean}\n   */\n\n  function isSamePoint (pointA, pointB) {\n    return pointA.node === pointB.node && pointA.offset === pointB.offset\n  }\n  /**\n   * returns whether point is visible (can set cursor) or not.\n   *\n   * @param {BoundaryPoint} point\n   * @return {Boolean}\n   */\n\n  function isVisiblePoint (point) {\n    if (isText(point.node) || !hasChildren(point.node) || isEmpty(point.node)) {\n      return true\n    }\n\n    var leftNode = point.node.childNodes[point.offset - 1]\n    var rightNode = point.node.childNodes[point.offset]\n\n    if ((!leftNode || isVoid(leftNode)) && (!rightNode || isVoid(rightNode))) {\n      return true\n    }\n\n    return false\n  }\n  /**\n   * @method prevPointUtil\n   *\n   * @param {BoundaryPoint} point\n   * @param {Function} pred\n   * @return {BoundaryPoint}\n   */\n\n  function prevPointUntil (point, pred) {\n    while (point) {\n      if (pred(point)) {\n        return point\n      }\n\n      point = prevPoint(point)\n    }\n\n    return null\n  }\n  /**\n   * @method nextPointUntil\n   *\n   * @param {BoundaryPoint} point\n   * @param {Function} pred\n   * @return {BoundaryPoint}\n   */\n\n  function nextPointUntil (point, pred) {\n    while (point) {\n      if (pred(point)) {\n        return point\n      }\n\n      point = nextPoint(point)\n    }\n\n    return null\n  }\n  /**\n   * returns whether point has character or not.\n   *\n   * @param {Point} point\n   * @return {Boolean}\n   */\n\n  function isCharPoint (point) {\n    if (!isText(point.node)) {\n      return false\n    }\n\n    var ch = point.node.nodeValue.charAt(point.offset - 1)\n    return ch && ch !== ' ' && ch !== NBSP_CHAR\n  }\n  /**\n   * @method walkPoint\n   *\n   * @param {BoundaryPoint} startPoint\n   * @param {BoundaryPoint} endPoint\n   * @param {Function} handler\n   * @param {Boolean} isSkipInnerOffset\n   */\n\n  function walkPoint (startPoint, endPoint, handler, isSkipInnerOffset) {\n    var point = startPoint\n\n    while (point) {\n      handler(point)\n\n      if (isSamePoint(point, endPoint)) {\n        break\n      }\n\n      var isSkipOffset = isSkipInnerOffset && startPoint.node !== point.node && endPoint.node !== point.node\n      point = nextPoint(point, isSkipOffset)\n    }\n  }\n  /**\n   * @method makeOffsetPath\n   *\n   * return offsetPath(array of offset) from ancestor\n   *\n   * @param {Node} ancestor - ancestor node\n   * @param {Node} node\n   */\n\n  function makeOffsetPath (ancestor, node) {\n    var ancestors = listAncestor(node, func.eq(ancestor))\n    return ancestors.map(position).reverse()\n  }\n  /**\n   * @method fromOffsetPath\n   *\n   * return element from offsetPath(array of offset)\n   *\n   * @param {Node} ancestor - ancestor node\n   * @param {array} offsets - offsetPath\n   */\n\n  function fromOffsetPath (ancestor, offsets) {\n    var current = ancestor\n\n    for (var i = 0, len = offsets.length; i < len; i++) {\n      if (current.childNodes.length <= offsets[i]) {\n        current = current.childNodes[current.childNodes.length - 1]\n      } else {\n        current = current.childNodes[offsets[i]]\n      }\n    }\n\n    return current\n  }\n  /**\n   * @method splitNode\n   *\n   * split element or #text\n   *\n   * @param {BoundaryPoint} point\n   * @param {Object} [options]\n   * @param {Boolean} [options.isSkipPaddingBlankHTML] - default: false\n   * @param {Boolean} [options.isNotSplitEdgePoint] - default: false\n   * @return {Node} right node of boundaryPoint\n   */\n\n  function splitNode (point, options) {\n    var isSkipPaddingBlankHTML = options && options.isSkipPaddingBlankHTML\n    var isNotSplitEdgePoint = options && options.isNotSplitEdgePoint // edge case\n\n    if (isEdgePoint(point) && (isText(point.node) || isNotSplitEdgePoint)) {\n      if (isLeftEdgePoint(point)) {\n        return point.node\n      } else if (isRightEdgePoint(point)) {\n        return point.node.nextSibling\n      }\n    } // split #text\n\n    if (isText(point.node)) {\n      return point.node.splitText(point.offset)\n    } else {\n      var childNode = point.node.childNodes[point.offset]\n      var clone = insertAfter(point.node.cloneNode(false), point.node)\n      appendChildNodes(clone, listNext(childNode))\n\n      if (!isSkipPaddingBlankHTML) {\n        paddingBlankHTML(point.node)\n        paddingBlankHTML(clone)\n      }\n\n      return clone\n    }\n  }\n  /**\n   * @method splitTree\n   *\n   * split tree by point\n   *\n   * @param {Node} root - split root\n   * @param {BoundaryPoint} point\n   * @param {Object} [options]\n   * @param {Boolean} [options.isSkipPaddingBlankHTML] - default: false\n   * @param {Boolean} [options.isNotSplitEdgePoint] - default: false\n   * @return {Node} right node of boundaryPoint\n   */\n\n  function splitTree (root, point, options) {\n    // ex) [#text, <span>, <p>]\n    var ancestors = listAncestor(point.node, func.eq(root))\n\n    if (!ancestors.length) {\n      return null\n    } else if (ancestors.length === 1) {\n      return splitNode(point, options)\n    }\n\n    return ancestors.reduce(function (node, parent) {\n      if (node === point.node) {\n        node = splitNode(point, options)\n      }\n\n      return splitNode({\n        node: parent,\n        offset: node ? position(node) : nodeLength(parent)\n      }, options)\n    })\n  }\n  /**\n   * split point\n   *\n   * @param {Point} point\n   * @param {Boolean} isInline\n   * @return {Object}\n   */\n\n  function splitPoint (point, isInline) {\n    // find splitRoot, container\n    //  - inline: splitRoot is a child of paragraph\n    //  - block: splitRoot is a child of bodyContainer\n    var pred = isInline ? isPara : isBodyContainer\n    var ancestors = listAncestor(point.node, pred)\n    var topAncestor = lists.last(ancestors) || point.node\n    var splitRoot, container\n\n    if (pred(topAncestor)) {\n      splitRoot = ancestors[ancestors.length - 2]\n      container = topAncestor\n    } else {\n      splitRoot = topAncestor\n      container = splitRoot.parentNode\n    } // if splitRoot is exists, split with splitTree\n\n    var pivot = splitRoot && splitTree(splitRoot, point, {\n      isSkipPaddingBlankHTML: isInline,\n      isNotSplitEdgePoint: isInline\n    }) // if container is point.node, find pivot with point.offset\n\n    if (!pivot && container === point.node) {\n      pivot = point.node.childNodes[point.offset]\n    }\n\n    return {\n      rightNode: pivot,\n      container: container\n    }\n  }\n\n  function create (nodeName) {\n    return document.createElement(nodeName)\n  }\n\n  function createText (text) {\n    return document.createTextNode(text)\n  }\n  /**\n   * @method remove\n   *\n   * remove node, (isRemoveChild: remove child or not)\n   *\n   * @param {Node} node\n   * @param {Boolean} isRemoveChild\n   */\n\n  function remove (node, isRemoveChild) {\n    if (!node || !node.parentNode) {\n      return\n    }\n\n    if (node.removeNode) {\n      return node.removeNode(isRemoveChild)\n    }\n\n    var parent = node.parentNode\n\n    if (!isRemoveChild) {\n      var nodes = []\n\n      for (var i = 0, len = node.childNodes.length; i < len; i++) {\n        nodes.push(node.childNodes[i])\n      }\n\n      for (var i = 0, len = nodes.length; i < len; i++) {\n        parent.insertBefore(nodes[i], node)\n      }\n    }\n\n    parent.removeChild(node)\n  }\n  /**\n   * @method removeWhile\n   *\n   * @param {Node} node\n   * @param {Function} pred\n   */\n\n  function removeWhile (node, pred) {\n    while (node) {\n      if (isEditable(node) || !pred(node)) {\n        break\n      }\n\n      var parent = node.parentNode\n      remove(node)\n      node = parent\n    }\n  }\n  /**\n   * @method replace\n   *\n   * replace node with provided nodeName\n   *\n   * @param {Node} node\n   * @param {String} nodeName\n   * @return {Node} - new node\n   */\n\n  function replace (node, nodeName) {\n    if (node.nodeName.toUpperCase() === nodeName.toUpperCase()) {\n      return node\n    }\n\n    var newNode = create(nodeName)\n\n    if (node.style.cssText) {\n      newNode.style.cssText = node.style.cssText\n    }\n\n    appendChildNodes(newNode, lists.from(node.childNodes))\n    insertAfter(newNode, node)\n    remove(node)\n    return newNode\n  }\n\n  var isTextarea = makePredByNodeName('TEXTAREA')\n  /**\n   * @param {jQuery} $node\n   * @param {Boolean} [stripLinebreaks] - default: false\n   */\n\n  function value ($node, stripLinebreaks) {\n    var val = isTextarea($node[0]) ? $node.val() : $node.html()\n\n    if (stripLinebreaks) {\n      return val.replace(/[\\n\\r]/g, '')\n    }\n\n    return val\n  }\n  /**\n   * @method html\n   *\n   * get the HTML contents of node\n   *\n   * @param {jQuery} $node\n   * @param {Boolean} [isNewlineOnBlock]\n   */\n\n  function html ($node, isNewlineOnBlock) {\n    var markup = value($node)\n\n    if (isNewlineOnBlock) {\n      var regexTag = /<(\\/?)(\\b(?!!)[^>\\s]*)(.*?)(\\s*\\/?>)/g\n      markup = markup.replace(regexTag, function (match, endSlash, name) {\n        name = name.toUpperCase()\n        var isEndOfInlineContainer = /^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(name) && !!endSlash\n        var isBlockNode = /^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(name)\n        return match + (isEndOfInlineContainer || isBlockNode ? '\\n' : '')\n      })\n      markup = $$1.trim(markup)\n    }\n\n    return markup\n  }\n\n  function posFromPlaceholder (placeholder) {\n    var $placeholder = $$1(placeholder)\n    var pos = $placeholder.offset()\n    var height = $placeholder.outerHeight(true) // include margin\n\n    return {\n      left: pos.left,\n      top: pos.top + height\n    }\n  }\n\n  function attachEvents ($node, events) {\n    Object.keys(events).forEach(function (key) {\n      $node.on(key, events[key])\n    })\n  }\n\n  function detachEvents ($node, events) {\n    Object.keys(events).forEach(function (key) {\n      $node.off(key, events[key])\n    })\n  }\n  /**\n   * @method isCustomStyleTag\n   *\n   * assert if a node contains a \"note-styletag\" class,\n   * which implies that's a custom-made style tag node\n   *\n   * @param {Node} an HTML DOM node\n   */\n\n  function isCustomStyleTag (node) {\n    return node && !isText(node) && lists.contains(node.classList, 'note-styletag')\n  }\n\n  var dom = {\n    /** @property {String} NBSP_CHAR */\n    NBSP_CHAR: NBSP_CHAR,\n\n    /** @property {String} ZERO_WIDTH_NBSP_CHAR */\n    ZERO_WIDTH_NBSP_CHAR: ZERO_WIDTH_NBSP_CHAR,\n\n    /** @property {String} blank */\n    blank: blankHTML,\n\n    /** @property {String} emptyPara */\n    emptyPara: '<p>' + blankHTML + '</p>',\n    makePredByNodeName: makePredByNodeName,\n    isEditable: isEditable,\n    isControlSizing: isControlSizing,\n    isText: isText,\n    isElement: isElement,\n    isVoid: isVoid,\n    isPara: isPara,\n    isPurePara: isPurePara,\n    isHeading: isHeading,\n    isInline: isInline,\n    isBlock: func.not(isInline),\n    isBodyInline: isBodyInline,\n    isBody: isBody,\n    isParaInline: isParaInline,\n    isPre: isPre,\n    isList: isList,\n    isTable: isTable,\n    isData: isData,\n    isCell: isCell,\n    isBlockquote: isBlockquote,\n    isBodyContainer: isBodyContainer,\n    isAnchor: isAnchor,\n    isDiv: makePredByNodeName('DIV'),\n    isLi: isLi,\n    isBR: makePredByNodeName('BR'),\n    isSpan: makePredByNodeName('SPAN'),\n    isB: makePredByNodeName('B'),\n    isU: makePredByNodeName('U'),\n    isS: makePredByNodeName('S'),\n    isI: makePredByNodeName('I'),\n    isImg: makePredByNodeName('IMG'),\n    isTextarea: isTextarea,\n    isEmpty: isEmpty,\n    isEmptyAnchor: func.and(isAnchor, isEmpty),\n    isClosestSibling: isClosestSibling,\n    withClosestSiblings: withClosestSiblings,\n    nodeLength: nodeLength,\n    isLeftEdgePoint: isLeftEdgePoint,\n    isRightEdgePoint: isRightEdgePoint,\n    isEdgePoint: isEdgePoint,\n    isLeftEdgeOf: isLeftEdgeOf,\n    isRightEdgeOf: isRightEdgeOf,\n    isLeftEdgePointOf: isLeftEdgePointOf,\n    isRightEdgePointOf: isRightEdgePointOf,\n    prevPoint: prevPoint,\n    nextPoint: nextPoint,\n    isSamePoint: isSamePoint,\n    isVisiblePoint: isVisiblePoint,\n    prevPointUntil: prevPointUntil,\n    nextPointUntil: nextPointUntil,\n    isCharPoint: isCharPoint,\n    walkPoint: walkPoint,\n    ancestor: ancestor,\n    singleChildAncestor: singleChildAncestor,\n    listAncestor: listAncestor,\n    lastAncestor: lastAncestor,\n    listNext: listNext,\n    listPrev: listPrev,\n    listDescendant: listDescendant,\n    commonAncestor: commonAncestor,\n    wrap: wrap,\n    insertAfter: insertAfter,\n    appendChildNodes: appendChildNodes,\n    position: position,\n    hasChildren: hasChildren,\n    makeOffsetPath: makeOffsetPath,\n    fromOffsetPath: fromOffsetPath,\n    splitTree: splitTree,\n    splitPoint: splitPoint,\n    create: create,\n    createText: createText,\n    remove: remove,\n    removeWhile: removeWhile,\n    replace: replace,\n    html: html,\n    value: value,\n    posFromPlaceholder: posFromPlaceholder,\n    attachEvents: attachEvents,\n    detachEvents: detachEvents,\n    isCustomStyleTag: isCustomStyleTag\n  }\n  $$1.summernote = $$1.summernote || {\n    lang: {}\n  }\n  $$1.extend($$1.summernote.lang, {\n    'en-US': {\n      font: {\n        bold: 'Bold',\n        italic: 'Italic',\n        underline: 'Underline',\n        clear: 'Remove Font Style',\n        height: 'Line Height',\n        name: 'Font Family',\n        strikethrough: 'Strikethrough',\n        subscript: 'Subscript',\n        superscript: 'Superscript',\n        size: 'Font Size'\n      },\n      image: {\n        image: 'Picture',\n        insert: 'Insert Image',\n        resizeFull: 'Resize Full',\n        resizeHalf: 'Resize Half',\n        resizeQuarter: 'Resize Quarter',\n        floatLeft: 'Float Left',\n        floatRight: 'Float Right',\n        floatNone: 'Float None',\n        shapeRounded: 'Shape: Rounded',\n        shapeCircle: 'Shape: Circle',\n        shapeThumbnail: 'Shape: Thumbnail',\n        shapeNone: 'Shape: None',\n        dragImageHere: 'Drag image or text here',\n        dropImage: 'Drop image or Text',\n        selectFromFiles: 'Select from files',\n        maximumFileSize: 'Maximum file size',\n        maximumFileSizeError: 'Maximum file size exceeded.',\n        url: 'Image URL',\n        remove: 'Remove Image',\n        original: 'Original'\n      },\n      video: {\n        video: 'Video',\n        videoLink: 'Video Link',\n        insert: 'Insert Video',\n        url: 'Video URL',\n        providers: '(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)'\n      },\n      link: {\n        link: 'Link',\n        insert: 'Insert Link',\n        unlink: 'Unlink',\n        edit: 'Edit',\n        textToDisplay: 'Text to display',\n        url: 'To what URL should this link go?',\n        openInNewWindow: 'Open in new window'\n      },\n      table: {\n        table: 'Table',\n        addRowAbove: 'Add row above',\n        addRowBelow: 'Add row below',\n        addColLeft: 'Add column left',\n        addColRight: 'Add column right',\n        delRow: 'Delete row',\n        delCol: 'Delete column',\n        delTable: 'Delete table'\n      },\n      hr: {\n        insert: 'Insert Horizontal Rule'\n      },\n      style: {\n        style: 'Style',\n        p: 'Normal',\n        blockquote: 'Quote',\n        pre: 'Code',\n        h1: 'Header 1',\n        h2: 'Header 2',\n        h3: 'Header 3',\n        h4: 'Header 4',\n        h5: 'Header 5',\n        h6: 'Header 6'\n      },\n      lists: {\n        unordered: 'Unordered list',\n        ordered: 'Ordered list'\n      },\n      options: {\n        help: 'Help',\n        fullscreen: 'Full Screen',\n        codeview: 'Code View'\n      },\n      paragraph: {\n        paragraph: 'Paragraph',\n        outdent: 'Outdent',\n        indent: 'Indent',\n        left: 'Align left',\n        center: 'Align center',\n        right: 'Align right',\n        justify: 'Justify full'\n      },\n      color: {\n        recent: 'Recent Color',\n        more: 'More Color',\n        background: 'Background Color',\n        foreground: 'Foreground Color',\n        transparent: 'Transparent',\n        setTransparent: 'Set transparent',\n        reset: 'Reset',\n        resetToDefault: 'Reset to default'\n      },\n      shortcut: {\n        shortcuts: 'Keyboard shortcuts',\n        close: 'Close',\n        textFormatting: 'Text formatting',\n        action: 'Action',\n        paragraphFormatting: 'Paragraph formatting',\n        documentStyle: 'Document Style',\n        extraKeys: 'Extra keys'\n      },\n      help: {\n        'insertParagraph': 'Insert Paragraph',\n        'undo': 'Undoes the last command',\n        'redo': 'Redoes the last command',\n        'tab': 'Tab',\n        'untab': 'Untab',\n        'bold': 'Set a bold style',\n        'italic': 'Set a italic style',\n        'underline': 'Set a underline style',\n        'strikethrough': 'Set a strikethrough style',\n        'removeFormat': 'Clean a style',\n        'justifyLeft': 'Set left align',\n        'justifyCenter': 'Set center align',\n        'justifyRight': 'Set right align',\n        'justifyFull': 'Set full align',\n        'insertUnorderedList': 'Toggle unordered list',\n        'insertOrderedList': 'Toggle ordered list',\n        'outdent': 'Outdent on current paragraph',\n        'indent': 'Indent on current paragraph',\n        'formatPara': 'Change current block\\'s format as a paragraph(P tag)',\n        'formatH1': 'Change current block\\'s format as H1',\n        'formatH2': 'Change current block\\'s format as H2',\n        'formatH3': 'Change current block\\'s format as H3',\n        'formatH4': 'Change current block\\'s format as H4',\n        'formatH5': 'Change current block\\'s format as H5',\n        'formatH6': 'Change current block\\'s format as H6',\n        'insertHorizontalRule': 'Insert horizontal rule',\n        'linkDialog.show': 'Show Link Dialog'\n      },\n      history: {\n        undo: 'Undo',\n        redo: 'Redo'\n      },\n      specialChar: {\n        specialChar: 'SPECIAL CHARACTERS',\n        select: 'Select Special characters'\n      }\n    }\n  })\n  var KEY_MAP = {\n    'BACKSPACE': 8,\n    'TAB': 9,\n    'ENTER': 13,\n    'SPACE': 32,\n    'DELETE': 46,\n    // Arrow\n    'LEFT': 37,\n    'UP': 38,\n    'RIGHT': 39,\n    'DOWN': 40,\n    // Number: 0-9\n    'NUM0': 48,\n    'NUM1': 49,\n    'NUM2': 50,\n    'NUM3': 51,\n    'NUM4': 52,\n    'NUM5': 53,\n    'NUM6': 54,\n    'NUM7': 55,\n    'NUM8': 56,\n    // Alphabet: a-z\n    'B': 66,\n    'E': 69,\n    'I': 73,\n    'J': 74,\n    'K': 75,\n    'L': 76,\n    'R': 82,\n    'S': 83,\n    'U': 85,\n    'V': 86,\n    'Y': 89,\n    'Z': 90,\n    'SLASH': 191,\n    'LEFTBRACKET': 219,\n    'BACKSLASH': 220,\n    'RIGHTBRACKET': 221\n  }\n  /**\n   * @class core.key\n   *\n   * Object for keycodes.\n   *\n   * @singleton\n   * @alternateClassName key\n   */\n\n  var key = {\n    /**\n     * @method isEdit\n     *\n     * @param {Number} keyCode\n     * @return {Boolean}\n     */\n    isEdit: function (keyCode) {\n      return lists.contains([KEY_MAP.BACKSPACE, KEY_MAP.TAB, KEY_MAP.ENTER, KEY_MAP.SPACE, KEY_MAP.DELETE], keyCode)\n    },\n\n    /**\n     * @method isMove\n     *\n     * @param {Number} keyCode\n     * @return {Boolean}\n     */\n    isMove: function (keyCode) {\n      return lists.contains([KEY_MAP.LEFT, KEY_MAP.UP, KEY_MAP.RIGHT, KEY_MAP.DOWN], keyCode)\n    },\n\n    /**\n     * @property {Object} nameFromCode\n     * @property {String} nameFromCode.8 \"BACKSPACE\"\n     */\n    nameFromCode: func.invertObject(KEY_MAP),\n    code: KEY_MAP\n  }\n  /**\n   * return boundaryPoint from TextRange, inspired by Andy Na's HuskyRange.js\n   *\n   * @param {TextRange} textRange\n   * @param {Boolean} isStart\n   * @return {BoundaryPoint}\n   *\n   * @see http://msdn.microsoft.com/en-us/library/ie/ms535872(v=vs.85).aspx\n   */\n\n  function textRangeToPoint (textRange, isStart) {\n    var container = textRange.parentElement()\n    var offset\n    var tester = document.body.createTextRange()\n    var prevContainer\n    var childNodes = lists.from(container.childNodes)\n\n    for (offset = 0; offset < childNodes.length; offset++) {\n      if (dom.isText(childNodes[offset])) {\n        continue\n      }\n\n      tester.moveToElementText(childNodes[offset])\n\n      if (tester.compareEndPoints('StartToStart', textRange) >= 0) {\n        break\n      }\n\n      prevContainer = childNodes[offset]\n    }\n\n    if (offset !== 0 && dom.isText(childNodes[offset - 1])) {\n      var textRangeStart = document.body.createTextRange()\n      var curTextNode = null\n      textRangeStart.moveToElementText(prevContainer || container)\n      textRangeStart.collapse(!prevContainer)\n      curTextNode = prevContainer ? prevContainer.nextSibling : container.firstChild\n      var pointTester = textRange.duplicate()\n      pointTester.setEndPoint('StartToStart', textRangeStart)\n      var textCount = pointTester.text.replace(/[\\r\\n]/g, '').length\n\n      while (textCount > curTextNode.nodeValue.length && curTextNode.nextSibling) {\n        textCount -= curTextNode.nodeValue.length\n        curTextNode = curTextNode.nextSibling\n      } // [workaround] enforce IE to re-reference curTextNode, hack\n\n      var dummy = curTextNode.nodeValue; // eslint-disable-line\n\n      if (isStart && curTextNode.nextSibling && dom.isText(curTextNode.nextSibling) && textCount === curTextNode.nodeValue.length) {\n        textCount -= curTextNode.nodeValue.length\n        curTextNode = curTextNode.nextSibling\n      }\n\n      container = curTextNode\n      offset = textCount\n    }\n\n    return {\n      cont: container,\n      offset: offset\n    }\n  }\n  /**\n   * return TextRange from boundary point (inspired by google closure-library)\n   * @param {BoundaryPoint} point\n   * @return {TextRange}\n   */\n\n  function pointToTextRange (point) {\n    var textRangeInfo = function (container, offset) {\n      var node, isCollapseToStart\n\n      if (dom.isText(container)) {\n        var prevTextNodes = dom.listPrev(container, func.not(dom.isText))\n        var prevContainer = lists.last(prevTextNodes).previousSibling\n        node = prevContainer || container.parentNode\n        offset += lists.sum(lists.tail(prevTextNodes), dom.nodeLength)\n        isCollapseToStart = !prevContainer\n      } else {\n        node = container.childNodes[offset] || container\n\n        if (dom.isText(node)) {\n          return textRangeInfo(node, 0)\n        }\n\n        offset = 0\n        isCollapseToStart = false\n      }\n\n      return {\n        node: node,\n        collapseToStart: isCollapseToStart,\n        offset: offset\n      }\n    }\n\n    var textRange = document.body.createTextRange()\n    var info = textRangeInfo(point.node, point.offset)\n    textRange.moveToElementText(info.node)\n    textRange.collapse(info.collapseToStart)\n    textRange.moveStart('character', info.offset)\n    return textRange\n  }\n  /**\n     * Wrapped Range\n     *\n     * @constructor\n     * @param {Node} sc - start container\n     * @param {Number} so - start offset\n     * @param {Node} ec - end container\n     * @param {Number} eo - end offset\n     */\n\n  var WrappedRange =\n  /** @class */\n  (function () {\n    function WrappedRange (sc, so, ec, eo) {\n      this.sc = sc\n      this.so = so\n      this.ec = ec\n      this.eo = eo // isOnEditable: judge whether range is on editable or not\n\n      this.isOnEditable = this.makeIsOn(dom.isEditable) // isOnList: judge whether range is on list node or not\n\n      this.isOnList = this.makeIsOn(dom.isList) // isOnAnchor: judge whether range is on anchor node or not\n\n      this.isOnAnchor = this.makeIsOn(dom.isAnchor) // isOnCell: judge whether range is on cell node or not\n\n      this.isOnCell = this.makeIsOn(dom.isCell) // isOnData: judge whether range is on data node or not\n\n      this.isOnData = this.makeIsOn(dom.isData)\n    } // nativeRange: get nativeRange from sc, so, ec, eo\n\n    WrappedRange.prototype.nativeRange = function () {\n      if (env.isW3CRangeSupport) {\n        var w3cRange = document.createRange()\n        w3cRange.setStart(this.sc, this.so)\n        w3cRange.setEnd(this.ec, this.eo)\n        return w3cRange\n      } else {\n        var textRange = pointToTextRange({\n          node: this.sc,\n          offset: this.so\n        })\n        textRange.setEndPoint('EndToEnd', pointToTextRange({\n          node: this.ec,\n          offset: this.eo\n        }))\n        return textRange\n      }\n    }\n\n    WrappedRange.prototype.getPoints = function () {\n      return {\n        sc: this.sc,\n        so: this.so,\n        ec: this.ec,\n        eo: this.eo\n      }\n    }\n\n    WrappedRange.prototype.getStartPoint = function () {\n      return {\n        node: this.sc,\n        offset: this.so\n      }\n    }\n\n    WrappedRange.prototype.getEndPoint = function () {\n      return {\n        node: this.ec,\n        offset: this.eo\n      }\n    }\n    /**\n     * select update visible range\n     */\n\n    WrappedRange.prototype.select = function () {\n      var nativeRng = this.nativeRange()\n\n      if (env.isW3CRangeSupport) {\n        var selection = document.getSelection()\n\n        if (selection.rangeCount > 0) {\n          selection.removeAllRanges()\n        }\n\n        selection.addRange(nativeRng)\n      } else {\n        nativeRng.select()\n      }\n\n      return this\n    }\n    /**\n     * Moves the scrollbar to start container(sc) of current range\n     *\n     * @return {WrappedRange}\n     */\n\n    WrappedRange.prototype.scrollIntoView = function (container) {\n      var height = $$1(container).height()\n\n      if (container.scrollTop + height < this.sc.offsetTop) {\n        container.scrollTop += Math.abs(container.scrollTop + height - this.sc.offsetTop)\n      }\n\n      return this\n    }\n    /**\n     * @return {WrappedRange}\n     */\n\n    WrappedRange.prototype.normalize = function () {\n      /**\n       * @param {BoundaryPoint} point\n       * @param {Boolean} isLeftToRight\n       * @return {BoundaryPoint}\n       */\n      var getVisiblePoint = function (point, isLeftToRight) {\n        if (dom.isVisiblePoint(point) && !dom.isEdgePoint(point) || dom.isVisiblePoint(point) && dom.isRightEdgePoint(point) && !isLeftToRight || dom.isVisiblePoint(point) && dom.isLeftEdgePoint(point) && isLeftToRight || dom.isVisiblePoint(point) && dom.isBlock(point.node) && dom.isEmpty(point.node)) {\n          return point\n        } // point on block's edge\n\n        var block = dom.ancestor(point.node, dom.isBlock)\n\n        if ((dom.isLeftEdgePointOf(point, block) || dom.isVoid(dom.prevPoint(point).node)) && !isLeftToRight || (dom.isRightEdgePointOf(point, block) || dom.isVoid(dom.nextPoint(point).node)) && isLeftToRight) {\n          // returns point already on visible point\n          if (dom.isVisiblePoint(point)) {\n            return point\n          } // reverse direction\n\n          isLeftToRight = !isLeftToRight\n        }\n\n        var nextPoint = isLeftToRight ? dom.nextPointUntil(dom.nextPoint(point), dom.isVisiblePoint) : dom.prevPointUntil(dom.prevPoint(point), dom.isVisiblePoint)\n        return nextPoint || point\n      }\n\n      var endPoint = getVisiblePoint(this.getEndPoint(), false)\n      var startPoint = this.isCollapsed() ? endPoint : getVisiblePoint(this.getStartPoint(), true)\n      return new WrappedRange(startPoint.node, startPoint.offset, endPoint.node, endPoint.offset)\n    }\n    /**\n     * returns matched nodes on range\n     *\n     * @param {Function} [pred] - predicate function\n     * @param {Object} [options]\n     * @param {Boolean} [options.includeAncestor]\n     * @param {Boolean} [options.fullyContains]\n     * @return {Node[]}\n     */\n\n    WrappedRange.prototype.nodes = function (pred, options) {\n      pred = pred || func.ok\n      var includeAncestor = options && options.includeAncestor\n      var fullyContains = options && options.fullyContains // TODO compare points and sort\n\n      var startPoint = this.getStartPoint()\n      var endPoint = this.getEndPoint()\n      var nodes = []\n      var leftEdgeNodes = []\n      dom.walkPoint(startPoint, endPoint, function (point) {\n        if (dom.isEditable(point.node)) {\n          return\n        }\n\n        var node\n\n        if (fullyContains) {\n          if (dom.isLeftEdgePoint(point)) {\n            leftEdgeNodes.push(point.node)\n          }\n\n          if (dom.isRightEdgePoint(point) && lists.contains(leftEdgeNodes, point.node)) {\n            node = point.node\n          }\n        } else if (includeAncestor) {\n          node = dom.ancestor(point.node, pred)\n        } else {\n          node = point.node\n        }\n\n        if (node && pred(node)) {\n          nodes.push(node)\n        }\n      }, true)\n      return lists.unique(nodes)\n    }\n    /**\n     * returns commonAncestor of range\n     * @return {Element} - commonAncestor\n     */\n\n    WrappedRange.prototype.commonAncestor = function () {\n      return dom.commonAncestor(this.sc, this.ec)\n    }\n    /**\n     * returns expanded range by pred\n     *\n     * @param {Function} pred - predicate function\n     * @return {WrappedRange}\n     */\n\n    WrappedRange.prototype.expand = function (pred) {\n      var startAncestor = dom.ancestor(this.sc, pred)\n      var endAncestor = dom.ancestor(this.ec, pred)\n\n      if (!startAncestor && !endAncestor) {\n        return new WrappedRange(this.sc, this.so, this.ec, this.eo)\n      }\n\n      var boundaryPoints = this.getPoints()\n\n      if (startAncestor) {\n        boundaryPoints.sc = startAncestor\n        boundaryPoints.so = 0\n      }\n\n      if (endAncestor) {\n        boundaryPoints.ec = endAncestor\n        boundaryPoints.eo = dom.nodeLength(endAncestor)\n      }\n\n      return new WrappedRange(boundaryPoints.sc, boundaryPoints.so, boundaryPoints.ec, boundaryPoints.eo)\n    }\n    /**\n     * @param {Boolean} isCollapseToStart\n     * @return {WrappedRange}\n     */\n\n    WrappedRange.prototype.collapse = function (isCollapseToStart) {\n      if (isCollapseToStart) {\n        return new WrappedRange(this.sc, this.so, this.sc, this.so)\n      } else {\n        return new WrappedRange(this.ec, this.eo, this.ec, this.eo)\n      }\n    }\n    /**\n     * splitText on range\n     */\n\n    WrappedRange.prototype.splitText = function () {\n      var isSameContainer = this.sc === this.ec\n      var boundaryPoints = this.getPoints()\n\n      if (dom.isText(this.ec) && !dom.isEdgePoint(this.getEndPoint())) {\n        this.ec.splitText(this.eo)\n      }\n\n      if (dom.isText(this.sc) && !dom.isEdgePoint(this.getStartPoint())) {\n        boundaryPoints.sc = this.sc.splitText(this.so)\n        boundaryPoints.so = 0\n\n        if (isSameContainer) {\n          boundaryPoints.ec = boundaryPoints.sc\n          boundaryPoints.eo = this.eo - this.so\n        }\n      }\n\n      return new WrappedRange(boundaryPoints.sc, boundaryPoints.so, boundaryPoints.ec, boundaryPoints.eo)\n    }\n    /**\n     * delete contents on range\n     * @return {WrappedRange}\n     */\n\n    WrappedRange.prototype.deleteContents = function () {\n      if (this.isCollapsed()) {\n        return this\n      }\n\n      var rng = this.splitText()\n      var nodes = rng.nodes(null, {\n        fullyContains: true\n      }) // find new cursor point\n\n      var point = dom.prevPointUntil(rng.getStartPoint(), function (point) {\n        return !lists.contains(nodes, point.node)\n      })\n      var emptyParents = []\n      $$1.each(nodes, function (idx, node) {\n        // find empty parents\n        var parent = node.parentNode\n\n        if (point.node !== parent && dom.nodeLength(parent) === 1) {\n          emptyParents.push(parent)\n        }\n\n        dom.remove(node, false)\n      }) // remove empty parents\n\n      $$1.each(emptyParents, function (idx, node) {\n        dom.remove(node, false)\n      })\n      return new WrappedRange(point.node, point.offset, point.node, point.offset).normalize()\n    }\n    /**\n     * makeIsOn: return isOn(pred) function\n     */\n\n    WrappedRange.prototype.makeIsOn = function (pred) {\n      return function () {\n        var ancestor = dom.ancestor(this.sc, pred)\n        return !!ancestor && ancestor === dom.ancestor(this.ec, pred)\n      }\n    }\n    /**\n     * @param {Function} pred\n     * @return {Boolean}\n     */\n\n    WrappedRange.prototype.isLeftEdgeOf = function (pred) {\n      if (!dom.isLeftEdgePoint(this.getStartPoint())) {\n        return false\n      }\n\n      var node = dom.ancestor(this.sc, pred)\n      return node && dom.isLeftEdgeOf(this.sc, node)\n    }\n    /**\n     * returns whether range was collapsed or not\n     */\n\n    WrappedRange.prototype.isCollapsed = function () {\n      return this.sc === this.ec && this.so === this.eo\n    }\n    /**\n     * wrap inline nodes which children of body with paragraph\n     *\n     * @return {WrappedRange}\n     */\n\n    WrappedRange.prototype.wrapBodyInlineWithPara = function () {\n      if (dom.isBodyContainer(this.sc) && dom.isEmpty(this.sc)) {\n        this.sc.innerHTML = dom.emptyPara\n        return new WrappedRange(this.sc.firstChild, 0, this.sc.firstChild, 0)\n      }\n      /**\n       * [workaround] firefox often create range on not visible point. so normalize here.\n       *  - firefox: |<p>text</p>|\n       *  - chrome: <p>|text|</p>\n       */\n\n      var rng = this.normalize()\n\n      if (dom.isParaInline(this.sc) || dom.isPara(this.sc)) {\n        return rng\n      } // find inline top ancestor\n\n      var topAncestor\n\n      if (dom.isInline(rng.sc)) {\n        var ancestors = dom.listAncestor(rng.sc, func.not(dom.isInline))\n        topAncestor = lists.last(ancestors)\n\n        if (!dom.isInline(topAncestor)) {\n          topAncestor = ancestors[ancestors.length - 2] || rng.sc.childNodes[rng.so]\n        }\n      } else {\n        topAncestor = rng.sc.childNodes[rng.so > 0 ? rng.so - 1 : 0]\n      } // siblings not in paragraph\n\n      var inlineSiblings = dom.listPrev(topAncestor, dom.isParaInline).reverse()\n      inlineSiblings = inlineSiblings.concat(dom.listNext(topAncestor.nextSibling, dom.isParaInline)) // wrap with paragraph\n\n      if (inlineSiblings.length) {\n        var para = dom.wrap(lists.head(inlineSiblings), 'p')\n        dom.appendChildNodes(para, lists.tail(inlineSiblings))\n      }\n\n      return this.normalize()\n    }\n    /**\n     * insert node at current cursor\n     *\n     * @param {Node} node\n     * @return {Node}\n     */\n\n    WrappedRange.prototype.insertNode = function (node) {\n      var rng = this.wrapBodyInlineWithPara().deleteContents()\n      var info = dom.splitPoint(rng.getStartPoint(), dom.isInline(node))\n\n      if (info.rightNode) {\n        info.rightNode.parentNode.insertBefore(node, info.rightNode)\n      } else {\n        info.container.appendChild(node)\n      }\n\n      return node\n    }\n    /**\n     * insert html at current cursor\n     */\n\n    WrappedRange.prototype.pasteHTML = function (markup) {\n      var contentsContainer = $$1('<div></div>').html(markup)[0]\n      var childNodes = lists.from(contentsContainer.childNodes)\n      var rng = this.wrapBodyInlineWithPara().deleteContents()\n      return childNodes.reverse().map(function (childNode) {\n        return rng.insertNode(childNode)\n      }).reverse()\n    }\n    /**\n     * returns text in range\n     *\n     * @return {String}\n     */\n\n    WrappedRange.prototype.toString = function () {\n      var nativeRng = this.nativeRange()\n      return env.isW3CRangeSupport ? nativeRng.toString() : nativeRng.text\n    }\n    /**\n     * returns range for word before cursor\n     *\n     * @param {Boolean} [findAfter] - find after cursor, default: false\n     * @return {WrappedRange}\n     */\n\n    WrappedRange.prototype.getWordRange = function (findAfter) {\n      var endPoint = this.getEndPoint()\n\n      if (!dom.isCharPoint(endPoint)) {\n        return this\n      }\n\n      var startPoint = dom.prevPointUntil(endPoint, function (point) {\n        return !dom.isCharPoint(point)\n      })\n\n      if (findAfter) {\n        endPoint = dom.nextPointUntil(endPoint, function (point) {\n          return !dom.isCharPoint(point)\n        })\n      }\n\n      return new WrappedRange(startPoint.node, startPoint.offset, endPoint.node, endPoint.offset)\n    }\n    /**\n     * create offsetPath bookmark\n     *\n     * @param {Node} editable\n     */\n\n    WrappedRange.prototype.bookmark = function (editable) {\n      return {\n        s: {\n          path: dom.makeOffsetPath(editable, this.sc),\n          offset: this.so\n        },\n        e: {\n          path: dom.makeOffsetPath(editable, this.ec),\n          offset: this.eo\n        }\n      }\n    }\n    /**\n     * create offsetPath bookmark base on paragraph\n     *\n     * @param {Node[]} paras\n     */\n\n    WrappedRange.prototype.paraBookmark = function (paras) {\n      return {\n        s: {\n          path: lists.tail(dom.makeOffsetPath(lists.head(paras), this.sc)),\n          offset: this.so\n        },\n        e: {\n          path: lists.tail(dom.makeOffsetPath(lists.last(paras), this.ec)),\n          offset: this.eo\n        }\n      }\n    }\n    /**\n     * getClientRects\n     * @return {Rect[]}\n     */\n\n    WrappedRange.prototype.getClientRects = function () {\n      var nativeRng = this.nativeRange()\n      return nativeRng.getClientRects()\n    }\n\n    return WrappedRange\n  }())\n  /**\n   * Data structure\n   *  * BoundaryPoint: a point of dom tree\n   *  * BoundaryPoints: two boundaryPoints corresponding to the start and the end of the Range\n   *\n   * See to http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level-2-Range-Position\n   */\n\n  var range = {\n    /**\n     * create Range Object From arguments or Browser Selection\n     *\n     * @param {Node} sc - start container\n     * @param {Number} so - start offset\n     * @param {Node} ec - end container\n     * @param {Number} eo - end offset\n     * @return {WrappedRange}\n     */\n    create: function (sc, so, ec, eo) {\n      if (arguments.length === 4) {\n        return new WrappedRange(sc, so, ec, eo)\n      } else if (arguments.length === 2) {\n        ec = sc\n        eo = so\n        return new WrappedRange(sc, so, ec, eo)\n      } else {\n        var wrappedRange = this.createFromSelection()\n\n        if (!wrappedRange && arguments.length === 1) {\n          wrappedRange = this.createFromNode(arguments[0])\n          return wrappedRange.collapse(dom.emptyPara === arguments[0].innerHTML)\n        }\n\n        return wrappedRange\n      }\n    },\n    createFromSelection: function () {\n      var sc, so, ec, eo\n\n      if (env.isW3CRangeSupport) {\n        var selection = document.getSelection()\n\n        if (!selection || selection.rangeCount === 0) {\n          return null\n        } else if (dom.isBody(selection.anchorNode)) {\n          // Firefox: returns entire body as range on initialization.\n          // We won't never need it.\n          return null\n        }\n\n        var nativeRng = selection.getRangeAt(0)\n        sc = nativeRng.startContainer\n        so = nativeRng.startOffset\n        ec = nativeRng.endContainer\n        eo = nativeRng.endOffset\n      } else {\n        var textRange = document.selection.createRange()\n        var textRangeEnd = textRange.duplicate()\n        textRangeEnd.collapse(false)\n        var textRangeStart = textRange\n        textRangeStart.collapse(true)\n        var startPoint = textRangeToPoint(textRangeStart, true)\n        var endPoint = textRangeToPoint(textRangeEnd, false) // same visible point case: range was collapsed.\n\n        if (dom.isText(startPoint.node) && dom.isLeftEdgePoint(startPoint) && dom.isTextNode(endPoint.node) && dom.isRightEdgePoint(endPoint) && endPoint.node.nextSibling === startPoint.node) {\n          startPoint = endPoint\n        }\n\n        sc = startPoint.cont\n        so = startPoint.offset\n        ec = endPoint.cont\n        eo = endPoint.offset\n      }\n\n      return new WrappedRange(sc, so, ec, eo)\n    },\n\n    /**\n     * @method\n     *\n     * create WrappedRange from node\n     *\n     * @param {Node} node\n     * @return {WrappedRange}\n     */\n    createFromNode: function (node) {\n      var sc = node\n      var so = 0\n      var ec = node\n      var eo = dom.nodeLength(ec) // browsers can't target a picture or void node\n\n      if (dom.isVoid(sc)) {\n        so = dom.listPrev(sc).length - 1\n        sc = sc.parentNode\n      }\n\n      if (dom.isBR(ec)) {\n        eo = dom.listPrev(ec).length - 1\n        ec = ec.parentNode\n      } else if (dom.isVoid(ec)) {\n        eo = dom.listPrev(ec).length\n        ec = ec.parentNode\n      }\n\n      return this.create(sc, so, ec, eo)\n    },\n\n    /**\n     * create WrappedRange from node after position\n     *\n     * @param {Node} node\n     * @return {WrappedRange}\n     */\n    createFromNodeBefore: function (node) {\n      return this.createFromNode(node).collapse(true)\n    },\n\n    /**\n     * create WrappedRange from node after position\n     *\n     * @param {Node} node\n     * @return {WrappedRange}\n     */\n    createFromNodeAfter: function (node) {\n      return this.createFromNode(node).collapse()\n    },\n\n    /**\n     * @method\n     *\n     * create WrappedRange from bookmark\n     *\n     * @param {Node} editable\n     * @param {Object} bookmark\n     * @return {WrappedRange}\n     */\n    createFromBookmark: function (editable, bookmark) {\n      var sc = dom.fromOffsetPath(editable, bookmark.s.path)\n      var so = bookmark.s.offset\n      var ec = dom.fromOffsetPath(editable, bookmark.e.path)\n      var eo = bookmark.e.offset\n      return new WrappedRange(sc, so, ec, eo)\n    },\n\n    /**\n     * @method\n     *\n     * create WrappedRange from paraBookmark\n     *\n     * @param {Object} bookmark\n     * @param {Node[]} paras\n     * @return {WrappedRange}\n     */\n    createFromParaBookmark: function (bookmark, paras) {\n      var so = bookmark.s.offset\n      var eo = bookmark.e.offset\n      var sc = dom.fromOffsetPath(lists.head(paras), bookmark.s.path)\n      var ec = dom.fromOffsetPath(lists.last(paras), bookmark.e.path)\n      return new WrappedRange(sc, so, ec, eo)\n    }\n  }\n  /**\n   * @method readFileAsDataURL\n   *\n   * read contents of file as representing URL\n   *\n   * @param {File} file\n   * @return {Promise} - then: dataUrl\n   */\n\n  function readFileAsDataURL (file) {\n    return $$1.Deferred(function (deferred) {\n      $$1.extend(new FileReader(), {\n        onload: function (e) {\n          var dataURL = e.target.result\n          deferred.resolve(dataURL)\n        },\n        onerror: function (err) {\n          deferred.reject(err)\n        }\n      }).readAsDataURL(file)\n    }).promise()\n  }\n  /**\n   * @method createImage\n   *\n   * create `<image>` from url string\n   *\n   * @param {String} url\n   * @return {Promise} - then: $image\n   */\n\n  function createImage (url) {\n    return $$1.Deferred(function (deferred) {\n      var $img = $$1('<img>')\n      $img.one('load', function () {\n        $img.off('error abort')\n        deferred.resolve($img)\n      }).one('error abort', function () {\n        $img.off('load').detach()\n        deferred.reject($img)\n      }).css({\n        display: 'none'\n      }).appendTo(document.body).attr('src', url)\n    }).promise()\n  }\n\n  var History =\n  /** @class */\n  (function () {\n    function History ($editable) {\n      this.stack = []\n      this.stackOffset = -1\n      this.$editable = $editable\n      this.editable = $editable[0]\n    }\n\n    History.prototype.makeSnapshot = function () {\n      var rng = range.create(this.editable)\n      var emptyBookmark = {\n        s: {\n          path: [],\n          offset: 0\n        },\n        e: {\n          path: [],\n          offset: 0\n        }\n      }\n      return {\n        contents: this.$editable.html(),\n        bookmark: rng ? rng.bookmark(this.editable) : emptyBookmark\n      }\n    }\n\n    History.prototype.applySnapshot = function (snapshot) {\n      if (snapshot.contents !== null) {\n        this.$editable.html(snapshot.contents)\n      }\n\n      if (snapshot.bookmark !== null) {\n        range.createFromBookmark(this.editable, snapshot.bookmark).select()\n      }\n    }\n    /**\n    * @method rewind\n    * Rewinds the history stack back to the first snapshot taken.\n    * Leaves the stack intact, so that \"Redo\" can still be used.\n    */\n\n    History.prototype.rewind = function () {\n      // Create snap shot if not yet recorded\n      if (this.$editable.html() !== this.stack[this.stackOffset].contents) {\n        this.recordUndo()\n      } // Return to the first available snapshot.\n\n      this.stackOffset = 0 // Apply that snapshot.\n\n      this.applySnapshot(this.stack[this.stackOffset])\n    }\n    /**\n    * @method reset\n    * Resets the history stack completely; reverting to an empty editor.\n    */\n\n    History.prototype.reset = function () {\n      // Clear the stack.\n      this.stack = [] // Restore stackOffset to its original value.\n\n      this.stackOffset = -1 // Clear the editable area.\n\n      this.$editable.html('') // Record our first snapshot (of nothing).\n\n      this.recordUndo()\n    }\n    /**\n     * undo\n     */\n\n    History.prototype.undo = function () {\n      // Create snap shot if not yet recorded\n      if (this.$editable.html() !== this.stack[this.stackOffset].contents) {\n        this.recordUndo()\n      }\n\n      if (this.stackOffset > 0) {\n        this.stackOffset--\n        this.applySnapshot(this.stack[this.stackOffset])\n      }\n    }\n    /**\n     * redo\n     */\n\n    History.prototype.redo = function () {\n      if (this.stack.length - 1 > this.stackOffset) {\n        this.stackOffset++\n        this.applySnapshot(this.stack[this.stackOffset])\n      }\n    }\n    /**\n     * recorded undo\n     */\n\n    History.prototype.recordUndo = function () {\n      this.stackOffset++ // Wash out stack after stackOffset\n\n      if (this.stack.length > this.stackOffset) {\n        this.stack = this.stack.slice(0, this.stackOffset)\n      } // Create new snapshot and push it to the end\n\n      this.stack.push(this.makeSnapshot())\n    }\n\n    return History\n  }())\n\n  var Style =\n  /** @class */\n  (function () {\n    function Style () {}\n    /**\n     * @method jQueryCSS\n     *\n     * [workaround] for old jQuery\n     * passing an array of style properties to .css()\n     * will result in an object of property-value pairs.\n     * (compability with version < 1.9)\n     *\n     * @private\n     * @param  {jQuery} $obj\n     * @param  {Array} propertyNames - An array of one or more CSS properties.\n     * @return {Object}\n     */\n\n    Style.prototype.jQueryCSS = function ($obj, propertyNames) {\n      if (env.jqueryVersion < 1.9) {\n        var result_1 = {}\n        $$1.each(propertyNames, function (idx, propertyName) {\n          result_1[propertyName] = $obj.css(propertyName)\n        })\n        return result_1\n      }\n\n      return $obj.css(propertyNames)\n    }\n    /**\n     * returns style object from node\n     *\n     * @param {jQuery} $node\n     * @return {Object}\n     */\n\n    Style.prototype.fromNode = function ($node) {\n      var properties = ['font-family', 'font-size', 'text-align', 'list-style-type', 'line-height']\n      var styleInfo = this.jQueryCSS($node, properties) || {}\n      styleInfo['font-size'] = parseInt(styleInfo['font-size'], 10)\n      return styleInfo\n    }\n    /**\n     * paragraph level style\n     *\n     * @param {WrappedRange} rng\n     * @param {Object} styleInfo\n     */\n\n    Style.prototype.stylePara = function (rng, styleInfo) {\n      $$1.each(rng.nodes(dom.isPara, {\n        includeAncestor: true\n      }), function (idx, para) {\n        $$1(para).css(styleInfo)\n      })\n    }\n    /**\n     * insert and returns styleNodes on range.\n     *\n     * @param {WrappedRange} rng\n     * @param {Object} [options] - options for styleNodes\n     * @param {String} [options.nodeName] - default: `SPAN`\n     * @param {Boolean} [options.expandClosestSibling] - default: `false`\n     * @param {Boolean} [options.onlyPartialContains] - default: `false`\n     * @return {Node[]}\n     */\n\n    Style.prototype.styleNodes = function (rng, options) {\n      rng = rng.splitText()\n      var nodeName = options && options.nodeName || 'SPAN'\n      var expandClosestSibling = !!(options && options.expandClosestSibling)\n      var onlyPartialContains = !!(options && options.onlyPartialContains)\n\n      if (rng.isCollapsed()) {\n        return [rng.insertNode(dom.create(nodeName))]\n      }\n\n      var pred = dom.makePredByNodeName(nodeName)\n      var nodes = rng.nodes(dom.isText, {\n        fullyContains: true\n      }).map(function (text) {\n        return dom.singleChildAncestor(text, pred) || dom.wrap(text, nodeName)\n      })\n\n      if (expandClosestSibling) {\n        if (onlyPartialContains) {\n          var nodesInRange_1 = rng.nodes() // compose with partial contains predication\n\n          pred = func.and(pred, function (node) {\n            return lists.contains(nodesInRange_1, node)\n          })\n        }\n\n        return nodes.map(function (node) {\n          var siblings = dom.withClosestSiblings(node, pred)\n          var head = lists.head(siblings)\n          var tails = lists.tail(siblings)\n          $$1.each(tails, function (idx, elem) {\n            dom.appendChildNodes(head, elem.childNodes)\n            dom.remove(elem)\n          })\n          return lists.head(siblings)\n        })\n      } else {\n        return nodes\n      }\n    }\n    /**\n     * get current style on cursor\n     *\n     * @param {WrappedRange} rng\n     * @return {Object} - object contains style properties.\n     */\n\n    Style.prototype.current = function (rng) {\n      var $cont = $$1(!dom.isElement(rng.sc) ? rng.sc.parentNode : rng.sc)\n      var styleInfo = this.fromNode($cont) // document.queryCommandState for toggle state\n      // [workaround] prevent Firefox nsresult: \"0x80004005 (NS_ERROR_FAILURE)\"\n\n      try {\n        styleInfo = $$1.extend(styleInfo, {\n          'font-bold': document.queryCommandState('bold') ? 'bold' : 'normal',\n          'font-italic': document.queryCommandState('italic') ? 'italic' : 'normal',\n          'font-underline': document.queryCommandState('underline') ? 'underline' : 'normal',\n          'font-subscript': document.queryCommandState('subscript') ? 'subscript' : 'normal',\n          'font-superscript': document.queryCommandState('superscript') ? 'superscript' : 'normal',\n          'font-strikethrough': document.queryCommandState('strikethrough') ? 'strikethrough' : 'normal',\n          'font-family': document.queryCommandValue('fontname') || styleInfo['font-family']\n        })\n      } catch (e) {} // list-style-type to list-style(unordered, ordered)\n\n      if (!rng.isOnList()) {\n        styleInfo['list-style'] = 'none'\n      } else {\n        var orderedTypes = ['circle', 'disc', 'disc-leading-zero', 'square']\n        var isUnordered = $$1.inArray(styleInfo['list-style-type'], orderedTypes) > -1\n        styleInfo['list-style'] = isUnordered ? 'unordered' : 'ordered'\n      }\n\n      var para = dom.ancestor(rng.sc, dom.isPara)\n\n      if (para && para.style['line-height']) {\n        styleInfo['line-height'] = para.style.lineHeight\n      } else {\n        var lineHeight = parseInt(styleInfo['line-height'], 10) / parseInt(styleInfo['font-size'], 10)\n        styleInfo['line-height'] = lineHeight.toFixed(1)\n      }\n\n      styleInfo.anchor = rng.isOnAnchor() && dom.ancestor(rng.sc, dom.isAnchor)\n      styleInfo.ancestors = dom.listAncestor(rng.sc, dom.isEditable)\n      styleInfo.range = rng\n      return styleInfo\n    }\n\n    return Style\n  }())\n\n  var Bullet =\n  /** @class */\n  (function () {\n    function Bullet () {}\n    /**\n     * toggle ordered list\n     */\n\n    Bullet.prototype.insertOrderedList = function (editable) {\n      this.toggleList('OL', editable)\n    }\n    /**\n     * toggle unordered list\n     */\n\n    Bullet.prototype.insertUnorderedList = function (editable) {\n      this.toggleList('UL', editable)\n    }\n    /**\n     * indent\n     */\n\n    Bullet.prototype.indent = function (editable) {\n      var _this = this\n\n      var rng = range.create(editable).wrapBodyInlineWithPara()\n      var paras = rng.nodes(dom.isPara, {\n        includeAncestor: true\n      })\n      var clustereds = lists.clusterBy(paras, func.peq2('parentNode'))\n      $$1.each(clustereds, function (idx, paras) {\n        var head = lists.head(paras)\n\n        if (dom.isLi(head)) {\n          _this.wrapList(paras, head.parentNode.nodeName)\n        } else {\n          $$1.each(paras, function (idx, para) {\n            $$1(para).css('marginLeft', function (idx, val) {\n              return (parseInt(val, 10) || 0) + 25\n            })\n          })\n        }\n      })\n      rng.select()\n    }\n    /**\n     * outdent\n     */\n\n    Bullet.prototype.outdent = function (editable) {\n      var _this = this\n\n      var rng = range.create(editable).wrapBodyInlineWithPara()\n      var paras = rng.nodes(dom.isPara, {\n        includeAncestor: true\n      })\n      var clustereds = lists.clusterBy(paras, func.peq2('parentNode'))\n      $$1.each(clustereds, function (idx, paras) {\n        var head = lists.head(paras)\n\n        if (dom.isLi(head)) {\n          _this.releaseList([paras])\n        } else {\n          $$1.each(paras, function (idx, para) {\n            $$1(para).css('marginLeft', function (idx, val) {\n              val = parseInt(val, 10) || 0\n              return val > 25 ? val - 25 : ''\n            })\n          })\n        }\n      })\n      rng.select()\n    }\n    /**\n     * toggle list\n     *\n     * @param {String} listName - OL or UL\n     */\n\n    Bullet.prototype.toggleList = function (listName, editable) {\n      var _this = this\n\n      var rng = range.create(editable).wrapBodyInlineWithPara()\n      var paras = rng.nodes(dom.isPara, {\n        includeAncestor: true\n      })\n      var bookmark = rng.paraBookmark(paras)\n      var clustereds = lists.clusterBy(paras, func.peq2('parentNode')) // paragraph to list\n\n      if (lists.find(paras, dom.isPurePara)) {\n        var wrappedParas_1 = []\n        $$1.each(clustereds, function (idx, paras) {\n          wrappedParas_1 = wrappedParas_1.concat(_this.wrapList(paras, listName))\n        })\n        paras = wrappedParas_1 // list to paragraph or change list style\n      } else {\n        var diffLists = rng.nodes(dom.isList, {\n          includeAncestor: true\n        }).filter(function (listNode) {\n          return !$$1.nodeName(listNode, listName)\n        })\n\n        if (diffLists.length) {\n          $$1.each(diffLists, function (idx, listNode) {\n            dom.replace(listNode, listName)\n          })\n        } else {\n          paras = this.releaseList(clustereds, true)\n        }\n      }\n\n      range.createFromParaBookmark(bookmark, paras).select()\n    }\n    /**\n     * @param {Node[]} paras\n     * @param {String} listName\n     * @return {Node[]}\n     */\n\n    Bullet.prototype.wrapList = function (paras, listName) {\n      var head = lists.head(paras)\n      var last = lists.last(paras)\n      var prevList = dom.isList(head.previousSibling) && head.previousSibling\n      var nextList = dom.isList(last.nextSibling) && last.nextSibling\n      var listNode = prevList || dom.insertAfter(dom.create(listName || 'UL'), last) // P to LI\n\n      paras = paras.map(function (para) {\n        return dom.isPurePara(para) ? dom.replace(para, 'LI') : para\n      }) // append to list(<ul>, <ol>)\n\n      dom.appendChildNodes(listNode, paras)\n\n      if (nextList) {\n        dom.appendChildNodes(listNode, lists.from(nextList.childNodes))\n        dom.remove(nextList)\n      }\n\n      return paras\n    }\n    /**\n     * @method releaseList\n     *\n     * @param {Array[]} clustereds\n     * @param {Boolean} isEscapseToBody\n     * @return {Node[]}\n     */\n\n    Bullet.prototype.releaseList = function (clustereds, isEscapseToBody) {\n      var releasedParas = []\n      $$1.each(clustereds, function (idx, paras) {\n        var head = lists.head(paras)\n        var last = lists.last(paras)\n        var headList = isEscapseToBody ? dom.lastAncestor(head, dom.isList) : head.parentNode\n        var lastList = headList.childNodes.length > 1 ? dom.splitTree(headList, {\n          node: last.parentNode,\n          offset: dom.position(last) + 1\n        }, {\n          isSkipPaddingBlankHTML: true\n        }) : null\n        var middleList = dom.splitTree(headList, {\n          node: head.parentNode,\n          offset: dom.position(head)\n        }, {\n          isSkipPaddingBlankHTML: true\n        })\n        paras = isEscapseToBody ? dom.listDescendant(middleList, dom.isLi) : lists.from(middleList.childNodes).filter(dom.isLi) // LI to P\n\n        if (isEscapseToBody || !dom.isList(headList.parentNode)) {\n          paras = paras.map(function (para) {\n            return dom.replace(para, 'P')\n          })\n        }\n\n        $$1.each(lists.from(paras).reverse(), function (idx, para) {\n          dom.insertAfter(para, headList)\n        }) // remove empty lists\n\n        var rootLists = lists.compact([headList, middleList, lastList])\n        $$1.each(rootLists, function (idx, rootList) {\n          var listNodes = [rootList].concat(dom.listDescendant(rootList, dom.isList))\n          $$1.each(listNodes.reverse(), function (idx, listNode) {\n            if (!dom.nodeLength(listNode)) {\n              dom.remove(listNode, true)\n            }\n          })\n        })\n        releasedParas = releasedParas.concat(paras)\n      })\n      return releasedParas\n    }\n\n    return Bullet\n  }())\n  /**\n   * @class editing.Typing\n   *\n   * Typing\n   *\n   */\n\n  var Typing =\n  /** @class */\n  (function () {\n    function Typing () {\n      // a Bullet instance to toggle lists off\n      this.bullet = new Bullet()\n    }\n    /**\n     * insert tab\n     *\n     * @param {WrappedRange} rng\n     * @param {Number} tabsize\n     */\n\n    Typing.prototype.insertTab = function (rng, tabsize) {\n      var tab = dom.createText(new Array(tabsize + 1).join(dom.NBSP_CHAR))\n      rng = rng.deleteContents()\n      rng.insertNode(tab, true)\n      rng = range.create(tab, tabsize)\n      rng.select()\n    }\n    /**\n     * insert paragraph\n     */\n\n    Typing.prototype.insertParagraph = function (editable) {\n      var rng = range.create(editable) // deleteContents on range.\n\n      rng = rng.deleteContents() // Wrap range if it needs to be wrapped by paragraph\n\n      rng = rng.wrapBodyInlineWithPara() // finding paragraph\n\n      var splitRoot = dom.ancestor(rng.sc, dom.isPara)\n      var nextPara // on paragraph: split paragraph\n\n      if (splitRoot) {\n        // if it is an empty line with li\n        if (dom.isEmpty(splitRoot) && dom.isLi(splitRoot)) {\n          // toogle UL/OL and escape\n          this.bullet.toggleList(splitRoot.parentNode.nodeName)\n          return // if it is an empty line with para on blockquote\n        } else if (dom.isEmpty(splitRoot) && dom.isPara(splitRoot) && dom.isBlockquote(splitRoot.parentNode)) {\n          // escape blockquote\n          dom.insertAfter(splitRoot, splitRoot.parentNode)\n          nextPara = splitRoot // if new line has content (not a line break)\n        } else {\n          nextPara = dom.splitTree(splitRoot, rng.getStartPoint())\n          var emptyAnchors = dom.listDescendant(splitRoot, dom.isEmptyAnchor)\n          emptyAnchors = emptyAnchors.concat(dom.listDescendant(nextPara, dom.isEmptyAnchor))\n          $$1.each(emptyAnchors, function (idx, anchor) {\n            dom.remove(anchor)\n          }) // replace empty heading, pre or custom-made styleTag with P tag\n\n          if ((dom.isHeading(nextPara) || dom.isPre(nextPara) || dom.isCustomStyleTag(nextPara)) && dom.isEmpty(nextPara)) {\n            nextPara = dom.replace(nextPara, 'p')\n          }\n        } // no paragraph: insert empty paragraph\n      } else {\n        var next = rng.sc.childNodes[rng.so]\n        nextPara = $$1(dom.emptyPara)[0]\n\n        if (next) {\n          rng.sc.insertBefore(nextPara, next)\n        } else {\n          rng.sc.appendChild(nextPara)\n        }\n      }\n\n      range.create(nextPara, 0).normalize().select().scrollIntoView(editable)\n    }\n\n    return Typing\n  }())\n  /**\n   * @class Create a virtual table to create what actions to do in change.\n   * @param {object} startPoint Cell selected to apply change.\n   * @param {enum} where  Where change will be applied Row or Col. Use enum: TableResultAction.where\n   * @param {enum} action Action to be applied. Use enum: TableResultAction.requestAction\n   * @param {object} domTable Dom element of table to make changes.\n   */\n\n  var TableResultAction = function (startPoint, where, action, domTable) {\n    var _startPoint = {\n      'colPos': 0,\n      'rowPos': 0\n    }\n    var _virtualTable = []\n    var _actionCellList = [] /// ///////////////////////////////////////////\n    // Private functions\n    /// ///////////////////////////////////////////\n\n    /**\n     * Set the startPoint of action.\n     */\n\n    function setStartPoint () {\n      if (!startPoint || !startPoint.tagName || startPoint.tagName.toLowerCase() !== 'td' && startPoint.tagName.toLowerCase() !== 'th') {\n        console.error('Impossible to identify start Cell point.', startPoint)\n        return\n      }\n\n      _startPoint.colPos = startPoint.cellIndex\n\n      if (!startPoint.parentElement || !startPoint.parentElement.tagName || startPoint.parentElement.tagName.toLowerCase() !== 'tr') {\n        console.error('Impossible to identify start Row point.', startPoint)\n        return\n      }\n\n      _startPoint.rowPos = startPoint.parentElement.rowIndex\n    }\n    /**\n     * Define virtual table position info object.\n     *\n     * @param {int} rowIndex Index position in line of virtual table.\n     * @param {int} cellIndex Index position in column of virtual table.\n     * @param {object} baseRow Row affected by this position.\n     * @param {object} baseCell Cell affected by this position.\n     * @param {bool} isSpan Inform if it is an span cell/row.\n     */\n\n    function setVirtualTablePosition (rowIndex, cellIndex, baseRow, baseCell, isRowSpan, isColSpan, isVirtualCell) {\n      var objPosition = {\n        'baseRow': baseRow,\n        'baseCell': baseCell,\n        'isRowSpan': isRowSpan,\n        'isColSpan': isColSpan,\n        'isVirtual': isVirtualCell\n      }\n\n      if (!_virtualTable[rowIndex]) {\n        _virtualTable[rowIndex] = []\n      }\n\n      _virtualTable[rowIndex][cellIndex] = objPosition\n    }\n    /**\n     * Create action cell object.\n     *\n     * @param {object} virtualTableCellObj Object of specific position on virtual table.\n     * @param {enum} resultAction Action to be applied in that item.\n     */\n\n    function getActionCell (virtualTableCellObj, resultAction, virtualRowPosition, virtualColPosition) {\n      return {\n        'baseCell': virtualTableCellObj.baseCell,\n        'action': resultAction,\n        'virtualTable': {\n          'rowIndex': virtualRowPosition,\n          'cellIndex': virtualColPosition\n        }\n      }\n    }\n    /**\n     * Recover free index of row to append Cell.\n     *\n     * @param {int} rowIndex Index of row to find free space.\n     * @param {int} cellIndex Index of cell to find free space in table.\n     */\n\n    function recoverCellIndex (rowIndex, cellIndex) {\n      if (!_virtualTable[rowIndex]) {\n        return cellIndex\n      }\n\n      if (!_virtualTable[rowIndex][cellIndex]) {\n        return cellIndex\n      }\n\n      var newCellIndex = cellIndex\n\n      while (_virtualTable[rowIndex][newCellIndex]) {\n        newCellIndex++\n\n        if (!_virtualTable[rowIndex][newCellIndex]) {\n          return newCellIndex\n        }\n      }\n    }\n    /**\n     * Recover info about row and cell and add information to virtual table.\n     *\n     * @param {object} row Row to recover information.\n     * @param {object} cell Cell to recover information.\n     */\n\n    function addCellInfoToVirtual (row, cell) {\n      var cellIndex = recoverCellIndex(row.rowIndex, cell.cellIndex)\n      var cellHasColspan = cell.colSpan > 1\n      var cellHasRowspan = cell.rowSpan > 1\n      var isThisSelectedCell = row.rowIndex === _startPoint.rowPos && cell.cellIndex === _startPoint.colPos\n      setVirtualTablePosition(row.rowIndex, cellIndex, row, cell, cellHasRowspan, cellHasColspan, false) // Add span rows to virtual Table.\n\n      var rowspanNumber = cell.attributes.rowSpan ? parseInt(cell.attributes.rowSpan.value, 10) : 0\n\n      if (rowspanNumber > 1) {\n        for (var rp = 1; rp < rowspanNumber; rp++) {\n          var rowspanIndex = row.rowIndex + rp\n          adjustStartPoint(rowspanIndex, cellIndex, cell, isThisSelectedCell)\n          setVirtualTablePosition(rowspanIndex, cellIndex, row, cell, true, cellHasColspan, true)\n        }\n      } // Add span cols to virtual table.\n\n      var colspanNumber = cell.attributes.colSpan ? parseInt(cell.attributes.colSpan.value, 10) : 0\n\n      if (colspanNumber > 1) {\n        for (var cp = 1; cp < colspanNumber; cp++) {\n          var cellspanIndex = recoverCellIndex(row.rowIndex, cellIndex + cp)\n          adjustStartPoint(row.rowIndex, cellspanIndex, cell, isThisSelectedCell)\n          setVirtualTablePosition(row.rowIndex, cellspanIndex, row, cell, cellHasRowspan, true, true)\n        }\n      }\n    }\n    /**\n     * Process validation and adjust of start point if needed\n     *\n     * @param {int} rowIndex\n     * @param {int} cellIndex\n     * @param {object} cell\n     * @param {bool} isSelectedCell\n     */\n\n    function adjustStartPoint (rowIndex, cellIndex, cell, isSelectedCell) {\n      if (rowIndex === _startPoint.rowPos && _startPoint.colPos >= cell.cellIndex && cell.cellIndex <= cellIndex && !isSelectedCell) {\n        _startPoint.colPos++\n      }\n    }\n    /**\n     * Create virtual table of cells with all cells, including span cells.\n     */\n\n    function createVirtualTable () {\n      var rows = domTable.rows\n\n      for (var rowIndex = 0; rowIndex < rows.length; rowIndex++) {\n        var cells = rows[rowIndex].cells\n\n        for (var cellIndex = 0; cellIndex < cells.length; cellIndex++) {\n          addCellInfoToVirtual(rows[rowIndex], cells[cellIndex])\n        }\n      }\n    }\n    /**\n     * Get action to be applied on the cell.\n     *\n     * @param {object} cell virtual table cell to apply action\n     */\n\n    function getDeleteResultActionToCell (cell) {\n      switch (where) {\n        case TableResultAction.where.Column:\n          if (cell.isColSpan) {\n            return TableResultAction.resultAction.SubtractSpanCount\n          }\n\n          break\n\n        case TableResultAction.where.Row:\n          if (!cell.isVirtual && cell.isRowSpan) {\n            return TableResultAction.resultAction.AddCell\n          } else if (cell.isRowSpan) {\n            return TableResultAction.resultAction.SubtractSpanCount\n          }\n\n          break\n      }\n\n      return TableResultAction.resultAction.RemoveCell\n    }\n    /**\n     * Get action to be applied on the cell.\n     *\n     * @param {object} cell virtual table cell to apply action\n     */\n\n    function getAddResultActionToCell (cell) {\n      switch (where) {\n        case TableResultAction.where.Column:\n          if (cell.isColSpan) {\n            return TableResultAction.resultAction.SumSpanCount\n          } else if (cell.isRowSpan && cell.isVirtual) {\n            return TableResultAction.resultAction.Ignore\n          }\n\n          break\n\n        case TableResultAction.where.Row:\n          if (cell.isRowSpan) {\n            return TableResultAction.resultAction.SumSpanCount\n          } else if (cell.isColSpan && cell.isVirtual) {\n            return TableResultAction.resultAction.Ignore\n          }\n\n          break\n      }\n\n      return TableResultAction.resultAction.AddCell\n    }\n\n    function init () {\n      setStartPoint()\n      createVirtualTable()\n    } /// ///////////////////////////////////////////\n    // Public functions\n    /// ///////////////////////////////////////////\n\n    /**\n     * Recover array os what to do in table.\n     */\n\n    this.getActionList = function () {\n      var fixedRow = where === TableResultAction.where.Row ? _startPoint.rowPos : -1\n      var fixedCol = where === TableResultAction.where.Column ? _startPoint.colPos : -1\n      var actualPosition = 0\n      var canContinue = true\n\n      while (canContinue) {\n        var rowPosition = fixedRow >= 0 ? fixedRow : actualPosition\n        var colPosition = fixedCol >= 0 ? fixedCol : actualPosition\n        var row = _virtualTable[rowPosition]\n\n        if (!row) {\n          canContinue = false\n          return _actionCellList\n        }\n\n        var cell = row[colPosition]\n\n        if (!cell) {\n          canContinue = false\n          return _actionCellList\n        } // Define action to be applied in this cell\n\n        var resultAction = TableResultAction.resultAction.Ignore\n\n        switch (action) {\n          case TableResultAction.requestAction.Add:\n            resultAction = getAddResultActionToCell(cell)\n            break\n\n          case TableResultAction.requestAction.Delete:\n            resultAction = getDeleteResultActionToCell(cell)\n            break\n        }\n\n        _actionCellList.push(getActionCell(cell, resultAction, rowPosition, colPosition))\n\n        actualPosition++\n      }\n\n      return _actionCellList\n    }\n\n    init()\n  }\n  /**\n  *\n  * Where action occours enum.\n  */\n\n  TableResultAction.where = {\n    'Row': 0,\n    'Column': 1\n  }\n  /**\n  *\n  * Requested action to apply enum.\n  */\n\n  TableResultAction.requestAction = {\n    'Add': 0,\n    'Delete': 1\n  }\n  /**\n  *\n  * Result action to be executed enum.\n  */\n\n  TableResultAction.resultAction = {\n    'Ignore': 0,\n    'SubtractSpanCount': 1,\n    'RemoveCell': 2,\n    'AddCell': 3,\n    'SumSpanCount': 4\n  }\n  /**\n   *\n   * @class editing.Table\n   *\n   * Table\n   *\n   */\n\n  var Table =\n  /** @class */\n  (function () {\n    function Table () {}\n    /**\n     * handle tab key\n     *\n     * @param {WrappedRange} rng\n     * @param {Boolean} isShift\n     */\n\n    Table.prototype.tab = function (rng, isShift) {\n      var cell = dom.ancestor(rng.commonAncestor(), dom.isCell)\n      var table = dom.ancestor(cell, dom.isTable)\n      var cells = dom.listDescendant(table, dom.isCell)\n      var nextCell = lists[isShift ? 'prev' : 'next'](cells, cell)\n\n      if (nextCell) {\n        range.create(nextCell, 0).select()\n      }\n    }\n    /**\n     * Add a new row\n     *\n     * @param {WrappedRange} rng\n     * @param {String} position (top/bottom)\n     * @return {Node}\n     */\n\n    Table.prototype.addRow = function (rng, position) {\n      var cell = dom.ancestor(rng.commonAncestor(), dom.isCell)\n      var currentTr = $$1(cell).closest('tr')\n      var trAttributes = this.recoverAttributes(currentTr)\n      var html = $$1('<tr' + trAttributes + '></tr>')\n      var vTable = new TableResultAction(cell, TableResultAction.where.Row, TableResultAction.requestAction.Add, $$1(currentTr).closest('table')[0])\n      var actions = vTable.getActionList()\n\n      for (var idCell = 0; idCell < actions.length; idCell++) {\n        var currentCell = actions[idCell]\n        var tdAttributes = this.recoverAttributes(currentCell.baseCell)\n\n        switch (currentCell.action) {\n          case TableResultAction.resultAction.AddCell:\n            html.append('<td' + tdAttributes + '>' + dom.blank + '</td>')\n            break\n\n          case TableResultAction.resultAction.SumSpanCount:\n            if (position === 'top') {\n              var baseCellTr = currentCell.baseCell.parent\n              var isTopFromRowSpan = (!baseCellTr ? 0 : currentCell.baseCell.closest('tr').rowIndex) <= currentTr[0].rowIndex\n\n              if (isTopFromRowSpan) {\n                var newTd = $$1('<div></div>').append($$1('<td' + tdAttributes + '>' + dom.blank + '</td>').removeAttr('rowspan')).html()\n                html.append(newTd)\n                break\n              }\n            }\n\n            var rowspanNumber = parseInt(currentCell.baseCell.rowSpan, 10)\n            rowspanNumber++\n            currentCell.baseCell.setAttribute('rowSpan', rowspanNumber)\n            break\n        }\n      }\n\n      if (position === 'top') {\n        currentTr.before(html)\n      } else {\n        var cellHasRowspan = cell.rowSpan > 1\n\n        if (cellHasRowspan) {\n          var lastTrIndex = currentTr[0].rowIndex + (cell.rowSpan - 2)\n          $$1($$1(currentTr).parent().find('tr')[lastTrIndex]).after($$1(html))\n          return\n        }\n\n        currentTr.after(html)\n      }\n    }\n    /**\n     * Add a new col\n     *\n     * @param {WrappedRange} rng\n     * @param {String} position (left/right)\n     * @return {Node}\n     */\n\n    Table.prototype.addCol = function (rng, position) {\n      var cell = dom.ancestor(rng.commonAncestor(), dom.isCell)\n      var row = $$1(cell).closest('tr')\n      var rowsGroup = $$1(row).siblings()\n      rowsGroup.push(row)\n      var vTable = new TableResultAction(cell, TableResultAction.where.Column, TableResultAction.requestAction.Add, $$1(row).closest('table')[0])\n      var actions = vTable.getActionList()\n\n      for (var actionIndex = 0; actionIndex < actions.length; actionIndex++) {\n        var currentCell = actions[actionIndex]\n        var tdAttributes = this.recoverAttributes(currentCell.baseCell)\n\n        switch (currentCell.action) {\n          case TableResultAction.resultAction.AddCell:\n            if (position === 'right') {\n              $$1(currentCell.baseCell).after('<td' + tdAttributes + '>' + dom.blank + '</td>')\n            } else {\n              $$1(currentCell.baseCell).before('<td' + tdAttributes + '>' + dom.blank + '</td>')\n            }\n\n            break\n\n          case TableResultAction.resultAction.SumSpanCount:\n            if (position === 'right') {\n              var colspanNumber = parseInt(currentCell.baseCell.colSpan, 10)\n              colspanNumber++\n              currentCell.baseCell.setAttribute('colSpan', colspanNumber)\n            } else {\n              $$1(currentCell.baseCell).before('<td' + tdAttributes + '>' + dom.blank + '</td>')\n            }\n\n            break\n        }\n      }\n    }\n    /*\n    * Copy attributes from element.\n    *\n    * @param {object} Element to recover attributes.\n    * @return {string} Copied string elements.\n    */\n\n    Table.prototype.recoverAttributes = function (el) {\n      var resultStr = ''\n\n      if (!el) {\n        return resultStr\n      }\n\n      var attrList = el.attributes || []\n\n      for (var i = 0; i < attrList.length; i++) {\n        if (attrList[i].name.toLowerCase() === 'id') {\n          continue\n        }\n\n        if (attrList[i].specified) {\n          resultStr += ' ' + attrList[i].name + '=\\'' + attrList[i].value + '\\''\n        }\n      }\n\n      return resultStr\n    }\n    /**\n     * Delete current row\n     *\n     * @param {WrappedRange} rng\n     * @return {Node}\n     */\n\n    Table.prototype.deleteRow = function (rng) {\n      var cell = dom.ancestor(rng.commonAncestor(), dom.isCell)\n      var row = $$1(cell).closest('tr')\n      var cellPos = row.children('td, th').index($$1(cell))\n      var rowPos = row[0].rowIndex\n      var vTable = new TableResultAction(cell, TableResultAction.where.Row, TableResultAction.requestAction.Delete, $$1(row).closest('table')[0])\n      var actions = vTable.getActionList()\n\n      for (var actionIndex = 0; actionIndex < actions.length; actionIndex++) {\n        if (!actions[actionIndex]) {\n          continue\n        }\n\n        var baseCell = actions[actionIndex].baseCell\n        var virtualPosition = actions[actionIndex].virtualTable\n        var hasRowspan = baseCell.rowSpan && baseCell.rowSpan > 1\n        var rowspanNumber = hasRowspan ? parseInt(baseCell.rowSpan, 10) : 0\n\n        switch (actions[actionIndex].action) {\n          case TableResultAction.resultAction.Ignore:\n            continue\n\n          case TableResultAction.resultAction.AddCell:\n            var nextRow = row.next('tr')[0]\n\n            if (!nextRow) {\n              continue\n            }\n\n            var cloneRow = row[0].cells[cellPos]\n\n            if (hasRowspan) {\n              if (rowspanNumber > 2) {\n                rowspanNumber--\n                nextRow.insertBefore(cloneRow, nextRow.cells[cellPos])\n                nextRow.cells[cellPos].setAttribute('rowSpan', rowspanNumber)\n                nextRow.cells[cellPos].innerHTML = ''\n              } else if (rowspanNumber === 2) {\n                nextRow.insertBefore(cloneRow, nextRow.cells[cellPos])\n                nextRow.cells[cellPos].removeAttribute('rowSpan')\n                nextRow.cells[cellPos].innerHTML = ''\n              }\n            }\n\n            continue\n\n          case TableResultAction.resultAction.SubtractSpanCount:\n            if (hasRowspan) {\n              if (rowspanNumber > 2) {\n                rowspanNumber--\n                baseCell.setAttribute('rowSpan', rowspanNumber)\n\n                if (virtualPosition.rowIndex !== rowPos && baseCell.cellIndex === cellPos) {\n                  baseCell.innerHTML = ''\n                }\n              } else if (rowspanNumber === 2) {\n                baseCell.removeAttribute('rowSpan')\n\n                if (virtualPosition.rowIndex !== rowPos && baseCell.cellIndex === cellPos) {\n                  baseCell.innerHTML = ''\n                }\n              }\n            }\n\n            continue\n\n          case TableResultAction.resultAction.RemoveCell:\n            // Do not need remove cell because row will be deleted.\n            continue\n        }\n      }\n\n      row.remove()\n    }\n    /**\n     * Delete current col\n     *\n     * @param {WrappedRange} rng\n     * @return {Node}\n     */\n\n    Table.prototype.deleteCol = function (rng) {\n      var cell = dom.ancestor(rng.commonAncestor(), dom.isCell)\n      var row = $$1(cell).closest('tr')\n      var cellPos = row.children('td, th').index($$1(cell))\n      var vTable = new TableResultAction(cell, TableResultAction.where.Column, TableResultAction.requestAction.Delete, $$1(row).closest('table')[0])\n      var actions = vTable.getActionList()\n\n      for (var actionIndex = 0; actionIndex < actions.length; actionIndex++) {\n        if (!actions[actionIndex]) {\n          continue\n        }\n\n        switch (actions[actionIndex].action) {\n          case TableResultAction.resultAction.Ignore:\n            continue\n\n          case TableResultAction.resultAction.SubtractSpanCount:\n            var baseCell = actions[actionIndex].baseCell\n            var hasColspan = baseCell.colSpan && baseCell.colSpan > 1\n\n            if (hasColspan) {\n              var colspanNumber = baseCell.colSpan ? parseInt(baseCell.colSpan, 10) : 0\n\n              if (colspanNumber > 2) {\n                colspanNumber--\n                baseCell.setAttribute('colSpan', colspanNumber)\n\n                if (baseCell.cellIndex === cellPos) {\n                  baseCell.innerHTML = ''\n                }\n              } else if (colspanNumber === 2) {\n                baseCell.removeAttribute('colSpan')\n\n                if (baseCell.cellIndex === cellPos) {\n                  baseCell.innerHTML = ''\n                }\n              }\n            }\n\n            continue\n\n          case TableResultAction.resultAction.RemoveCell:\n            dom.remove(actions[actionIndex].baseCell, true)\n            continue\n        }\n      }\n    }\n    /**\n     * create empty table element\n     *\n     * @param {Number} rowCount\n     * @param {Number} colCount\n     * @return {Node}\n     */\n\n    Table.prototype.createTable = function (colCount, rowCount, options) {\n      var tds = []\n      var tdHTML\n\n      for (var idxCol = 0; idxCol < colCount; idxCol++) {\n        tds.push('<td>' + dom.blank + '</td>')\n      }\n\n      tdHTML = tds.join('')\n      var trs = []\n      var trHTML\n\n      for (var idxRow = 0; idxRow < rowCount; idxRow++) {\n        trs.push('<tr>' + tdHTML + '</tr>')\n      }\n\n      trHTML = trs.join('')\n      var $table = $$1('<table>' + trHTML + '</table>')\n\n      if (options && options.tableClassName) {\n        $table.addClass(options.tableClassName)\n      }\n\n      return $table[0]\n    }\n    /**\n     * Delete current table\n     *\n     * @param {WrappedRange} rng\n     * @return {Node}\n     */\n\n    Table.prototype.deleteTable = function (rng) {\n      var cell = dom.ancestor(rng.commonAncestor(), dom.isCell)\n      $$1(cell).closest('table').remove()\n    }\n\n    return Table\n  }())\n\n  var KEY_BOGUS = 'bogus'\n  /**\n   * @class Editor\n   */\n\n  var Editor =\n  /** @class */\n  (function () {\n    function Editor (context) {\n      var _this = this\n\n      this.context = context\n      this.$note = context.layoutInfo.note\n      this.$editor = context.layoutInfo.editor\n      this.$editable = context.layoutInfo.editable\n      this.options = context.options\n      this.lang = this.options.langInfo\n      this.editable = this.$editable[0]\n      this.lastRange = null\n      this.style = new Style()\n      this.table = new Table()\n      this.typing = new Typing()\n      this.bullet = new Bullet()\n      this.history = new History(this.$editable)\n      this.context.memo('help.undo', this.lang.help.undo)\n      this.context.memo('help.redo', this.lang.help.redo)\n      this.context.memo('help.tab', this.lang.help.tab)\n      this.context.memo('help.untab', this.lang.help.untab)\n      this.context.memo('help.insertParagraph', this.lang.help.insertParagraph)\n      this.context.memo('help.insertOrderedList', this.lang.help.insertOrderedList)\n      this.context.memo('help.insertUnorderedList', this.lang.help.insertUnorderedList)\n      this.context.memo('help.indent', this.lang.help.indent)\n      this.context.memo('help.outdent', this.lang.help.outdent)\n      this.context.memo('help.formatPara', this.lang.help.formatPara)\n      this.context.memo('help.insertHorizontalRule', this.lang.help.insertHorizontalRule)\n      this.context.memo('help.fontName', this.lang.help.fontName) // native commands(with execCommand), generate function for execCommand\n\n      var commands = ['bold', 'italic', 'underline', 'strikethrough', 'superscript', 'subscript', 'justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull', 'formatBlock', 'removeFormat', 'backColor']\n\n      for (var idx = 0, len = commands.length; idx < len; idx++) {\n        this[commands[idx]] = (function (sCmd) {\n          return function (value) {\n            _this.beforeCommand()\n\n            document.execCommand(sCmd, false, value)\n\n            _this.afterCommand(true)\n          }\n        }(commands[idx]))\n\n        this.context.memo('help.' + commands[idx], this.lang.help[commands[idx]])\n      }\n\n      this.fontName = this.wrapCommand(function (value) {\n        return _this.fontStyling('font-family', \"\\'\" + value + \"\\'\")\n      })\n      this.fontSize = this.wrapCommand(function (value) {\n        return _this.fontStyling('font-size', value + 'px')\n      })\n\n      for (var idx = 1; idx <= 6; idx++) {\n        this['formatH' + idx] = (function (idx) {\n          return function () {\n            _this.formatBlock('H' + idx)\n          }\n        }(idx))\n\n        this.context.memo('help.formatH' + idx, this.lang.help['formatH' + idx])\n      }\n\n      this.insertParagraph = this.wrapCommand(function () {\n        _this.typing.insertParagraph(_this.editable)\n      })\n      this.insertOrderedList = this.wrapCommand(function () {\n        _this.bullet.insertOrderedList(_this.editable)\n      })\n      this.insertUnorderedList = this.wrapCommand(function () {\n        _this.bullet.insertUnorderedList(_this.editable)\n      })\n      this.indent = this.wrapCommand(function () {\n        _this.bullet.indent(_this.editable)\n      })\n      this.outdent = this.wrapCommand(function () {\n        _this.bullet.outdent(_this.editable)\n      })\n      /**\n       * insertNode\n       * insert node\n       * @param {Node} node\n       */\n\n      this.insertNode = this.wrapCommand(function (node) {\n        if (_this.isLimited($$1(node).text().length)) {\n          return\n        }\n\n        var rng = _this.createRange()\n\n        rng.insertNode(node)\n        range.createFromNodeAfter(node).select()\n      })\n      /**\n       * insert text\n       * @param {String} text\n       */\n\n      this.insertText = this.wrapCommand(function (text) {\n        if (_this.isLimited(text.length)) {\n          return\n        }\n\n        var rng = _this.createRange()\n\n        var textNode = rng.insertNode(dom.createText(text))\n        range.create(textNode, dom.nodeLength(textNode)).select()\n      })\n      /**\n       * paste HTML\n       * @param {String} markup\n       */\n\n      this.pasteHTML = this.wrapCommand(function (markup) {\n        if (_this.isLimited(markup.length)) {\n          return\n        }\n\n        var contents = _this.createRange().pasteHTML(markup)\n\n        range.createFromNodeAfter(lists.last(contents)).select()\n      })\n      /**\n       * formatBlock\n       *\n       * @param {String} tagName\n       */\n\n      this.formatBlock = this.wrapCommand(function (tagName, $target) {\n        var onApplyCustomStyle = _this.options.callbacks.onApplyCustomStyle\n\n        if (onApplyCustomStyle) {\n          onApplyCustomStyle.call(_this, $target, _this.context, _this.onFormatBlock)\n        } else {\n          _this.onFormatBlock(tagName, $target)\n        }\n      })\n      /**\n       * insert horizontal rule\n       */\n\n      this.insertHorizontalRule = this.wrapCommand(function () {\n        var hrNode = _this.createRange().insertNode(dom.create('HR'))\n\n        if (hrNode.nextSibling) {\n          range.create(hrNode.nextSibling, 0).normalize().select()\n        }\n      })\n      /**\n       * lineHeight\n       * @param {String} value\n       */\n\n      this.lineHeight = this.wrapCommand(function (value) {\n        _this.style.stylePara(_this.createRange(), {\n          lineHeight: value\n        })\n      })\n      /**\n       * create link (command)\n       *\n       * @param {Object} linkInfo\n       */\n\n      this.createLink = this.wrapCommand(function (linkInfo) {\n        var linkUrl = linkInfo.url\n        var linkText = linkInfo.text\n        var isNewWindow = linkInfo.isNewWindow\n\n        var rng = linkInfo.range || _this.createRange()\n\n        var isTextChanged = rng.toString() !== linkText // handle spaced urls from input\n\n        if (typeof linkUrl === 'string') {\n          linkUrl = linkUrl.trim()\n        }\n\n        if (_this.options.onCreateLink) {\n          linkUrl = _this.options.onCreateLink(linkUrl)\n        } else {\n          // if url doesn't match an URL schema, set http:// as default\n          linkUrl = /^[A-Za-z][A-Za-z0-9+-.]*\\:[\\/\\/]?/.test(linkUrl) ? linkUrl : 'http://' + linkUrl\n        }\n\n        var anchors = []\n\n        if (isTextChanged) {\n          rng = rng.deleteContents()\n          var anchor = rng.insertNode($$1('<A>' + linkText + '</A>')[0])\n          anchors.push(anchor)\n        } else {\n          anchors = _this.style.styleNodes(rng, {\n            nodeName: 'A',\n            expandClosestSibling: true,\n            onlyPartialContains: true\n          })\n        }\n\n        $$1.each(anchors, function (idx, anchor) {\n          $$1(anchor).attr('href', linkUrl)\n\n          if (isNewWindow) {\n            $$1(anchor).attr('target', '_blank')\n          } else {\n            $$1(anchor).removeAttr('target')\n          }\n        })\n        var startRange = range.createFromNodeBefore(lists.head(anchors))\n        var startPoint = startRange.getStartPoint()\n        var endRange = range.createFromNodeAfter(lists.last(anchors))\n        var endPoint = endRange.getEndPoint()\n        range.create(startPoint.node, startPoint.offset, endPoint.node, endPoint.offset).select()\n      })\n      /**\n       * setting color\n       *\n       * @param {Object} sObjColor  color code\n       * @param {String} sObjColor.foreColor foreground color\n       * @param {String} sObjColor.backColor background color\n       */\n\n      this.color = this.wrapCommand(function (colorInfo) {\n        var foreColor = colorInfo.foreColor\n        var backColor = colorInfo.backColor\n\n        if (foreColor) {\n          document.execCommand('foreColor', false, foreColor)\n        }\n\n        if (backColor) {\n          document.execCommand('backColor', false, backColor)\n        }\n      })\n      /**\n       * Set foreground color\n       *\n       * @param {String} colorCode foreground color code\n       */\n\n      this.foreColor = this.wrapCommand(function (colorInfo) {\n        document.execCommand('styleWithCSS', false, true)\n        document.execCommand('foreColor', false, colorInfo)\n      })\n      /**\n       * insert Table\n       *\n       * @param {String} dimension of table (ex : \"5x5\")\n       */\n\n      this.insertTable = this.wrapCommand(function (dim) {\n        var dimension = dim.split('x')\n\n        var rng = _this.createRange().deleteContents()\n\n        rng.insertNode(_this.table.createTable(dimension[0], dimension[1], _this.options))\n      })\n      /**\n       * remove media object and Figure Elements if media object is img with Figure.\n       */\n\n      this.removeMedia = this.wrapCommand(function () {\n        var $target = $$1(_this.restoreTarget()).parent()\n\n        if ($target.parent('figure').length) {\n          $target.parent('figure').remove()\n        } else {\n          $target = $$1(_this.restoreTarget()).detach()\n        }\n\n        _this.context.triggerEvent('media.delete', $target, _this.$editable)\n      })\n      /**\n       * float me\n       *\n       * @param {String} value\n       */\n\n      this.floatMe = this.wrapCommand(function (value) {\n        var $target = $$1(_this.restoreTarget())\n        $target.toggleClass('note-float-left', value === 'left')\n        $target.toggleClass('note-float-right', value === 'right')\n        $target.css('float', value)\n      })\n      /**\n       * resize overlay element\n       * @param {String} value\n       */\n\n      this.resize = this.wrapCommand(function (value) {\n        var $target = $$1(_this.restoreTarget())\n        $target.css({\n          width: value * 100 + '%',\n          height: ''\n        })\n      })\n    }\n\n    Editor.prototype.initialize = function () {\n      var _this = this // bind custom events\n\n      this.$editable.on('keydown', function (event) {\n        if (event.keyCode === key.code.ENTER) {\n          _this.context.triggerEvent('enter', event)\n        }\n\n        _this.context.triggerEvent('keydown', event)\n\n        if (!event.isDefaultPrevented()) {\n          if (_this.options.shortcuts) {\n            _this.handleKeyMap(event)\n          } else {\n            _this.preventDefaultEditableShortCuts(event)\n          }\n        }\n\n        if (_this.isLimited(1, event)) {\n          return false\n        }\n      }).on('keyup', function (event) {\n        _this.context.triggerEvent('keyup', event)\n      }).on('focus', function (event) {\n        _this.context.triggerEvent('focus', event)\n      }).on('blur', function (event) {\n        _this.context.triggerEvent('blur', event)\n      }).on('mousedown', function (event) {\n        _this.context.triggerEvent('mousedown', event)\n      }).on('mouseup', function (event) {\n        _this.context.triggerEvent('mouseup', event)\n      }).on('scroll', function (event) {\n        _this.context.triggerEvent('scroll', event)\n      }).on('paste', function (event) {\n        _this.context.triggerEvent('paste', event)\n      }) // init content before set event\n\n      this.$editable.html(dom.html(this.$note) || dom.emptyPara)\n      this.$editable.on(env.inputEventName, func.debounce(function () {\n        _this.context.triggerEvent('change', _this.$editable.html())\n      }, 100))\n      this.$editor.on('focusin', function (event) {\n        _this.context.triggerEvent('focusin', event)\n      }).on('focusout', function (event) {\n        _this.context.triggerEvent('focusout', event)\n      })\n\n      if (!this.options.airMode) {\n        if (this.options.width) {\n          this.$editor.outerWidth(this.options.width)\n        }\n\n        if (this.options.height) {\n          this.$editable.outerHeight(this.options.height)\n        }\n\n        if (this.options.maxHeight) {\n          this.$editable.css('max-height', this.options.maxHeight)\n        }\n\n        if (this.options.minHeight) {\n          this.$editable.css('min-height', this.options.minHeight)\n        }\n      }\n\n      this.history.recordUndo()\n    }\n\n    Editor.prototype.destroy = function () {\n      this.$editable.off()\n    }\n\n    Editor.prototype.handleKeyMap = function (event) {\n      var keyMap = this.options.keyMap[env.isMac ? 'mac' : 'pc']\n      var keys = []\n\n      if (event.metaKey) {\n        keys.push('CMD')\n      }\n\n      if (event.ctrlKey && !event.altKey) {\n        keys.push('CTRL')\n      }\n\n      if (event.shiftKey) {\n        keys.push('SHIFT')\n      }\n\n      var keyName = key.nameFromCode[event.keyCode]\n\n      if (keyName) {\n        keys.push(keyName)\n      }\n\n      var eventName = keyMap[keys.join('+')]\n\n      if (eventName) {\n        if (this.context.invoke(eventName) !== false) {\n          event.preventDefault()\n        }\n      } else if (key.isEdit(event.keyCode)) {\n        this.afterCommand()\n      }\n    }\n\n    Editor.prototype.preventDefaultEditableShortCuts = function (event) {\n      // B(Bold, 66) / I(Italic, 73) / U(Underline, 85)\n      if ((event.ctrlKey || event.metaKey) && lists.contains([66, 73, 85], event.keyCode)) {\n        event.preventDefault()\n      }\n    }\n\n    Editor.prototype.isLimited = function (pad, event) {\n      pad = pad || 0\n\n      if (typeof event !== 'undefined') {\n        if (key.isMove(event.keyCode) || event.ctrlKey || event.metaKey || lists.contains([key.code.BACKSPACE, key.code.DELETE], event.keyCode)) {\n          return false\n        }\n      }\n\n      if (this.options.maxTextLength > 0) {\n        if (this.$editable.text().length + pad >= this.options.maxTextLength) {\n          return true\n        }\n      }\n\n      return false\n    }\n    /**\n     * create range\n     * @return {WrappedRange}\n     */\n\n    Editor.prototype.createRange = function () {\n      this.focus()\n      return range.create(this.editable)\n    }\n    /**\n     * saveRange\n     *\n     * save current range\n     *\n     * @param {Boolean} [thenCollapse=false]\n     */\n\n    Editor.prototype.saveRange = function (thenCollapse) {\n      this.lastRange = this.createRange()\n\n      if (thenCollapse) {\n        this.lastRange.collapse().select()\n      }\n    }\n    /**\n     * restoreRange\n     *\n     * restore lately range\n     */\n\n    Editor.prototype.restoreRange = function () {\n      if (this.lastRange) {\n        this.lastRange.select()\n        this.focus()\n      }\n    }\n\n    Editor.prototype.saveTarget = function (node) {\n      this.$editable.data('target', node)\n    }\n\n    Editor.prototype.clearTarget = function () {\n      this.$editable.removeData('target')\n    }\n\n    Editor.prototype.restoreTarget = function () {\n      return this.$editable.data('target')\n    }\n    /**\n     * currentStyle\n     *\n     * current style\n     * @return {Object|Boolean} unfocus\n     */\n\n    Editor.prototype.currentStyle = function () {\n      var rng = range.create()\n\n      if (rng) {\n        rng = rng.normalize()\n      }\n\n      return rng ? this.style.current(rng) : this.style.fromNode(this.$editable)\n    }\n    /**\n     * style from node\n     *\n     * @param {jQuery} $node\n     * @return {Object}\n     */\n\n    Editor.prototype.styleFromNode = function ($node) {\n      return this.style.fromNode($node)\n    }\n    /**\n     * undo\n     */\n\n    Editor.prototype.undo = function () {\n      this.context.triggerEvent('before.command', this.$editable.html())\n      this.history.undo()\n      this.context.triggerEvent('change', this.$editable.html())\n    }\n    /**\n     * redo\n     */\n\n    Editor.prototype.redo = function () {\n      this.context.triggerEvent('before.command', this.$editable.html())\n      this.history.redo()\n      this.context.triggerEvent('change', this.$editable.html())\n    }\n    /**\n     * before command\n     */\n\n    Editor.prototype.beforeCommand = function () {\n      this.context.triggerEvent('before.command', this.$editable.html()) // keep focus on editable before command execution\n\n      this.focus()\n    }\n    /**\n     * after command\n     * @param {Boolean} isPreventTrigger\n     */\n\n    Editor.prototype.afterCommand = function (isPreventTrigger) {\n      this.normalizeContent()\n      this.history.recordUndo()\n\n      if (!isPreventTrigger) {\n        this.context.triggerEvent('change', this.$editable.html())\n      }\n    }\n    /**\n     * handle tab key\n     */\n\n    Editor.prototype.tab = function () {\n      var rng = this.createRange()\n\n      if (rng.isCollapsed() && rng.isOnCell()) {\n        this.table.tab(rng)\n      } else {\n        if (this.options.tabSize === 0) {\n          return false\n        }\n\n        if (!this.isLimited(this.options.tabSize)) {\n          this.beforeCommand()\n          this.typing.insertTab(rng, this.options.tabSize)\n          this.afterCommand()\n        }\n      }\n    }\n    /**\n     * handle shift+tab key\n     */\n\n    Editor.prototype.untab = function () {\n      var rng = this.createRange()\n\n      if (rng.isCollapsed() && rng.isOnCell()) {\n        this.table.tab(rng, true)\n      } else {\n        if (this.options.tabSize === 0) {\n          return false\n        }\n      }\n    }\n    /**\n     * run given function between beforeCommand and afterCommand\n     */\n\n    Editor.prototype.wrapCommand = function (fn) {\n      var _this = this\n\n      return function () {\n        _this.beforeCommand()\n\n        fn.apply(_this, arguments)\n\n        _this.afterCommand()\n      }\n    }\n    /**\n     * insert image\n     *\n     * @param {String} src\n     * @param {String|Function} param\n     * @return {Promise}\n     */\n\n    Editor.prototype.insertImage = function (src, param) {\n      var _this = this\n\n      return createImage(src, param).then(function ($image) {\n        _this.beforeCommand()\n\n        if (typeof param === 'function') {\n          param($image)\n        } else {\n          if (typeof param === 'string') {\n            $image.attr('data-filename', param)\n          }\n\n          $image.css('width', Math.min(_this.$editable.width(), $image.width()))\n        }\n\n        $image.show()\n        range.create(_this.editable).insertNode($image[0])\n        range.createFromNodeAfter($image[0]).select()\n\n        _this.afterCommand()\n      }).fail(function (e) {\n        _this.context.triggerEvent('image.upload.error', e)\n      })\n    }\n    /**\n     * insertImages\n     * @param {File[]} files\n     */\n\n    Editor.prototype.insertImages = function (files) {\n      var _this = this\n\n      $$1.each(files, function (idx, file) {\n        var filename = file.name\n\n        if (_this.options.maximumImageFileSize && _this.options.maximumImageFileSize < file.size) {\n          _this.context.triggerEvent('image.upload.error', _this.lang.image.maximumFileSizeError)\n        } else {\n          readFileAsDataURL(file).then(function (dataURL) {\n            return _this.insertImage(dataURL, filename)\n          }).fail(function () {\n            _this.context.triggerEvent('image.upload.error')\n          })\n        }\n      })\n    }\n    /**\n     * insertImagesOrCallback\n     * @param {File[]} files\n     */\n\n    Editor.prototype.insertImagesOrCallback = function (files) {\n      var callbacks = this.options.callbacks // If onImageUpload this.options setted\n\n      if (callbacks.onImageUpload) {\n        this.context.triggerEvent('image.upload', files) // else insert Image as dataURL\n      } else {\n        this.insertImages(files)\n      }\n    }\n    /**\n     * return selected plain text\n     * @return {String} text\n     */\n\n    Editor.prototype.getSelectedText = function () {\n      var rng = this.createRange() // if range on anchor, expand range with anchor\n\n      if (rng.isOnAnchor()) {\n        rng = range.createFromNode(dom.ancestor(rng.sc, dom.isAnchor))\n      }\n\n      return rng.toString()\n    }\n\n    Editor.prototype.onFormatBlock = function (tagName, $target) {\n      // [workaround] for MSIE, IE need `<`\n      tagName = env.isMSIE ? '<' + tagName + '>' : tagName\n      document.execCommand('FormatBlock', false, tagName) // support custom class\n\n      if ($target && $target.length) {\n        var className = $target[0].className || ''\n\n        if (className) {\n          var currentRange = this.createRange()\n          var $parent = $$1([currentRange.sc, currentRange.ec]).closest(tagName)\n          $parent.addClass(className)\n        }\n      }\n    }\n\n    Editor.prototype.formatPara = function () {\n      this.formatBlock('P')\n    }\n\n    Editor.prototype.fontStyling = function (target, value) {\n      var rng = this.createRange()\n\n      if (rng) {\n        var spans = this.style.styleNodes(rng)\n        $$1(spans).css(target, value) // [workaround] added styled bogus span for style\n        //  - also bogus character needed for cursor position\n\n        if (rng.isCollapsed()) {\n          var firstSpan = lists.head(spans)\n\n          if (firstSpan && !dom.nodeLength(firstSpan)) {\n            firstSpan.innerHTML = dom.ZERO_WIDTH_NBSP_CHAR\n            range.createFromNodeAfter(firstSpan.firstChild).select()\n            this.$editable.data(KEY_BOGUS, firstSpan)\n          }\n        }\n      }\n    }\n    /**\n     * unlink\n     *\n     * @type command\n     */\n\n    Editor.prototype.unlink = function () {\n      var rng = this.createRange()\n\n      if (rng.isOnAnchor()) {\n        var anchor = dom.ancestor(rng.sc, dom.isAnchor)\n        rng = range.createFromNode(anchor)\n        rng.select()\n        this.beforeCommand()\n        document.execCommand('unlink')\n        this.afterCommand()\n      }\n    }\n    /**\n     * returns link info\n     *\n     * @return {Object}\n     * @return {WrappedRange} return.range\n     * @return {String} return.text\n     * @return {Boolean} [return.isNewWindow=true]\n     * @return {String} [return.url=\"\"]\n     */\n\n    Editor.prototype.getLinkInfo = function () {\n      var rng = this.createRange().expand(dom.isAnchor) // Get the first anchor on range(for edit).\n\n      var $anchor = $$1(lists.head(rng.nodes(dom.isAnchor)))\n      var linkInfo = {\n        range: rng,\n        text: rng.toString(),\n        url: $anchor.length ? $anchor.attr('href') : ''\n      } // Define isNewWindow when anchor exists.\n\n      if ($anchor.length) {\n        linkInfo.isNewWindow = $anchor.attr('target') === '_blank'\n      }\n\n      return linkInfo\n    }\n\n    Editor.prototype.addRow = function (position) {\n      var rng = this.createRange(this.$editable)\n\n      if (rng.isCollapsed() && rng.isOnCell()) {\n        this.beforeCommand()\n        this.table.addRow(rng, position)\n        this.afterCommand()\n      }\n    }\n\n    Editor.prototype.addCol = function (position) {\n      var rng = this.createRange(this.$editable)\n\n      if (rng.isCollapsed() && rng.isOnCell()) {\n        this.beforeCommand()\n        this.table.addCol(rng, position)\n        this.afterCommand()\n      }\n    }\n\n    Editor.prototype.deleteRow = function () {\n      var rng = this.createRange(this.$editable)\n\n      if (rng.isCollapsed() && rng.isOnCell()) {\n        this.beforeCommand()\n        this.table.deleteRow(rng)\n        this.afterCommand()\n      }\n    }\n\n    Editor.prototype.deleteCol = function () {\n      var rng = this.createRange(this.$editable)\n\n      if (rng.isCollapsed() && rng.isOnCell()) {\n        this.beforeCommand()\n        this.table.deleteCol(rng)\n        this.afterCommand()\n      }\n    }\n\n    Editor.prototype.deleteTable = function () {\n      var rng = this.createRange(this.$editable)\n\n      if (rng.isCollapsed() && rng.isOnCell()) {\n        this.beforeCommand()\n        this.table.deleteTable(rng)\n        this.afterCommand()\n      }\n    }\n    /**\n     * @param {Position} pos\n     * @param {jQuery} $target - target element\n     * @param {Boolean} [bKeepRatio] - keep ratio\n     */\n\n    Editor.prototype.resizeTo = function (pos, $target, bKeepRatio) {\n      var imageSize\n\n      if (bKeepRatio) {\n        var newRatio = pos.y / pos.x\n        var ratio = $target.data('ratio')\n        imageSize = {\n          width: ratio > newRatio ? pos.x : pos.y / ratio,\n          height: ratio > newRatio ? pos.x * ratio : pos.y\n        }\n      } else {\n        imageSize = {\n          width: pos.x,\n          height: pos.y\n        }\n      }\n\n      $target.css(imageSize)\n    }\n    /**\n     * returns whether editable area has focus or not.\n     */\n\n    Editor.prototype.hasFocus = function () {\n      return this.$editable.is(':focus')\n    }\n    /**\n     * set focus\n     */\n\n    Editor.prototype.focus = function () {\n      // [workaround] Screen will move when page is scolled in IE.\n      //  - do focus when not focused\n      if (!this.hasFocus()) {\n        this.$editable.focus()\n      }\n    }\n    /**\n     * returns whether contents is empty or not.\n     * @return {Boolean}\n     */\n\n    Editor.prototype.isEmpty = function () {\n      return dom.isEmpty(this.$editable[0]) || dom.emptyPara === this.$editable.html()\n    }\n    /**\n     * Removes all contents and restores the editable instance to an _emptyPara_.\n     */\n\n    Editor.prototype.empty = function () {\n      this.context.invoke('code', dom.emptyPara)\n    }\n    /**\n     * normalize content\n     */\n\n    Editor.prototype.normalizeContent = function () {\n      this.$editable[0].normalize()\n    }\n\n    return Editor\n  }())\n\n  var Clipboard =\n  /** @class */\n  (function () {\n    function Clipboard (context) {\n      this.context = context\n      this.$editable = context.layoutInfo.editable\n    }\n\n    Clipboard.prototype.initialize = function () {\n      this.$editable.on('paste', this.pasteByEvent.bind(this))\n    }\n    /**\n     * paste by clipboard event\n     *\n     * @param {Event} event\n     */\n\n    Clipboard.prototype.pasteByEvent = function (event) {\n      var clipboardData = event.originalEvent.clipboardData\n\n      if (clipboardData && clipboardData.items && clipboardData.items.length) {\n        var item = lists.head(clipboardData.items)\n\n        if (item.kind === 'file' && item.type.indexOf('image/') !== -1) {\n          this.context.invoke('editor.insertImagesOrCallback', [item.getAsFile()])\n        }\n\n        this.context.invoke('editor.afterCommand')\n      }\n    }\n\n    return Clipboard\n  }())\n\n  var Dropzone =\n  /** @class */\n  (function () {\n    function Dropzone (context) {\n      this.context = context\n      this.$eventListener = $$1(document)\n      this.$editor = context.layoutInfo.editor\n      this.$editable = context.layoutInfo.editable\n      this.options = context.options\n      this.lang = this.options.langInfo\n      this.documentEventHandlers = {}\n      this.$dropzone = $$1(['<div class=\"note-dropzone\">', '  <div class=\"note-dropzone-message\"/>', '</div>'].join('')).prependTo(this.$editor)\n    }\n    /**\n     * attach Drag and Drop Events\n     */\n\n    Dropzone.prototype.initialize = function () {\n      if (this.options.disableDragAndDrop) {\n        // prevent default drop event\n        this.documentEventHandlers.onDrop = function (e) {\n          e.preventDefault()\n        } // do not consider outside of dropzone\n\n        this.$eventListener = this.$dropzone\n        this.$eventListener.on('drop', this.documentEventHandlers.onDrop)\n      } else {\n        this.attachDragAndDropEvent()\n      }\n    }\n    /**\n     * attach Drag and Drop Events\n     */\n\n    Dropzone.prototype.attachDragAndDropEvent = function () {\n      var _this = this\n\n      var collection = $$1()\n      var $dropzoneMessage = this.$dropzone.find('.note-dropzone-message')\n\n      this.documentEventHandlers.onDragenter = function (e) {\n        var isCodeview = _this.context.invoke('codeview.isActivated')\n\n        var hasEditorSize = _this.$editor.width() > 0 && _this.$editor.height() > 0\n\n        if (!isCodeview && !collection.length && hasEditorSize) {\n          _this.$editor.addClass('dragover')\n\n          _this.$dropzone.width(_this.$editor.width())\n\n          _this.$dropzone.height(_this.$editor.height())\n\n          $dropzoneMessage.text(_this.lang.image.dragImageHere)\n        }\n\n        collection = collection.add(e.target)\n      }\n\n      this.documentEventHandlers.onDragleave = function (e) {\n        collection = collection.not(e.target)\n\n        if (!collection.length) {\n          _this.$editor.removeClass('dragover')\n        }\n      }\n\n      this.documentEventHandlers.onDrop = function () {\n        collection = $$1()\n\n        _this.$editor.removeClass('dragover')\n      } // show dropzone on dragenter when dragging a object to document\n      // -but only if the editor is visible, i.e. has a positive width and height\n\n      this.$eventListener.on('dragenter', this.documentEventHandlers.onDragenter).on('dragleave', this.documentEventHandlers.onDragleave).on('drop', this.documentEventHandlers.onDrop) // change dropzone's message on hover.\n\n      this.$dropzone.on('dragenter', function () {\n        _this.$dropzone.addClass('hover')\n\n        $dropzoneMessage.text(_this.lang.image.dropImage)\n      }).on('dragleave', function () {\n        _this.$dropzone.removeClass('hover')\n\n        $dropzoneMessage.text(_this.lang.image.dragImageHere)\n      }) // attach dropImage\n\n      this.$dropzone.on('drop', function (event) {\n        var dataTransfer = event.originalEvent.dataTransfer // stop the browser from opening the dropped content\n\n        event.preventDefault()\n\n        if (dataTransfer && dataTransfer.files && dataTransfer.files.length) {\n          _this.$editable.focus()\n\n          _this.context.invoke('editor.insertImagesOrCallback', dataTransfer.files)\n        } else {\n          $$1.each(dataTransfer.types, function (idx, type) {\n            var content = dataTransfer.getData(type)\n\n            if (type.toLowerCase().indexOf('text') > -1) {\n              _this.context.invoke('editor.pasteHTML', content)\n            } else {\n              $$1(content).each(function (idx, item) {\n                _this.context.invoke('editor.insertNode', item)\n              })\n            }\n          })\n        }\n      }).on('dragover', false) // prevent default dragover event\n    }\n\n    Dropzone.prototype.destroy = function () {\n      var _this = this\n\n      Object.keys(this.documentEventHandlers).forEach(function (key) {\n        _this.$eventListener.off(key.substr(2).toLowerCase(), _this.documentEventHandlers[key])\n      })\n      this.documentEventHandlers = {}\n    }\n\n    return Dropzone\n  }())\n\n  var CodeMirror\n\n  if (env.hasCodeMirror) {\n    if (env.isSupportAmd) {\n      require(['codemirror'], function (cm) {\n        CodeMirror = cm\n      })\n    } else {\n      CodeMirror = window.CodeMirror\n    }\n  }\n  /**\n   * @class Codeview\n   */\n\n  var CodeView =\n  /** @class */\n  (function () {\n    function CodeView (context) {\n      this.context = context\n      this.$editor = context.layoutInfo.editor\n      this.$editable = context.layoutInfo.editable\n      this.$codable = context.layoutInfo.codable\n      this.options = context.options\n    }\n\n    CodeView.prototype.sync = function () {\n      var isCodeview = this.isActivated()\n\n      if (isCodeview && env.hasCodeMirror) {\n        this.$codable.data('cmEditor').save()\n      }\n    }\n    /**\n     * @return {Boolean}\n     */\n\n    CodeView.prototype.isActivated = function () {\n      return this.$editor.hasClass('codeview')\n    }\n    /**\n     * toggle codeview\n     */\n\n    CodeView.prototype.toggle = function () {\n      if (this.isActivated()) {\n        this.deactivate()\n      } else {\n        this.activate()\n      }\n\n      this.context.triggerEvent('codeview.toggled')\n    }\n    /**\n     * activate code view\n     */\n\n    CodeView.prototype.activate = function () {\n      var _this = this\n\n      this.$codable.val(dom.html(this.$editable, this.options.prettifyHtml))\n      this.$codable.height(this.$editable.height())\n      this.context.invoke('toolbar.updateCodeview', true)\n      this.$editor.addClass('codeview')\n      this.$codable.focus() // activate CodeMirror as codable\n\n      if (env.hasCodeMirror) {\n        var cmEditor_1 = CodeMirror.fromTextArea(this.$codable[0], this.options.codemirror) // CodeMirror TernServer\n\n        if (this.options.codemirror.tern) {\n          var server_1 = new CodeMirror.TernServer(this.options.codemirror.tern)\n          cmEditor_1.ternServer = server_1\n          cmEditor_1.on('cursorActivity', function (cm) {\n            server_1.updateArgHints(cm)\n          })\n        }\n\n        cmEditor_1.on('blur', function (event) {\n          _this.context.triggerEvent('blur.codeview', cmEditor_1.getValue(), event)\n        }) // CodeMirror hasn't Padding.\n\n        cmEditor_1.setSize(null, this.$editable.outerHeight())\n        this.$codable.data('cmEditor', cmEditor_1)\n      } else {\n        this.$codable.on('blur', function (event) {\n          _this.context.triggerEvent('blur.codeview', _this.$codable.val(), event)\n        })\n      }\n    }\n    /**\n     * deactivate code view\n     */\n\n    CodeView.prototype.deactivate = function () {\n      // deactivate CodeMirror as codable\n      if (env.hasCodeMirror) {\n        var cmEditor = this.$codable.data('cmEditor')\n        this.$codable.val(cmEditor.getValue())\n        cmEditor.toTextArea()\n      }\n\n      var value = dom.value(this.$codable, this.options.prettifyHtml) || dom.emptyPara\n      var isChange = this.$editable.html() !== value\n      this.$editable.html(value)\n      this.$editable.height(this.options.height ? this.$codable.height() : 'auto')\n      this.$editor.removeClass('codeview')\n\n      if (isChange) {\n        this.context.triggerEvent('change', this.$editable.html(), this.$editable)\n      }\n\n      this.$editable.focus()\n      this.context.invoke('toolbar.updateCodeview', false)\n    }\n\n    CodeView.prototype.destroy = function () {\n      if (this.isActivated()) {\n        this.deactivate()\n      }\n    }\n\n    return CodeView\n  }())\n\n  var EDITABLE_PADDING = 24\n\n  var Statusbar =\n  /** @class */\n  (function () {\n    function Statusbar (context) {\n      this.$document = $$1(document)\n      this.$statusbar = context.layoutInfo.statusbar\n      this.$editable = context.layoutInfo.editable\n      this.options = context.options\n    }\n\n    Statusbar.prototype.initialize = function () {\n      var _this = this\n\n      if (this.options.airMode || this.options.disableResizeEditor) {\n        this.destroy()\n        return\n      }\n\n      this.$statusbar.on('mousedown', function (event) {\n        event.preventDefault()\n        event.stopPropagation()\n\n        var editableTop = _this.$editable.offset().top - _this.$document.scrollTop()\n\n        var onMouseMove = function (event) {\n          var height = event.clientY - (editableTop + EDITABLE_PADDING)\n          height = _this.options.minheight > 0 ? Math.max(height, _this.options.minheight) : height\n          height = _this.options.maxHeight > 0 ? Math.min(height, _this.options.maxHeight) : height\n\n          _this.$editable.height(height)\n        }\n\n        _this.$document.on('mousemove', onMouseMove).one('mouseup', function () {\n          _this.$document.off('mousemove', onMouseMove)\n        })\n      })\n    }\n\n    Statusbar.prototype.destroy = function () {\n      this.$statusbar.off()\n      this.$statusbar.addClass('locked')\n    }\n\n    return Statusbar\n  }())\n\n  var Fullscreen =\n  /** @class */\n  (function () {\n    function Fullscreen (context) {\n      var _this = this\n\n      this.context = context\n      this.$editor = context.layoutInfo.editor\n      this.$toolbar = context.layoutInfo.toolbar\n      this.$editable = context.layoutInfo.editable\n      this.$codable = context.layoutInfo.codable\n      this.$window = $$1(window)\n      this.$scrollbar = $$1('html, body')\n\n      this.onResize = function () {\n        _this.resizeTo({\n          h: _this.$window.height() - _this.$toolbar.outerHeight()\n        })\n      }\n    }\n\n    Fullscreen.prototype.resizeTo = function (size) {\n      this.$editable.css('height', size.h)\n      this.$codable.css('height', size.h)\n\n      if (this.$codable.data('cmeditor')) {\n        this.$codable.data('cmeditor').setsize(null, size.h)\n      }\n    }\n    /**\n     * toggle fullscreen\n     */\n\n    Fullscreen.prototype.toggle = function () {\n      this.$editor.toggleClass('fullscreen')\n\n      if (this.isFullscreen()) {\n        this.$editable.data('orgHeight', this.$editable.css('height'))\n        this.$window.on('resize', this.onResize).trigger('resize')\n        this.$scrollbar.css('overflow', 'hidden')\n      } else {\n        this.$window.off('resize', this.onResize)\n        this.resizeTo({\n          h: this.$editable.data('orgHeight')\n        })\n        this.$scrollbar.css('overflow', 'visible')\n      }\n\n      this.context.invoke('toolbar.updateFullscreen', this.isFullscreen())\n    }\n\n    Fullscreen.prototype.isFullscreen = function () {\n      return this.$editor.hasClass('fullscreen')\n    }\n\n    return Fullscreen\n  }())\n\n  var Handle =\n  /** @class */\n  (function () {\n    function Handle (context) {\n      var _this = this\n\n      this.context = context\n      this.$document = $$1(document)\n      this.$editingArea = context.layoutInfo.editingArea\n      this.options = context.options\n      this.lang = this.options.langInfo\n      this.events = {\n        'summernote.mousedown': function (we, e) {\n          if (_this.update(e.target)) {\n            e.preventDefault()\n          }\n        },\n        'summernote.keyup summernote.scroll summernote.change summernote.dialog.shown': function () {\n          _this.update()\n        },\n        'summernote.disable': function () {\n          _this.hide()\n        },\n        'summernote.codeview.toggled': function () {\n          _this.update()\n        }\n      }\n    }\n\n    Handle.prototype.initialize = function () {\n      var _this = this\n\n      this.$handle = $$1(['<div class=\"note-handle\">', '<div class=\"note-control-selection\">', '<div class=\"note-control-selection-bg\"></div>', '<div class=\"note-control-holder note-control-nw\"></div>', '<div class=\"note-control-holder note-control-ne\"></div>', '<div class=\"note-control-holder note-control-sw\"></div>', '<div class=\"', this.options.disableResizeImage ? 'note-control-holder' : 'note-control-sizing', ' note-control-se\"></div>', this.options.disableResizeImage ? '' : '<div class=\"note-control-selection-info\"></div>', '</div>', '</div>'].join('')).prependTo(this.$editingArea)\n      this.$handle.on('mousedown', function (event) {\n        if (dom.isControlSizing(event.target)) {\n          event.preventDefault()\n          event.stopPropagation()\n\n          var $target_1 = _this.$handle.find('.note-control-selection').data('target')\n\n          var posStart_1 = $target_1.offset()\n\n          var scrollTop_1 = _this.$document.scrollTop()\n\n          var onMouseMove_1 = function (event) {\n            _this.context.invoke('editor.resizeTo', {\n              x: event.clientX - posStart_1.left,\n              y: event.clientY - (posStart_1.top - scrollTop_1)\n            }, $target_1, !event.shiftKey)\n\n            _this.update($target_1[0])\n          }\n\n          _this.$document.on('mousemove', onMouseMove_1).one('mouseup', function (e) {\n            e.preventDefault()\n\n            _this.$document.off('mousemove', onMouseMove_1)\n\n            _this.context.invoke('editor.afterCommand')\n          })\n\n          if (!$target_1.data('ratio')) {\n            $target_1.data('ratio', $target_1.height() / $target_1.width())\n          }\n        }\n      }) // Listen for scrolling on the handle overlay.\n\n      this.$handle.on('wheel', function (e) {\n        e.preventDefault()\n\n        _this.update()\n      })\n    }\n\n    Handle.prototype.destroy = function () {\n      this.$handle.remove()\n    }\n\n    Handle.prototype.update = function (target) {\n      if (this.context.isDisabled()) {\n        return false\n      }\n\n      var isImage = dom.isImg(target)\n      var $selection = this.$handle.find('.note-control-selection')\n      this.context.invoke('imagePopover.update', target)\n\n      if (isImage) {\n        var $image = $$1(target)\n        var position = $image.position()\n        var pos = {\n          left: position.left + parseInt($image.css('marginLeft'), 10),\n          top: position.top + parseInt($image.css('marginTop'), 10)\n        } // exclude margin\n\n        var imageSize = {\n          w: $image.outerWidth(false),\n          h: $image.outerHeight(false)\n        }\n        $selection.css({\n          display: 'block',\n          left: pos.left,\n          top: pos.top,\n          width: imageSize.w,\n          height: imageSize.h\n        }).data('target', $image) // save current image element.\n\n        var origImageObj = new Image()\n        origImageObj.src = $image.attr('src')\n        var sizingText = imageSize.w + 'x' + imageSize.h + ' (' + this.lang.image.original + ': ' + origImageObj.width + 'x' + origImageObj.height + ')'\n        $selection.find('.note-control-selection-info').text(sizingText)\n        this.context.invoke('editor.saveTarget', target)\n      } else {\n        this.hide()\n      }\n\n      return isImage\n    }\n    /**\n     * hide\n     *\n     * @param {jQuery} $handle\n     */\n\n    Handle.prototype.hide = function () {\n      this.context.invoke('editor.clearTarget')\n      this.$handle.children().hide()\n    }\n\n    return Handle\n  }())\n\n  var defaultScheme = 'http://'\n  var linkPattern = /^([A-Za-z][A-Za-z0-9+-.]*\\:[\\/\\/]?|mailto:[A-Z0-9._%+-]+@)?(www\\.)?(.+)$/i\n\n  var AutoLink =\n  /** @class */\n  (function () {\n    function AutoLink (context) {\n      var _this = this\n\n      this.context = context\n      this.events = {\n        'summernote.keyup': function (we, e) {\n          if (!e.isDefaultPrevented()) {\n            _this.handleKeyup(e)\n          }\n        },\n        'summernote.keydown': function (we, e) {\n          _this.handleKeydown(e)\n        }\n      }\n    }\n\n    AutoLink.prototype.initialize = function () {\n      this.lastWordRange = null\n    }\n\n    AutoLink.prototype.destroy = function () {\n      this.lastWordRange = null\n    }\n\n    AutoLink.prototype.replace = function () {\n      if (!this.lastWordRange) {\n        return\n      }\n\n      var keyword = this.lastWordRange.toString()\n      var match = keyword.match(linkPattern)\n\n      if (match && (match[1] || match[2])) {\n        var link = match[1] ? keyword : defaultScheme + keyword\n        var node = $$1('<a />').html(keyword).attr('href', link)[0]\n        this.lastWordRange.insertNode(node)\n        this.lastWordRange = null\n        this.context.invoke('editor.focus')\n      }\n    }\n\n    AutoLink.prototype.handleKeydown = function (e) {\n      if (lists.contains([key.code.ENTER, key.code.SPACE], e.keyCode)) {\n        var wordRange = this.context.invoke('editor.createRange').getWordRange()\n        this.lastWordRange = wordRange\n      }\n    }\n\n    AutoLink.prototype.handleKeyup = function (e) {\n      if (lists.contains([key.code.ENTER, key.code.SPACE], e.keyCode)) {\n        this.replace()\n      }\n    }\n\n    return AutoLink\n  }())\n  /**\n   * textarea auto sync.\n   */\n\n  var AutoSync =\n  /** @class */\n  (function () {\n    function AutoSync (context) {\n      var _this = this\n\n      this.$note = context.layoutInfo.note\n      this.events = {\n        'summernote.change': function () {\n          _this.$note.val(context.invoke('code'))\n        }\n      }\n    }\n\n    AutoSync.prototype.shouldInitialize = function () {\n      return dom.isTextarea(this.$note[0])\n    }\n\n    return AutoSync\n  }())\n\n  var Placeholder =\n  /** @class */\n  (function () {\n    function Placeholder (context) {\n      var _this = this\n\n      this.context = context\n      this.$editingArea = context.layoutInfo.editingArea\n      this.options = context.options\n      this.events = {\n        'summernote.init summernote.change': function () {\n          _this.update()\n        },\n        'summernote.codeview.toggled': function () {\n          _this.update()\n        }\n      }\n    }\n\n    Placeholder.prototype.shouldInitialize = function () {\n      return !!this.options.placeholder\n    }\n\n    Placeholder.prototype.initialize = function () {\n      var _this = this\n\n      this.$placeholder = $$1('<div class=\"note-placeholder\">')\n      this.$placeholder.on('click', function () {\n        _this.context.invoke('focus')\n      }).text(this.options.placeholder).prependTo(this.$editingArea)\n      this.update()\n    }\n\n    Placeholder.prototype.destroy = function () {\n      this.$placeholder.remove()\n    }\n\n    Placeholder.prototype.update = function () {\n      var isShow = !this.context.invoke('codeview.isActivated') && this.context.invoke('editor.isEmpty')\n      this.$placeholder.toggle(isShow)\n    }\n\n    return Placeholder\n  }())\n\n  var Buttons =\n  /** @class */\n  (function () {\n    function Buttons (context) {\n      this.ui = $$1.summernote.ui\n      this.context = context\n      this.$toolbar = context.layoutInfo.toolbar\n      this.options = context.options\n      this.lang = this.options.langInfo\n      this.invertedKeyMap = func.invertObject(this.options.keyMap[env.isMac ? 'mac' : 'pc'])\n    }\n\n    Buttons.prototype.representShortcut = function (editorMethod) {\n      var shortcut = this.invertedKeyMap[editorMethod]\n\n      if (!this.options.shortcuts || !shortcut) {\n        return ''\n      }\n\n      if (env.isMac) {\n        shortcut = shortcut.replace('CMD', '⌘').replace('SHIFT', '⇧')\n      }\n\n      shortcut = shortcut.replace('BACKSLASH', '\\\\').replace('SLASH', '/').replace('LEFTBRACKET', '[').replace('RIGHTBRACKET', ']')\n      return ' (' + shortcut + ')'\n    }\n\n    Buttons.prototype.button = function (o) {\n      if (!this.options.tooltip && o.tooltip) {\n        delete o.tooltip\n      }\n\n      o.container = this.options.container\n      return this.ui.button(o)\n    }\n\n    Buttons.prototype.initialize = function () {\n      this.addToolbarButtons()\n      this.addImagePopoverButtons()\n      this.addLinkPopoverButtons()\n      this.addTablePopoverButtons()\n      this.fontInstalledMap = {}\n    }\n\n    Buttons.prototype.destroy = function () {\n      delete this.fontInstalledMap\n    }\n\n    Buttons.prototype.isFontInstalled = function (name) {\n      if (!this.fontInstalledMap.hasOwnProperty(name)) {\n        this.fontInstalledMap[name] = env.isFontInstalled(name) || lists.contains(this.options.fontNamesIgnoreCheck, name)\n      }\n\n      return this.fontInstalledMap[name]\n    }\n\n    Buttons.prototype.isFontDeservedToAdd = function (name) {\n      var genericFamilies = ['sans-serif', 'serif', 'monospace', 'cursive', 'fantasy']\n      name = name.toLowerCase()\n      return name !== '' && this.isFontInstalled(name) && $$1.inArray(name, genericFamilies) === -1\n    }\n\n    Buttons.prototype.addToolbarButtons = function () {\n      var _this = this\n\n      this.context.memo('button.style', function () {\n        return _this.ui.buttonGroup([_this.button({\n          className: 'dropdown-toggle',\n          contents: _this.ui.dropdownButtonContents(_this.ui.icon(_this.options.icons.magic), _this.options),\n          tooltip: _this.lang.style.style,\n          data: {\n            toggle: 'dropdown'\n          }\n        }), _this.ui.dropdown({\n          className: 'dropdown-style',\n          items: _this.options.styleTags,\n          title: _this.lang.style.style,\n          template: function (item) {\n            if (typeof item === 'string') {\n              item = {\n                tag: item,\n                title: _this.lang.style.hasOwnProperty(item) ? _this.lang.style[item] : item\n              }\n            }\n\n            var tag = item.tag\n            var title = item.title\n            var style = item.style ? ' style=\"' + item.style + '\" ' : ''\n            var className = item.className ? ' class=\"' + item.className + '\"' : ''\n            return '<' + tag + style + className + '>' + title + '</' + tag + '>'\n          },\n          click: _this.context.createInvokeHandler('editor.formatBlock')\n        })]).render()\n      })\n\n      var _loop_1 = function (styleIdx, styleLen) {\n        var item = this_1.options.styleTags[styleIdx]\n        this_1.context.memo('button.style.' + item, function () {\n          return _this.button({\n            className: 'note-btn-style-' + item,\n            contents: '<div data-value=\"' + item + '\">' + item.toUpperCase() + '</div>',\n            tooltip: _this.lang.style[item],\n            click: _this.context.createInvokeHandler('editor.formatBlock')\n          }).render()\n        })\n      }\n\n      var this_1 = this\n\n      for (var styleIdx = 0, styleLen = this.options.styleTags.length; styleIdx < styleLen; styleIdx++) {\n        _loop_1(styleIdx, styleLen)\n      }\n\n      this.context.memo('button.bold', function () {\n        return _this.button({\n          className: 'note-btn-bold',\n          contents: _this.ui.icon(_this.options.icons.bold),\n          tooltip: _this.lang.font.bold + _this.representShortcut('bold'),\n          click: _this.context.createInvokeHandlerAndUpdateState('editor.bold')\n        }).render()\n      })\n      this.context.memo('button.italic', function () {\n        return _this.button({\n          className: 'note-btn-italic',\n          contents: _this.ui.icon(_this.options.icons.italic),\n          tooltip: _this.lang.font.italic + _this.representShortcut('italic'),\n          click: _this.context.createInvokeHandlerAndUpdateState('editor.italic')\n        }).render()\n      })\n      this.context.memo('button.underline', function () {\n        return _this.button({\n          className: 'note-btn-underline',\n          contents: _this.ui.icon(_this.options.icons.underline),\n          tooltip: _this.lang.font.underline + _this.representShortcut('underline'),\n          click: _this.context.createInvokeHandlerAndUpdateState('editor.underline')\n        }).render()\n      })\n      this.context.memo('button.clear', function () {\n        return _this.button({\n          contents: _this.ui.icon(_this.options.icons.eraser),\n          tooltip: _this.lang.font.clear + _this.representShortcut('removeFormat'),\n          click: _this.context.createInvokeHandler('editor.removeFormat')\n        }).render()\n      })\n      this.context.memo('button.strikethrough', function () {\n        return _this.button({\n          className: 'note-btn-strikethrough',\n          contents: _this.ui.icon(_this.options.icons.strikethrough),\n          tooltip: _this.lang.font.strikethrough + _this.representShortcut('strikethrough'),\n          click: _this.context.createInvokeHandlerAndUpdateState('editor.strikethrough')\n        }).render()\n      })\n      this.context.memo('button.superscript', function () {\n        return _this.button({\n          className: 'note-btn-superscript',\n          contents: _this.ui.icon(_this.options.icons.superscript),\n          tooltip: _this.lang.font.superscript,\n          click: _this.context.createInvokeHandlerAndUpdateState('editor.superscript')\n        }).render()\n      })\n      this.context.memo('button.subscript', function () {\n        return _this.button({\n          className: 'note-btn-subscript',\n          contents: _this.ui.icon(_this.options.icons.subscript),\n          tooltip: _this.lang.font.subscript,\n          click: _this.context.createInvokeHandlerAndUpdateState('editor.subscript')\n        }).render()\n      })\n      this.context.memo('button.fontname', function () {\n        var styleInfo = _this.context.invoke('editor.currentStyle') // Add 'default' fonts into the fontnames array if not exist\n\n        $$1.each(styleInfo['font-family'].split(','), function (idx, fontname) {\n          fontname = fontname.trim().replace(/['\"]+/g, '')\n\n          if (_this.isFontDeservedToAdd(fontname)) {\n            if ($$1.inArray(fontname, _this.options.fontNames) === -1) {\n              _this.options.fontNames.push(fontname)\n            }\n          }\n        })\n        return _this.ui.buttonGroup([_this.button({\n          className: 'dropdown-toggle',\n          contents: _this.ui.dropdownButtonContents('<span class=\"note-current-fontname\"/>', _this.options),\n          tooltip: _this.lang.font.name,\n          data: {\n            toggle: 'dropdown'\n          }\n        }), _this.ui.dropdownCheck({\n          className: 'dropdown-fontname',\n          checkClassName: _this.options.icons.menuCheck,\n          items: _this.options.fontNames.filter(_this.isFontInstalled.bind(_this)),\n          title: _this.lang.font.name,\n          template: function (item) {\n            return '<span style=\"font-family: \\'' + item + '\\'\">' + item + '</span>'\n          },\n          click: _this.context.createInvokeHandlerAndUpdateState('editor.fontName')\n        })]).render()\n      })\n      this.context.memo('button.fontsize', function () {\n        return _this.ui.buttonGroup([_this.button({\n          className: 'dropdown-toggle',\n          contents: _this.ui.dropdownButtonContents('<span class=\"note-current-fontsize\"/>', _this.options),\n          tooltip: _this.lang.font.size,\n          data: {\n            toggle: 'dropdown'\n          }\n        }), _this.ui.dropdownCheck({\n          className: 'dropdown-fontsize',\n          checkClassName: _this.options.icons.menuCheck,\n          items: _this.options.fontSizes,\n          title: _this.lang.font.size,\n          click: _this.context.createInvokeHandlerAndUpdateState('editor.fontSize')\n        })]).render()\n      })\n      this.context.memo('button.color', function () {\n        return _this.ui.buttonGroup({\n          className: 'note-color',\n          children: [_this.button({\n            className: 'note-current-color-button',\n            contents: _this.ui.icon(_this.options.icons.font + ' note-recent-color'),\n            tooltip: _this.lang.color.recent,\n            click: function (e) {\n              var $button = $$1(e.currentTarget)\n\n              _this.context.invoke('editor.color', {\n                backColor: $button.attr('data-backColor'),\n                foreColor: $button.attr('data-foreColor')\n              })\n            },\n            callback: function ($button) {\n              var $recentColor = $button.find('.note-recent-color')\n              $recentColor.css('background-color', '#FFFF00')\n              $button.attr('data-backColor', '#FFFF00')\n            }\n          }), _this.button({\n            className: 'dropdown-toggle',\n            contents: _this.ui.dropdownButtonContents('', _this.options),\n            tooltip: _this.lang.color.more,\n            data: {\n              toggle: 'dropdown'\n            }\n          }), _this.ui.dropdown({\n            items: ['<div class=\"note-palette\">', '  <div class=\"note-palette-title\">' + _this.lang.color.background + '</div>', '  <div>', '    <button type=\"button\" class=\"note-color-reset btn btn-light\" data-event=\"backColor\" data-value=\"inherit\">', _this.lang.color.transparent, '    </button>', '  </div>', '  <div class=\"note-holder\" data-event=\"backColor\"/>', '</div>', '<div class=\"note-palette\">', '  <div class=\"note-palette-title\">' + _this.lang.color.foreground + '</div>', '  <div>', '    <button type=\"button\" class=\"note-color-reset btn btn-light\" data-event=\"removeFormat\" data-value=\"foreColor\">', _this.lang.color.resetToDefault, '    </button>', '  </div>', '  <div class=\"note-holder\" data-event=\"foreColor\"/>', '</div>'].join(''),\n            callback: function ($dropdown) {\n              $dropdown.find('.note-holder').each(function (idx, item) {\n                var $holder = $$1(item)\n                $holder.append(_this.ui.palette({\n                  colors: _this.options.colors,\n                  colorsName: _this.options.colorsName,\n                  eventName: $holder.data('event'),\n                  container: _this.options.container,\n                  tooltip: _this.options.tooltip\n                }).render())\n              })\n            },\n            click: function (event) {\n              var $button = $$1(event.target)\n              var eventName = $button.data('event')\n              var value = $button.data('value')\n\n              if (eventName && value) {\n                var key = eventName === 'backColor' ? 'background-color' : 'color'\n                var $color = $button.closest('.note-color').find('.note-recent-color')\n                var $currentButton = $button.closest('.note-color').find('.note-current-color-button')\n                $color.css(key, value)\n                $currentButton.attr('data-' + eventName, value)\n\n                _this.context.invoke('editor.' + eventName, value)\n              }\n            }\n          })]\n        }).render()\n      })\n      this.context.memo('button.ul', function () {\n        return _this.button({\n          contents: _this.ui.icon(_this.options.icons.unorderedlist),\n          tooltip: _this.lang.lists.unordered + _this.representShortcut('insertUnorderedList'),\n          click: _this.context.createInvokeHandler('editor.insertUnorderedList')\n        }).render()\n      })\n      this.context.memo('button.ol', function () {\n        return _this.button({\n          contents: _this.ui.icon(_this.options.icons.orderedlist),\n          tooltip: _this.lang.lists.ordered + _this.representShortcut('insertOrderedList'),\n          click: _this.context.createInvokeHandler('editor.insertOrderedList')\n        }).render()\n      })\n      var justifyLeft = this.button({\n        contents: this.ui.icon(this.options.icons.alignLeft),\n        tooltip: this.lang.paragraph.left + this.representShortcut('justifyLeft'),\n        click: this.context.createInvokeHandler('editor.justifyLeft')\n      })\n      var justifyCenter = this.button({\n        contents: this.ui.icon(this.options.icons.alignCenter),\n        tooltip: this.lang.paragraph.center + this.representShortcut('justifyCenter'),\n        click: this.context.createInvokeHandler('editor.justifyCenter')\n      })\n      var justifyRight = this.button({\n        contents: this.ui.icon(this.options.icons.alignRight),\n        tooltip: this.lang.paragraph.right + this.representShortcut('justifyRight'),\n        click: this.context.createInvokeHandler('editor.justifyRight')\n      })\n      var justifyFull = this.button({\n        contents: this.ui.icon(this.options.icons.alignJustify),\n        tooltip: this.lang.paragraph.justify + this.representShortcut('justifyFull'),\n        click: this.context.createInvokeHandler('editor.justifyFull')\n      })\n      var outdent = this.button({\n        contents: this.ui.icon(this.options.icons.outdent),\n        tooltip: this.lang.paragraph.outdent + this.representShortcut('outdent'),\n        click: this.context.createInvokeHandler('editor.outdent')\n      })\n      var indent = this.button({\n        contents: this.ui.icon(this.options.icons.indent),\n        tooltip: this.lang.paragraph.indent + this.representShortcut('indent'),\n        click: this.context.createInvokeHandler('editor.indent')\n      })\n      this.context.memo('button.justifyLeft', func.invoke(justifyLeft, 'render'))\n      this.context.memo('button.justifyCenter', func.invoke(justifyCenter, 'render'))\n      this.context.memo('button.justifyRight', func.invoke(justifyRight, 'render'))\n      this.context.memo('button.justifyFull', func.invoke(justifyFull, 'render'))\n      this.context.memo('button.outdent', func.invoke(outdent, 'render'))\n      this.context.memo('button.indent', func.invoke(indent, 'render'))\n      this.context.memo('button.paragraph', function () {\n        return _this.ui.buttonGroup([_this.button({\n          className: 'dropdown-toggle',\n          contents: _this.ui.dropdownButtonContents(_this.ui.icon(_this.options.icons.alignLeft), _this.options),\n          tooltip: _this.lang.paragraph.paragraph,\n          data: {\n            toggle: 'dropdown'\n          }\n        }), _this.ui.dropdown([_this.ui.buttonGroup({\n          className: 'note-align',\n          children: [justifyLeft, justifyCenter, justifyRight, justifyFull]\n        }), _this.ui.buttonGroup({\n          className: 'note-list',\n          children: [outdent, indent]\n        })])]).render()\n      })\n      this.context.memo('button.height', function () {\n        return _this.ui.buttonGroup([_this.button({\n          className: 'dropdown-toggle',\n          contents: _this.ui.dropdownButtonContents(_this.ui.icon(_this.options.icons.textHeight), _this.options),\n          tooltip: _this.lang.font.height,\n          data: {\n            toggle: 'dropdown'\n          }\n        }), _this.ui.dropdownCheck({\n          items: _this.options.lineHeights,\n          checkClassName: _this.options.icons.menuCheck,\n          className: 'dropdown-line-height',\n          title: _this.lang.font.height,\n          click: _this.context.createInvokeHandler('editor.lineHeight')\n        })]).render()\n      })\n      this.context.memo('button.table', function () {\n        return _this.ui.buttonGroup([_this.button({\n          className: 'dropdown-toggle',\n          contents: _this.ui.dropdownButtonContents(_this.ui.icon(_this.options.icons.table), _this.options),\n          tooltip: _this.lang.table.table,\n          data: {\n            toggle: 'dropdown'\n          }\n        }), _this.ui.dropdown({\n          title: _this.lang.table.table,\n          className: 'note-table',\n          items: ['<div class=\"note-dimension-picker\">', '  <div class=\"note-dimension-picker-mousecatcher\" data-event=\"insertTable\" data-value=\"1x1\"/>', '  <div class=\"note-dimension-picker-highlighted\"/>', '  <div class=\"note-dimension-picker-unhighlighted\"/>', '</div>', '<div class=\"note-dimension-display\">1 x 1</div>'].join('')\n        })], {\n          callback: function ($node) {\n            var $catcher = $node.find('.note-dimension-picker-mousecatcher')\n            $catcher.css({\n              width: _this.options.insertTableMaxSize.col + 'em',\n              height: _this.options.insertTableMaxSize.row + 'em'\n            }).mousedown(_this.context.createInvokeHandler('editor.insertTable')).on('mousemove', _this.tableMoveHandler.bind(_this))\n          }\n        }).render()\n      })\n      this.context.memo('button.link', function () {\n        return _this.button({\n          contents: _this.ui.icon(_this.options.icons.link),\n          tooltip: _this.lang.link.link + _this.representShortcut('linkDialog.show'),\n          click: _this.context.createInvokeHandler('linkDialog.show')\n        }).render()\n      })\n      this.context.memo('button.picture', function () {\n        return _this.button({\n          contents: _this.ui.icon(_this.options.icons.picture),\n          tooltip: _this.lang.image.image,\n          click: _this.context.createInvokeHandler('imageDialog.show')\n        }).render()\n      })\n      this.context.memo('button.video', function () {\n        return _this.button({\n          contents: _this.ui.icon(_this.options.icons.video),\n          tooltip: _this.lang.video.video,\n          click: _this.context.createInvokeHandler('videoDialog.show')\n        }).render()\n      })\n      this.context.memo('button.hr', function () {\n        return _this.button({\n          contents: _this.ui.icon(_this.options.icons.minus),\n          tooltip: _this.lang.hr.insert + _this.representShortcut('insertHorizontalRule'),\n          click: _this.context.createInvokeHandler('editor.insertHorizontalRule')\n        }).render()\n      })\n      this.context.memo('button.fullscreen', function () {\n        return _this.button({\n          className: 'btn-fullscreen',\n          contents: _this.ui.icon(_this.options.icons.arrowsAlt),\n          tooltip: _this.lang.options.fullscreen,\n          click: _this.context.createInvokeHandler('fullscreen.toggle')\n        }).render()\n      })\n      this.context.memo('button.codeview', function () {\n        return _this.button({\n          className: 'btn-codeview',\n          contents: _this.ui.icon(_this.options.icons.code),\n          tooltip: _this.lang.options.codeview,\n          click: _this.context.createInvokeHandler('codeview.toggle')\n        }).render()\n      })\n      this.context.memo('button.redo', function () {\n        return _this.button({\n          contents: _this.ui.icon(_this.options.icons.redo),\n          tooltip: _this.lang.history.redo + _this.representShortcut('redo'),\n          click: _this.context.createInvokeHandler('editor.redo')\n        }).render()\n      })\n      this.context.memo('button.undo', function () {\n        return _this.button({\n          contents: _this.ui.icon(_this.options.icons.undo),\n          tooltip: _this.lang.history.undo + _this.representShortcut('undo'),\n          click: _this.context.createInvokeHandler('editor.undo')\n        }).render()\n      })\n      this.context.memo('button.help', function () {\n        return _this.button({\n          contents: _this.ui.icon(_this.options.icons.question),\n          tooltip: _this.lang.options.help,\n          click: _this.context.createInvokeHandler('helpDialog.show')\n        }).render()\n      })\n    }\n    /**\n     * image : [\n     *   ['imagesize', ['imageSize100', 'imageSize50', 'imageSize25']],\n     *   ['float', ['floatLeft', 'floatRight', 'floatNone' ]],\n     *   ['remove', ['removeMedia']]\n     * ],\n     */\n\n    Buttons.prototype.addImagePopoverButtons = function () {\n      var _this = this // Image Size Buttons\n\n      this.context.memo('button.imageSize100', function () {\n        return _this.button({\n          contents: '<span class=\"note-fontsize-10\">100%</span>',\n          tooltip: _this.lang.image.resizeFull,\n          click: _this.context.createInvokeHandler('editor.resize', '1')\n        }).render()\n      })\n      this.context.memo('button.imageSize50', function () {\n        return _this.button({\n          contents: '<span class=\"note-fontsize-10\">50%</span>',\n          tooltip: _this.lang.image.resizeHalf,\n          click: _this.context.createInvokeHandler('editor.resize', '0.5')\n        }).render()\n      })\n      this.context.memo('button.imageSize25', function () {\n        return _this.button({\n          contents: '<span class=\"note-fontsize-10\">25%</span>',\n          tooltip: _this.lang.image.resizeQuarter,\n          click: _this.context.createInvokeHandler('editor.resize', '0.25')\n        }).render()\n      }) // Float Buttons\n\n      this.context.memo('button.floatLeft', function () {\n        return _this.button({\n          contents: _this.ui.icon(_this.options.icons.alignLeft),\n          tooltip: _this.lang.image.floatLeft,\n          click: _this.context.createInvokeHandler('editor.floatMe', 'left')\n        }).render()\n      })\n      this.context.memo('button.floatRight', function () {\n        return _this.button({\n          contents: _this.ui.icon(_this.options.icons.alignRight),\n          tooltip: _this.lang.image.floatRight,\n          click: _this.context.createInvokeHandler('editor.floatMe', 'right')\n        }).render()\n      })\n      this.context.memo('button.floatNone', function () {\n        return _this.button({\n          contents: _this.ui.icon(_this.options.icons.alignJustify),\n          tooltip: _this.lang.image.floatNone,\n          click: _this.context.createInvokeHandler('editor.floatMe', 'none')\n        }).render()\n      }) // Remove Buttons\n\n      this.context.memo('button.removeMedia', function () {\n        return _this.button({\n          contents: _this.ui.icon(_this.options.icons.trash),\n          tooltip: _this.lang.image.remove,\n          click: _this.context.createInvokeHandler('editor.removeMedia')\n        }).render()\n      })\n    }\n\n    Buttons.prototype.addLinkPopoverButtons = function () {\n      var _this = this\n\n      this.context.memo('button.linkDialogShow', function () {\n        return _this.button({\n          contents: _this.ui.icon(_this.options.icons.link),\n          tooltip: _this.lang.link.edit,\n          click: _this.context.createInvokeHandler('linkDialog.show')\n        }).render()\n      })\n      this.context.memo('button.unlink', function () {\n        return _this.button({\n          contents: _this.ui.icon(_this.options.icons.unlink),\n          tooltip: _this.lang.link.unlink,\n          click: _this.context.createInvokeHandler('editor.unlink')\n        }).render()\n      })\n    }\n    /**\n     * table : [\n     *  ['add', ['addRowDown', 'addRowUp', 'addColLeft', 'addColRight']],\n     *  ['delete', ['deleteRow', 'deleteCol', 'deleteTable']]\n     * ],\n     */\n\n    Buttons.prototype.addTablePopoverButtons = function () {\n      var _this = this\n\n      this.context.memo('button.addRowUp', function () {\n        return _this.button({\n          className: 'btn-md',\n          contents: _this.ui.icon(_this.options.icons.rowAbove),\n          tooltip: _this.lang.table.addRowAbove,\n          click: _this.context.createInvokeHandler('editor.addRow', 'top')\n        }).render()\n      })\n      this.context.memo('button.addRowDown', function () {\n        return _this.button({\n          className: 'btn-md',\n          contents: _this.ui.icon(_this.options.icons.rowBelow),\n          tooltip: _this.lang.table.addRowBelow,\n          click: _this.context.createInvokeHandler('editor.addRow', 'bottom')\n        }).render()\n      })\n      this.context.memo('button.addColLeft', function () {\n        return _this.button({\n          className: 'btn-md',\n          contents: _this.ui.icon(_this.options.icons.colBefore),\n          tooltip: _this.lang.table.addColLeft,\n          click: _this.context.createInvokeHandler('editor.addCol', 'left')\n        }).render()\n      })\n      this.context.memo('button.addColRight', function () {\n        return _this.button({\n          className: 'btn-md',\n          contents: _this.ui.icon(_this.options.icons.colAfter),\n          tooltip: _this.lang.table.addColRight,\n          click: _this.context.createInvokeHandler('editor.addCol', 'right')\n        }).render()\n      })\n      this.context.memo('button.deleteRow', function () {\n        return _this.button({\n          className: 'btn-md',\n          contents: _this.ui.icon(_this.options.icons.rowRemove),\n          tooltip: _this.lang.table.delRow,\n          click: _this.context.createInvokeHandler('editor.deleteRow')\n        }).render()\n      })\n      this.context.memo('button.deleteCol', function () {\n        return _this.button({\n          className: 'btn-md',\n          contents: _this.ui.icon(_this.options.icons.colRemove),\n          tooltip: _this.lang.table.delCol,\n          click: _this.context.createInvokeHandler('editor.deleteCol')\n        }).render()\n      })\n      this.context.memo('button.deleteTable', function () {\n        return _this.button({\n          className: 'btn-md',\n          contents: _this.ui.icon(_this.options.icons.trash),\n          tooltip: _this.lang.table.delTable,\n          click: _this.context.createInvokeHandler('editor.deleteTable')\n        }).render()\n      })\n    }\n\n    Buttons.prototype.build = function ($container, groups) {\n      for (var groupIdx = 0, groupLen = groups.length; groupIdx < groupLen; groupIdx++) {\n        var group = groups[groupIdx]\n        var groupName = $$1.isArray(group) ? group[0] : group\n        var buttons = $$1.isArray(group) ? group.length === 1 ? [group[0]] : group[1] : [group]\n        var $group = this.ui.buttonGroup({\n          className: 'note-' + groupName\n        }).render()\n\n        for (var idx = 0, len = buttons.length; idx < len; idx++) {\n          var btn = this.context.memo('button.' + buttons[idx])\n\n          if (btn) {\n            $group.append(typeof btn === 'function' ? btn(this.context) : btn)\n          }\n        }\n\n        $group.appendTo($container)\n      }\n    }\n    /**\n     * @param {jQuery} [$container]\n     */\n\n    Buttons.prototype.updateCurrentStyle = function ($container) {\n      var _this = this\n\n      var $cont = $container || this.$toolbar\n      var styleInfo = this.context.invoke('editor.currentStyle')\n      this.updateBtnStates($cont, {\n        '.note-btn-bold': function () {\n          return styleInfo['font-bold'] === 'bold'\n        },\n        '.note-btn-italic': function () {\n          return styleInfo['font-italic'] === 'italic'\n        },\n        '.note-btn-underline': function () {\n          return styleInfo['font-underline'] === 'underline'\n        },\n        '.note-btn-subscript': function () {\n          return styleInfo['font-subscript'] === 'subscript'\n        },\n        '.note-btn-superscript': function () {\n          return styleInfo['font-superscript'] === 'superscript'\n        },\n        '.note-btn-strikethrough': function () {\n          return styleInfo['font-strikethrough'] === 'strikethrough'\n        }\n      })\n\n      if (styleInfo['font-family']) {\n        var fontNames = styleInfo['font-family'].split(',').map(function (name) {\n          return name.replace(/[\\'\\\"]/g, '').replace(/\\s+$/, '').replace(/^\\s+/, '')\n        })\n        var fontName_1 = lists.find(fontNames, this.isFontInstalled.bind(this))\n        $cont.find('.dropdown-fontname a').each(function (idx, item) {\n          var $item = $$1(item) // always compare string to avoid creating another func.\n\n          var isChecked = $item.data('value') + '' === fontName_1 + ''\n          $item.toggleClass('checked', isChecked)\n        })\n        $cont.find('.note-current-fontname').text(fontName_1).css('font-family', fontName_1)\n      }\n\n      if (styleInfo['font-size']) {\n        var fontSize_1 = styleInfo['font-size']\n        $cont.find('.dropdown-fontsize a').each(function (idx, item) {\n          var $item = $$1(item) // always compare with string to avoid creating another func.\n\n          var isChecked = $item.data('value') + '' === fontSize_1 + ''\n          $item.toggleClass('checked', isChecked)\n        })\n        $cont.find('.note-current-fontsize').text(fontSize_1)\n      }\n\n      if (styleInfo['line-height']) {\n        var lineHeight_1 = styleInfo['line-height']\n        $cont.find('.dropdown-line-height li a').each(function (idx, item) {\n          // always compare with string to avoid creating another func.\n          var isChecked = $$1(item).data('value') + '' === lineHeight_1 + ''\n          _this.className = isChecked ? 'checked' : ''\n        })\n      }\n    }\n\n    Buttons.prototype.updateBtnStates = function ($container, infos) {\n      var _this = this\n\n      $$1.each(infos, function (selector, pred) {\n        _this.ui.toggleBtnActive($container.find(selector), pred())\n      })\n    }\n\n    Buttons.prototype.tableMoveHandler = function (event) {\n      var PX_PER_EM = 18\n      var $picker = $$1(event.target.parentNode) // target is mousecatcher\n\n      var $dimensionDisplay = $picker.next()\n      var $catcher = $picker.find('.note-dimension-picker-mousecatcher')\n      var $highlighted = $picker.find('.note-dimension-picker-highlighted')\n      var $unhighlighted = $picker.find('.note-dimension-picker-unhighlighted')\n      var posOffset // HTML5 with jQuery - e.offsetX is undefined in Firefox\n\n      if (event.offsetX === undefined) {\n        var posCatcher = $$1(event.target).offset()\n        posOffset = {\n          x: event.pageX - posCatcher.left,\n          y: event.pageY - posCatcher.top\n        }\n      } else {\n        posOffset = {\n          x: event.offsetX,\n          y: event.offsetY\n        }\n      }\n\n      var dim = {\n        c: Math.ceil(posOffset.x / PX_PER_EM) || 1,\n        r: Math.ceil(posOffset.y / PX_PER_EM) || 1\n      }\n      $highlighted.css({\n        width: dim.c + 'em',\n        height: dim.r + 'em'\n      })\n      $catcher.data('value', dim.c + 'x' + dim.r)\n\n      if (dim.c > 3 && dim.c < this.options.insertTableMaxSize.col) {\n        $unhighlighted.css({\n          width: dim.c + 1 + 'em'\n        })\n      }\n\n      if (dim.r > 3 && dim.r < this.options.insertTableMaxSize.row) {\n        $unhighlighted.css({\n          height: dim.r + 1 + 'em'\n        })\n      }\n\n      $dimensionDisplay.html(dim.c + ' x ' + dim.r)\n    }\n\n    return Buttons\n  }())\n\n  var Toolbar =\n  /** @class */\n  (function () {\n    function Toolbar (context) {\n      this.context = context\n      this.$window = $$1(window)\n      this.$document = $$1(document)\n      this.ui = $$1.summernote.ui\n      this.$note = context.layoutInfo.note\n      this.$editor = context.layoutInfo.editor\n      this.$toolbar = context.layoutInfo.toolbar\n      this.options = context.options\n      this.followScroll = this.followScroll.bind(this)\n    }\n\n    Toolbar.prototype.shouldInitialize = function () {\n      return !this.options.airMode\n    }\n\n    Toolbar.prototype.initialize = function () {\n      var _this = this\n\n      this.options.toolbar = this.options.toolbar || []\n\n      if (!this.options.toolbar.length) {\n        this.$toolbar.hide()\n      } else {\n        this.context.invoke('buttons.build', this.$toolbar, this.options.toolbar)\n      }\n\n      if (this.options.toolbarContainer) {\n        this.$toolbar.appendTo(this.options.toolbarContainer)\n      }\n\n      this.changeContainer(false)\n      this.$note.on('summernote.keyup summernote.mouseup summernote.change', function () {\n        _this.context.invoke('buttons.updateCurrentStyle')\n      })\n      this.context.invoke('buttons.updateCurrentStyle')\n\n      if (this.options.followingToolbar) {\n        this.$window.on('scroll resize', this.followScroll)\n      }\n    }\n\n    Toolbar.prototype.destroy = function () {\n      this.$toolbar.children().remove()\n\n      if (this.options.followingToolbar) {\n        this.$window.off('scroll resize', this.followScroll)\n      }\n    }\n\n    Toolbar.prototype.followScroll = function () {\n      if (this.$editor.hasClass('fullscreen')) {\n        return false\n      }\n\n      var $toolbarWrapper = this.$toolbar.parent('.note-toolbar-wrapper')\n      var editorHeight = this.$editor.outerHeight()\n      var editorWidth = this.$editor.width()\n      var toolbarHeight = this.$toolbar.height()\n      $toolbarWrapper.css({\n        height: toolbarHeight\n      }) // check if the web app is currently using another static bar\n\n      var otherBarHeight = 0\n\n      if (this.options.otherStaticBar) {\n        otherBarHeight = $$1(this.options.otherStaticBar).outerHeight()\n      }\n\n      var currentOffset = this.$document.scrollTop()\n      var editorOffsetTop = this.$editor.offset().top\n      var editorOffsetBottom = editorOffsetTop + editorHeight\n      var activateOffset = editorOffsetTop - otherBarHeight\n      var deactivateOffsetBottom = editorOffsetBottom - otherBarHeight - toolbarHeight\n\n      if (currentOffset > activateOffset && currentOffset < deactivateOffsetBottom) {\n        this.$toolbar.css({\n          position: 'fixed',\n          top: otherBarHeight,\n          width: editorWidth\n        })\n      } else {\n        this.$toolbar.css({\n          position: 'relative',\n          top: 0,\n          width: '100%'\n        })\n      }\n    }\n\n    Toolbar.prototype.changeContainer = function (isFullscreen) {\n      if (isFullscreen) {\n        this.$toolbar.prependTo(this.$editor)\n      } else {\n        if (this.options.toolbarContainer) {\n          this.$toolbar.appendTo(this.options.toolbarContainer)\n        }\n      }\n    }\n\n    Toolbar.prototype.updateFullscreen = function (isFullscreen) {\n      this.ui.toggleBtnActive(this.$toolbar.find('.btn-fullscreen'), isFullscreen)\n      this.changeContainer(isFullscreen)\n    }\n\n    Toolbar.prototype.updateCodeview = function (isCodeview) {\n      this.ui.toggleBtnActive(this.$toolbar.find('.btn-codeview'), isCodeview)\n\n      if (isCodeview) {\n        this.deactivate()\n      } else {\n        this.activate()\n      }\n    }\n\n    Toolbar.prototype.activate = function (isIncludeCodeview) {\n      var $btn = this.$toolbar.find('button')\n\n      if (!isIncludeCodeview) {\n        $btn = $btn.not('.btn-codeview')\n      }\n\n      this.ui.toggleBtn($btn, true)\n    }\n\n    Toolbar.prototype.deactivate = function (isIncludeCodeview) {\n      var $btn = this.$toolbar.find('button')\n\n      if (!isIncludeCodeview) {\n        $btn = $btn.not('.btn-codeview')\n      }\n\n      this.ui.toggleBtn($btn, false)\n    }\n\n    return Toolbar\n  }())\n\n  var LinkDialog =\n  /** @class */\n  (function () {\n    function LinkDialog (context) {\n      this.context = context\n      this.ui = $$1.summernote.ui\n      this.$body = $$1(document.body)\n      this.$editor = context.layoutInfo.editor\n      this.options = context.options\n      this.lang = this.options.langInfo\n      context.memo('help.linkDialog.show', this.options.langInfo.help['linkDialog.show'])\n    }\n\n    LinkDialog.prototype.initialize = function () {\n      var $container = this.options.dialogsInBody ? this.$body : this.$editor\n      var body = ['<div class=\"form-group note-form-group\">', '<label class=\"note-form-label\">' + this.lang.link.textToDisplay + '</label>', '<input class=\"note-link-text form-control note-form-control  note-input\" type=\"text\" />', '</div>', '<div class=\"form-group note-form-group\">', '<label class=\"note-form-label\">' + this.lang.link.url + '</label>', '<input class=\"note-link-url form-control note-form-control note-input\" type=\"text\" value=\"http://\" />', '</div>', !this.options.disableLinkTarget ? $$1('<div/>').append(this.ui.checkbox({\n        id: 'sn-checkbox-open-in-new-window',\n        text: this.lang.link.openInNewWindow,\n        checked: true\n      }).render()).html() : ''].join('')\n      var buttonClass = 'btn btn-primary note-btn note-btn-primary note-link-btn'\n      var footer = '<button type=\"submit\" href=\"#\" class=\"' + buttonClass + '\" disabled>' + this.lang.link.insert + '</button>'\n      this.$dialog = this.ui.dialog({\n        className: 'link-dialog',\n        title: this.lang.link.insert,\n        fade: this.options.dialogsFade,\n        body: body,\n        footer: footer\n      }).render().appendTo($container)\n    }\n\n    LinkDialog.prototype.destroy = function () {\n      this.ui.hideDialog(this.$dialog)\n      this.$dialog.remove()\n    }\n\n    LinkDialog.prototype.bindEnterKey = function ($input, $btn) {\n      $input.on('keypress', function (event) {\n        if (event.keyCode === key.code.ENTER) {\n          event.preventDefault()\n          $btn.trigger('click')\n        }\n      })\n    }\n    /**\n     * toggle update button\n     */\n\n    LinkDialog.prototype.toggleLinkBtn = function ($linkBtn, $linkText, $linkUrl) {\n      this.ui.toggleBtn($linkBtn, $linkText.val() && $linkUrl.val())\n    }\n    /**\n     * Show link dialog and set event handlers on dialog controls.\n     *\n     * @param {Object} linkInfo\n     * @return {Promise}\n     */\n\n    LinkDialog.prototype.showLinkDialog = function (linkInfo) {\n      var _this = this\n\n      return $$1.Deferred(function (deferred) {\n        var $linkText = _this.$dialog.find('.note-link-text')\n\n        var $linkUrl = _this.$dialog.find('.note-link-url')\n\n        var $linkBtn = _this.$dialog.find('.note-link-btn')\n\n        var $openInNewWindow = _this.$dialog.find('input[type=checkbox]')\n\n        _this.ui.onDialogShown(_this.$dialog, function () {\n          _this.context.triggerEvent('dialog.shown') // if no url was given, copy text to url\n\n          if (!linkInfo.url) {\n            linkInfo.url = linkInfo.text\n          }\n\n          $linkText.val(linkInfo.text)\n\n          var handleLinkTextUpdate = function () {\n            _this.toggleLinkBtn($linkBtn, $linkText, $linkUrl) // if linktext was modified by keyup,\n            // stop cloning text from linkUrl\n\n            linkInfo.text = $linkText.val()\n          }\n\n          $linkText.on('input', handleLinkTextUpdate).on('paste', function () {\n            setTimeout(handleLinkTextUpdate, 0)\n          })\n\n          var handleLinkUrlUpdate = function () {\n            _this.toggleLinkBtn($linkBtn, $linkText, $linkUrl) // display same link on `Text to display` input\n            // when create a new link\n\n            if (!linkInfo.text) {\n              $linkText.val($linkUrl.val())\n            }\n          }\n\n          $linkUrl.on('input', handleLinkUrlUpdate).on('paste', function () {\n            setTimeout(handleLinkUrlUpdate, 0)\n          }).val(linkInfo.url)\n\n          if (!env.isSupportTouch) {\n            $linkUrl.trigger('focus')\n          }\n\n          _this.toggleLinkBtn($linkBtn, $linkText, $linkUrl)\n\n          _this.bindEnterKey($linkUrl, $linkBtn)\n\n          _this.bindEnterKey($linkText, $linkBtn)\n\n          var isChecked = linkInfo.isNewWindow !== undefined ? linkInfo.isNewWindow : _this.context.options.linkTargetBlank\n          $openInNewWindow.prop('checked', isChecked)\n          $linkBtn.one('click', function (event) {\n            event.preventDefault()\n            deferred.resolve({\n              range: linkInfo.range,\n              url: $linkUrl.val(),\n              text: $linkText.val(),\n              isNewWindow: $openInNewWindow.is(':checked')\n            })\n\n            _this.ui.hideDialog(_this.$dialog)\n          })\n        })\n\n        _this.ui.onDialogHidden(_this.$dialog, function () {\n          // detach events\n          $linkText.off('input paste keypress')\n          $linkUrl.off('input paste keypress')\n          $linkBtn.off('click')\n\n          if (deferred.state() === 'pending') {\n            deferred.reject()\n          }\n        })\n\n        _this.ui.showDialog(_this.$dialog)\n      }).promise()\n    }\n    /**\n     * @param {Object} layoutInfo\n     */\n\n    LinkDialog.prototype.show = function () {\n      var _this = this\n\n      var linkInfo = this.context.invoke('editor.getLinkInfo')\n      this.context.invoke('editor.saveRange')\n      this.showLinkDialog(linkInfo).then(function (linkInfo) {\n        _this.context.invoke('editor.restoreRange')\n\n        _this.context.invoke('editor.createLink', linkInfo)\n      }).fail(function () {\n        _this.context.invoke('editor.restoreRange')\n      })\n    }\n\n    return LinkDialog\n  }())\n\n  var LinkPopover =\n  /** @class */\n  (function () {\n    function LinkPopover (context) {\n      var _this = this\n\n      this.context = context\n      this.ui = $$1.summernote.ui\n      this.options = context.options\n      this.events = {\n        'summernote.keyup summernote.mouseup summernote.change summernote.scroll': function () {\n          _this.update()\n        },\n        'summernote.disable summernote.dialog.shown': function () {\n          _this.hide()\n        }\n      }\n    }\n\n    LinkPopover.prototype.shouldInitialize = function () {\n      return !lists.isEmpty(this.options.popover.link)\n    }\n\n    LinkPopover.prototype.initialize = function () {\n      this.$popover = this.ui.popover({\n        className: 'note-link-popover',\n        callback: function ($node) {\n          var $content = $node.find('.popover-content,.note-popover-content')\n          $content.prepend('<span><a target=\"_blank\"></a>&nbsp;</span>')\n        }\n      }).render().appendTo(this.options.container)\n      var $content = this.$popover.find('.popover-content,.note-popover-content')\n      this.context.invoke('buttons.build', $content, this.options.popover.link)\n    }\n\n    LinkPopover.prototype.destroy = function () {\n      this.$popover.remove()\n    }\n\n    LinkPopover.prototype.update = function () {\n      // Prevent focusing on editable when invoke('code') is executed\n      if (!this.context.invoke('editor.hasFocus')) {\n        this.hide()\n        return\n      }\n\n      var rng = this.context.invoke('editor.createRange')\n\n      if (rng.isCollapsed() && rng.isOnAnchor()) {\n        var anchor = dom.ancestor(rng.sc, dom.isAnchor)\n        var href = $$1(anchor).attr('href')\n        this.$popover.find('a').attr('href', href).html(href)\n        var pos = dom.posFromPlaceholder(anchor)\n        this.$popover.css({\n          display: 'block',\n          left: pos.left,\n          top: pos.top\n        })\n      } else {\n        this.hide()\n      }\n    }\n\n    LinkPopover.prototype.hide = function () {\n      this.$popover.hide()\n    }\n\n    return LinkPopover\n  }())\n\n  var ImageDialog =\n  /** @class */\n  (function () {\n    function ImageDialog (context) {\n      this.context = context\n      this.ui = $$1.summernote.ui\n      this.$body = $$1(document.body)\n      this.$editor = context.layoutInfo.editor\n      this.options = context.options\n      this.lang = this.options.langInfo\n    }\n\n    ImageDialog.prototype.initialize = function () {\n      var $container = this.options.dialogsInBody ? this.$body : this.$editor\n      var imageLimitation = ''\n\n      if (this.options.maximumImageFileSize) {\n        var unit = Math.floor(Math.log(this.options.maximumImageFileSize) / Math.log(1024))\n        var readableSize = (this.options.maximumImageFileSize / Math.pow(1024, unit)).toFixed(2) * 1 + ' ' + ' KMGTP'[unit] + 'B'\n        imageLimitation = '<small>' + (this.lang.image.maximumFileSize + ' : ' + readableSize) + '</small>'\n      }\n\n      var body = ['<div class=\"form-group note-form-group note-group-select-from-files\">', '<label class=\"note-form-label\">' + this.lang.image.selectFromFiles + '</label>', '<input class=\"note-image-input note-form-control note-input\" ', ' type=\"file\" name=\"files\" accept=\"image/*\" multiple=\"multiple\" />', imageLimitation, '</div>', '<div class=\"form-group note-group-image-url\" style=\"overflow:auto;\">', '<label class=\"note-form-label\">' + this.lang.image.url + '</label>', '<input class=\"note-image-url form-control note-form-control note-input ', ' col-md-12\" type=\"text\" />', '</div>'].join('')\n      var buttonClass = 'btn btn-primary note-btn note-btn-primary note-image-btn'\n      var footer = '<button type=\"submit\" href=\"#\" class=\"' + buttonClass + '\" disabled>' + this.lang.image.insert + '</button>'\n      this.$dialog = this.ui.dialog({\n        title: this.lang.image.insert,\n        fade: this.options.dialogsFade,\n        body: body,\n        footer: footer\n      }).render().appendTo($container)\n    }\n\n    ImageDialog.prototype.destroy = function () {\n      this.ui.hideDialog(this.$dialog)\n      this.$dialog.remove()\n    }\n\n    ImageDialog.prototype.bindEnterKey = function ($input, $btn) {\n      $input.on('keypress', function (event) {\n        if (event.keyCode === key.code.ENTER) {\n          event.preventDefault()\n          $btn.trigger('click')\n        }\n      })\n    }\n\n    ImageDialog.prototype.show = function () {\n      var _this = this\n\n      this.context.invoke('editor.saveRange')\n      this.showImageDialog().then(function (data) {\n        // [workaround] hide dialog before restore range for IE range focus\n        _this.ui.hideDialog(_this.$dialog)\n\n        _this.context.invoke('editor.restoreRange')\n\n        if (typeof data === 'string') {\n          _this.context.invoke('editor.insertImage', data)\n        } else {\n          _this.context.invoke('editor.insertImagesOrCallback', data)\n        }\n      }).fail(function () {\n        _this.context.invoke('editor.restoreRange')\n      })\n    }\n    /**\n     * show image dialog\n     *\n     * @param {jQuery} $dialog\n     * @return {Promise}\n     */\n\n    ImageDialog.prototype.showImageDialog = function () {\n      var _this = this\n\n      return $$1.Deferred(function (deferred) {\n        var $imageInput = _this.$dialog.find('.note-image-input')\n\n        var $imageUrl = _this.$dialog.find('.note-image-url')\n\n        var $imageBtn = _this.$dialog.find('.note-image-btn')\n\n        _this.ui.onDialogShown(_this.$dialog, function () {\n          _this.context.triggerEvent('dialog.shown') // Cloning imageInput to clear element.\n\n          $imageInput.replaceWith($imageInput.clone().on('change', function (event) {\n            deferred.resolve(event.target.files || event.target.value)\n          }).val(''))\n          $imageBtn.click(function (event) {\n            event.preventDefault()\n            deferred.resolve($imageUrl.val())\n          })\n          $imageUrl.on('keyup paste', function () {\n            var url = $imageUrl.val()\n\n            _this.ui.toggleBtn($imageBtn, url)\n          }).val('')\n\n          if (!env.isSupportTouch) {\n            $imageUrl.trigger('focus')\n          }\n\n          _this.bindEnterKey($imageUrl, $imageBtn)\n        })\n\n        _this.ui.onDialogHidden(_this.$dialog, function () {\n          $imageInput.off('change')\n          $imageUrl.off('keyup paste keypress')\n          $imageBtn.off('click')\n\n          if (deferred.state() === 'pending') {\n            deferred.reject()\n          }\n        })\n\n        _this.ui.showDialog(_this.$dialog)\n      })\n    }\n\n    return ImageDialog\n  }())\n  /**\n   * Image popover module\n   *  mouse events that show/hide popover will be handled by Handle.js.\n   *  Handle.js will receive the events and invoke 'imagePopover.update'.\n   */\n\n  var ImagePopover =\n  /** @class */\n  (function () {\n    function ImagePopover (context) {\n      var _this = this\n\n      this.context = context\n      this.ui = $$1.summernote.ui\n      this.editable = context.layoutInfo.editable[0]\n      this.options = context.options\n      this.events = {\n        'summernote.disable': function () {\n          _this.hide()\n        }\n      }\n    }\n\n    ImagePopover.prototype.shouldInitialize = function () {\n      return !lists.isEmpty(this.options.popover.image)\n    }\n\n    ImagePopover.prototype.initialize = function () {\n      this.$popover = this.ui.popover({\n        className: 'note-image-popover'\n      }).render().appendTo(this.options.container)\n      var $content = this.$popover.find('.popover-content,.note-popover-content')\n      this.context.invoke('buttons.build', $content, this.options.popover.image)\n    }\n\n    ImagePopover.prototype.destroy = function () {\n      this.$popover.remove()\n    }\n\n    ImagePopover.prototype.update = function (target) {\n      if (dom.isImg(target)) {\n        var pos = dom.posFromPlaceholder(target)\n        var posEditor = dom.posFromPlaceholder(this.editable)\n        this.$popover.css({\n          display: 'block',\n          left: this.options.popatmouse ? event.pageX - 20 : pos.left,\n          top: this.options.popatmouse ? event.pageY : Math.min(pos.top, posEditor.top)\n        })\n      } else {\n        this.hide()\n      }\n    }\n\n    ImagePopover.prototype.hide = function () {\n      this.$popover.hide()\n    }\n\n    return ImagePopover\n  }())\n\n  var TablePopover =\n  /** @class */\n  (function () {\n    function TablePopover (context) {\n      var _this = this\n\n      this.context = context\n      this.ui = $$1.summernote.ui\n      this.options = context.options\n      this.events = {\n        'summernote.mousedown': function (we, e) {\n          _this.update(e.target)\n        },\n        'summernote.keyup summernote.scroll summernote.change': function () {\n          _this.update()\n        },\n        'summernote.disable': function () {\n          _this.hide()\n        }\n      }\n    }\n\n    TablePopover.prototype.shouldInitialize = function () {\n      return !lists.isEmpty(this.options.popover.table)\n    }\n\n    TablePopover.prototype.initialize = function () {\n      this.$popover = this.ui.popover({\n        className: 'note-table-popover'\n      }).render().appendTo(this.options.container)\n      var $content = this.$popover.find('.popover-content,.note-popover-content')\n      this.context.invoke('buttons.build', $content, this.options.popover.table) // [workaround] Disable Firefox's default table editor\n\n      if (env.isFF) {\n        document.execCommand('enableInlineTableEditing', false, false)\n      }\n    }\n\n    TablePopover.prototype.destroy = function () {\n      this.$popover.remove()\n    }\n\n    TablePopover.prototype.update = function (target) {\n      if (this.context.isDisabled()) {\n        return false\n      }\n\n      var isCell = dom.isCell(target)\n\n      if (isCell) {\n        var pos = dom.posFromPlaceholder(target)\n        this.$popover.css({\n          display: 'block',\n          left: pos.left,\n          top: pos.top\n        })\n      } else {\n        this.hide()\n      }\n\n      return isCell\n    }\n\n    TablePopover.prototype.hide = function () {\n      this.$popover.hide()\n    }\n\n    return TablePopover\n  }())\n\n  var VideoDialog =\n  /** @class */\n  (function () {\n    function VideoDialog (context) {\n      this.context = context\n      this.ui = $$1.summernote.ui\n      this.$body = $$1(document.body)\n      this.$editor = context.layoutInfo.editor\n      this.options = context.options\n      this.lang = this.options.langInfo\n    }\n\n    VideoDialog.prototype.initialize = function () {\n      var $container = this.options.dialogsInBody ? this.$body : this.$editor\n      var body = ['<div class=\"form-group note-form-group row-fluid\">', '<label class=\"note-form-label\">' + this.lang.video.url + ' <small class=\"text-muted\">' + this.lang.video.providers + '</small></label>', '<input class=\"note-video-url form-control note-form-control note-input\" type=\"text\" />', '</div>'].join('')\n      var buttonClass = 'btn btn-primary note-btn note-btn-primary note-video-btn'\n      var footer = '<button type=\"submit\" href=\"#\" class=\"' + buttonClass + '\" disabled>' + this.lang.video.insert + '</button>'\n      this.$dialog = this.ui.dialog({\n        title: this.lang.video.insert,\n        fade: this.options.dialogsFade,\n        body: body,\n        footer: footer\n      }).render().appendTo($container)\n    }\n\n    VideoDialog.prototype.destroy = function () {\n      this.ui.hideDialog(this.$dialog)\n      this.$dialog.remove()\n    }\n\n    VideoDialog.prototype.bindEnterKey = function ($input, $btn) {\n      $input.on('keypress', function (event) {\n        if (event.keyCode === key.code.ENTER) {\n          event.preventDefault()\n          $btn.trigger('click')\n        }\n      })\n    }\n\n    VideoDialog.prototype.createVideoNode = function (url) {\n      // video url patterns(youtube, instagram, vimeo, dailymotion, youku, mp4, ogg, webm)\n      var ytRegExp = /^(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?$/\n      var ytMatch = url.match(ytRegExp)\n      var igRegExp = /(?:www\\.|\\/\\/)instagram\\.com\\/p\\/(.[a-zA-Z0-9_-]*)/\n      var igMatch = url.match(igRegExp)\n      var vRegExp = /\\/\\/vine\\.co\\/v\\/([a-zA-Z0-9]+)/\n      var vMatch = url.match(vRegExp)\n      var vimRegExp = /\\/\\/(player\\.)?vimeo\\.com\\/([a-z]*\\/)*(\\d+)[?]?.*/\n      var vimMatch = url.match(vimRegExp)\n      var dmRegExp = /.+dailymotion.com\\/(video|hub)\\/([^_]+)[^#]*(#video=([^_&]+))?/\n      var dmMatch = url.match(dmRegExp)\n      var youkuRegExp = /\\/\\/v\\.youku\\.com\\/v_show\\/id_(\\w+)=*\\.html/\n      var youkuMatch = url.match(youkuRegExp)\n      var qqRegExp = /\\/\\/v\\.qq\\.com.*?vid=(.+)/\n      var qqMatch = url.match(qqRegExp)\n      var qqRegExp2 = /\\/\\/v\\.qq\\.com\\/x?\\/?(page|cover).*?\\/([^\\/]+)\\.html\\??.*/\n      var qqMatch2 = url.match(qqRegExp2)\n      var mp4RegExp = /^.+.(mp4|m4v)$/\n      var mp4Match = url.match(mp4RegExp)\n      var oggRegExp = /^.+.(ogg|ogv)$/\n      var oggMatch = url.match(oggRegExp)\n      var webmRegExp = /^.+.(webm)$/\n      var webmMatch = url.match(webmRegExp)\n      var $video\n\n      if (ytMatch && ytMatch[1].length === 11) {\n        var youtubeId = ytMatch[1]\n        $video = $$1('<iframe>').attr('frameborder', 0).attr('src', '//www.youtube.com/embed/' + youtubeId).attr('width', '640').attr('height', '360')\n      } else if (igMatch && igMatch[0].length) {\n        $video = $$1('<iframe>').attr('frameborder', 0).attr('src', 'https://instagram.com/p/' + igMatch[1] + '/embed/').attr('width', '612').attr('height', '710').attr('scrolling', 'no').attr('allowtransparency', 'true')\n      } else if (vMatch && vMatch[0].length) {\n        $video = $$1('<iframe>').attr('frameborder', 0).attr('src', vMatch[0] + '/embed/simple').attr('width', '600').attr('height', '600').attr('class', 'vine-embed')\n      } else if (vimMatch && vimMatch[3].length) {\n        $video = $$1('<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>').attr('frameborder', 0).attr('src', '//player.vimeo.com/video/' + vimMatch[3]).attr('width', '640').attr('height', '360')\n      } else if (dmMatch && dmMatch[2].length) {\n        $video = $$1('<iframe>').attr('frameborder', 0).attr('src', '//www.dailymotion.com/embed/video/' + dmMatch[2]).attr('width', '640').attr('height', '360')\n      } else if (youkuMatch && youkuMatch[1].length) {\n        $video = $$1('<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>').attr('frameborder', 0).attr('height', '498').attr('width', '510').attr('src', '//player.youku.com/embed/' + youkuMatch[1])\n      } else if (qqMatch && qqMatch[1].length || qqMatch2 && qqMatch2[2].length) {\n        var vid = qqMatch && qqMatch[1].length ? qqMatch[1] : qqMatch2[2]\n        $video = $$1('<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>').attr('frameborder', 0).attr('height', '310').attr('width', '500').attr('src', 'http://v.qq.com/iframe/player.html?vid=' + vid + '&amp;auto=0')\n      } else if (mp4Match || oggMatch || webmMatch) {\n        $video = $$1('<video controls>').attr('src', url).attr('width', '640').attr('height', '360')\n      } else {\n        // this is not a known video link. Now what, Cat? Now what?\n        return false\n      }\n\n      $video.addClass('note-video-clip')\n      return $video[0]\n    }\n\n    VideoDialog.prototype.show = function () {\n      var _this = this\n\n      var text = this.context.invoke('editor.getSelectedText')\n      this.context.invoke('editor.saveRange')\n      this.showVideoDialog(text).then(function (url) {\n        // [workaround] hide dialog before restore range for IE range focus\n        _this.ui.hideDialog(_this.$dialog)\n\n        _this.context.invoke('editor.restoreRange') // build node\n\n        var $node = _this.createVideoNode(url)\n\n        if ($node) {\n          // insert video node\n          _this.context.invoke('editor.insertNode', $node)\n        }\n      }).fail(function () {\n        _this.context.invoke('editor.restoreRange')\n      })\n    }\n    /**\n     * show image dialog\n     *\n     * @param {jQuery} $dialog\n     * @return {Promise}\n     */\n\n    VideoDialog.prototype.showVideoDialog = function (text) {\n      var _this = this\n\n      return $$1.Deferred(function (deferred) {\n        var $videoUrl = _this.$dialog.find('.note-video-url')\n\n        var $videoBtn = _this.$dialog.find('.note-video-btn')\n\n        _this.ui.onDialogShown(_this.$dialog, function () {\n          _this.context.triggerEvent('dialog.shown')\n\n          $videoUrl.val(text).on('input', function () {\n            _this.ui.toggleBtn($videoBtn, $videoUrl.val())\n          })\n\n          if (!env.isSupportTouch) {\n            $videoUrl.trigger('focus')\n          }\n\n          $videoBtn.click(function (event) {\n            event.preventDefault()\n            deferred.resolve($videoUrl.val())\n          })\n\n          _this.bindEnterKey($videoUrl, $videoBtn)\n        })\n\n        _this.ui.onDialogHidden(_this.$dialog, function () {\n          $videoUrl.off('input')\n          $videoBtn.off('click')\n\n          if (deferred.state() === 'pending') {\n            deferred.reject()\n          }\n        })\n\n        _this.ui.showDialog(_this.$dialog)\n      })\n    }\n\n    return VideoDialog\n  }())\n\n  var HelpDialog =\n  /** @class */\n  (function () {\n    function HelpDialog (context) {\n      this.context = context\n      this.ui = $$1.summernote.ui\n      this.$body = $$1(document.body)\n      this.$editor = context.layoutInfo.editor\n      this.options = context.options\n      this.lang = this.options.langInfo\n    }\n\n    HelpDialog.prototype.initialize = function () {\n      var $container = this.options.dialogsInBody ? this.$body : this.$editor\n      var body = ['<p class=\"text-center\">', '<a href=\"http://summernote.org/\" target=\"_blank\">Summernote 0.8.10</a> · ', '<a href=\"https://github.com/summernote/summernote\" target=\"_blank\">Project</a> · ', '<a href=\"https://github.com/summernote/summernote/issues\" target=\"_blank\">Issues</a>', '</p>'].join('')\n      this.$dialog = this.ui.dialog({\n        title: this.lang.options.help,\n        fade: this.options.dialogsFade,\n        body: this.createShortcutList(),\n        footer: body,\n        callback: function ($node) {\n          $node.find('.modal-body,.note-modal-body').css({\n            'max-height': 300,\n            'overflow': 'scroll'\n          })\n        }\n      }).render().appendTo($container)\n    }\n\n    HelpDialog.prototype.destroy = function () {\n      this.ui.hideDialog(this.$dialog)\n      this.$dialog.remove()\n    }\n\n    HelpDialog.prototype.createShortcutList = function () {\n      var _this = this\n\n      var keyMap = this.options.keyMap[env.isMac ? 'mac' : 'pc']\n      return Object.keys(keyMap).map(function (key) {\n        var command = keyMap[key]\n        var $row = $$1('<div><div class=\"help-list-item\"/></div>')\n        $row.append($$1('<label><kbd>' + key + '</kdb></label>').css({\n          'width': 180,\n          'margin-right': 10\n        })).append($$1('<span/>').html(_this.context.memo('help.' + command) || command))\n        return $row.html()\n      }).join('')\n    }\n    /**\n     * show help dialog\n     *\n     * @return {Promise}\n     */\n\n    HelpDialog.prototype.showHelpDialog = function () {\n      var _this = this\n\n      return $$1.Deferred(function (deferred) {\n        _this.ui.onDialogShown(_this.$dialog, function () {\n          _this.context.triggerEvent('dialog.shown')\n\n          deferred.resolve()\n        })\n\n        _this.ui.showDialog(_this.$dialog)\n      }).promise()\n    }\n\n    HelpDialog.prototype.show = function () {\n      var _this = this\n\n      this.context.invoke('editor.saveRange')\n      this.showHelpDialog().then(function () {\n        _this.context.invoke('editor.restoreRange')\n      })\n    }\n\n    return HelpDialog\n  }())\n\n  var AIR_MODE_POPOVER_X_OFFSET = 20\n\n  var AirPopover =\n  /** @class */\n  (function () {\n    function AirPopover (context) {\n      var _this = this\n\n      this.context = context\n      this.ui = $$1.summernote.ui\n      this.options = context.options\n      this.events = {\n        'summernote.keyup summernote.mouseup summernote.scroll': function () {\n          _this.update()\n        },\n        'summernote.disable summernote.change summernote.dialog.shown': function () {\n          _this.hide()\n        },\n        'summernote.focusout': function (we, e) {\n          // [workaround] Firefox doesn't support relatedTarget on focusout\n          //  - Ignore hide action on focus out in FF.\n          if (env.isFF) {\n            return\n          }\n\n          if (!e.relatedTarget || !dom.ancestor(e.relatedTarget, func.eq(_this.$popover[0]))) {\n            _this.hide()\n          }\n        }\n      }\n    }\n\n    AirPopover.prototype.shouldInitialize = function () {\n      return this.options.airMode && !lists.isEmpty(this.options.popover.air)\n    }\n\n    AirPopover.prototype.initialize = function () {\n      this.$popover = this.ui.popover({\n        className: 'note-air-popover'\n      }).render().appendTo(this.options.container)\n      var $content = this.$popover.find('.popover-content')\n      this.context.invoke('buttons.build', $content, this.options.popover.air)\n    }\n\n    AirPopover.prototype.destroy = function () {\n      this.$popover.remove()\n    }\n\n    AirPopover.prototype.update = function () {\n      var styleInfo = this.context.invoke('editor.currentStyle')\n\n      if (styleInfo.range && !styleInfo.range.isCollapsed()) {\n        var rect = lists.last(styleInfo.range.getClientRects())\n\n        if (rect) {\n          var bnd = func.rect2bnd(rect)\n          this.$popover.css({\n            display: 'block',\n            left: Math.max(bnd.left + bnd.width / 2, 0) - AIR_MODE_POPOVER_X_OFFSET,\n            top: bnd.top + bnd.height\n          })\n          this.context.invoke('buttons.updateCurrentStyle', this.$popover)\n        }\n      } else {\n        this.hide()\n      }\n    }\n\n    AirPopover.prototype.hide = function () {\n      this.$popover.hide()\n    }\n\n    return AirPopover\n  }())\n\n  var POPOVER_DIST = 5\n\n  var HintPopover =\n  /** @class */\n  (function () {\n    function HintPopover (context) {\n      var _this = this\n\n      this.context = context\n      this.ui = $$1.summernote.ui\n      this.$editable = context.layoutInfo.editable\n      this.options = context.options\n      this.hint = this.options.hint || []\n      this.direction = this.options.hintDirection || 'bottom'\n      this.hints = $$1.isArray(this.hint) ? this.hint : [this.hint]\n      this.events = {\n        'summernote.keyup': function (we, e) {\n          if (!e.isDefaultPrevented()) {\n            _this.handleKeyup(e)\n          }\n        },\n        'summernote.keydown': function (we, e) {\n          _this.handleKeydown(e)\n        },\n        'summernote.disable summernote.dialog.shown': function () {\n          _this.hide()\n        }\n      }\n    }\n\n    HintPopover.prototype.shouldInitialize = function () {\n      return this.hints.length > 0\n    }\n\n    HintPopover.prototype.initialize = function () {\n      var _this = this\n\n      this.lastWordRange = null\n      this.$popover = this.ui.popover({\n        className: 'note-hint-popover',\n        hideArrow: true,\n        direction: ''\n      }).render().appendTo(this.options.container)\n      this.$popover.hide()\n      this.$content = this.$popover.find('.popover-content,.note-popover-content')\n      this.$content.on('click', '.note-hint-item', function () {\n        _this.$content.find('.active').removeClass('active')\n\n        $$1(_this).addClass('active')\n\n        _this.replace()\n      })\n    }\n\n    HintPopover.prototype.destroy = function () {\n      this.$popover.remove()\n    }\n\n    HintPopover.prototype.selectItem = function ($item) {\n      this.$content.find('.active').removeClass('active')\n      $item.addClass('active')\n      this.$content[0].scrollTop = $item[0].offsetTop - this.$content.innerHeight() / 2\n    }\n\n    HintPopover.prototype.moveDown = function () {\n      var $current = this.$content.find('.note-hint-item.active')\n      var $next = $current.next()\n\n      if ($next.length) {\n        this.selectItem($next)\n      } else {\n        var $nextGroup = $current.parent().next()\n\n        if (!$nextGroup.length) {\n          $nextGroup = this.$content.find('.note-hint-group').first()\n        }\n\n        this.selectItem($nextGroup.find('.note-hint-item').first())\n      }\n    }\n\n    HintPopover.prototype.moveUp = function () {\n      var $current = this.$content.find('.note-hint-item.active')\n      var $prev = $current.prev()\n\n      if ($prev.length) {\n        this.selectItem($prev)\n      } else {\n        var $prevGroup = $current.parent().prev()\n\n        if (!$prevGroup.length) {\n          $prevGroup = this.$content.find('.note-hint-group').last()\n        }\n\n        this.selectItem($prevGroup.find('.note-hint-item').last())\n      }\n    }\n\n    HintPopover.prototype.replace = function () {\n      var $item = this.$content.find('.note-hint-item.active')\n\n      if ($item.length) {\n        var node = this.nodeFromItem($item) // XXX: consider to move codes to editor for recording redo/undo.\n\n        this.lastWordRange.insertNode(node)\n        range.createFromNode(node).collapse().select()\n        this.lastWordRange = null\n        this.hide()\n        this.context.triggerEvent('change', this.$editable.html(), this.$editable[0])\n        this.context.invoke('editor.focus')\n      }\n    }\n\n    HintPopover.prototype.nodeFromItem = function ($item) {\n      var hint = this.hints[$item.data('index')]\n      var item = $item.data('item')\n      var node = hint.content ? hint.content(item) : item\n\n      if (typeof node === 'string') {\n        node = dom.createText(node)\n      }\n\n      return node\n    }\n\n    HintPopover.prototype.createItemTemplates = function (hintIdx, items) {\n      var hint = this.hints[hintIdx]\n      return items.map(function (item, idx) {\n        var $item = $$1('<div class=\"note-hint-item\"/>')\n        $item.append(hint.template ? hint.template(item) : item + '')\n        $item.data({\n          'index': hintIdx,\n          'item': item\n        })\n        return $item\n      })\n    }\n\n    HintPopover.prototype.handleKeydown = function (e) {\n      if (!this.$popover.is(':visible')) {\n        return\n      }\n\n      if (e.keyCode === key.code.ENTER) {\n        e.preventDefault()\n        this.replace()\n      } else if (e.keyCode === key.code.UP) {\n        e.preventDefault()\n        this.moveUp()\n      } else if (e.keyCode === key.code.DOWN) {\n        e.preventDefault()\n        this.moveDown()\n      }\n    }\n\n    HintPopover.prototype.searchKeyword = function (index, keyword, callback) {\n      var hint = this.hints[index]\n\n      if (hint && hint.match.test(keyword) && hint.search) {\n        var matches = hint.match.exec(keyword)\n        hint.search(matches[1], callback)\n      } else {\n        callback()\n      }\n    }\n\n    HintPopover.prototype.createGroup = function (idx, keyword) {\n      var _this = this\n\n      var $group = $$1('<div class=\"note-hint-group note-hint-group-' + idx + '\"/>')\n      this.searchKeyword(idx, keyword, function (items) {\n        items = items || []\n\n        if (items.length) {\n          $group.html(_this.createItemTemplates(idx, items))\n\n          _this.show()\n        }\n      })\n      return $group\n    }\n\n    HintPopover.prototype.handleKeyup = function (e) {\n      var _this = this\n\n      if (!lists.contains([key.code.ENTER, key.code.UP, key.code.DOWN], e.keyCode)) {\n        var wordRange = this.context.invoke('editor.createRange').getWordRange()\n        var keyword_1 = wordRange.toString()\n\n        if (this.hints.length && keyword_1) {\n          this.$content.empty()\n          var bnd = func.rect2bnd(lists.last(wordRange.getClientRects()))\n\n          if (bnd) {\n            this.$popover.hide()\n            this.lastWordRange = wordRange\n            this.hints.forEach(function (hint, idx) {\n              if (hint.match.test(keyword_1)) {\n                _this.createGroup(idx, keyword_1).appendTo(_this.$content)\n              }\n            }) // select first .note-hint-item\n\n            this.$content.find('.note-hint-item:first').addClass('active') // set position for popover after group is created\n\n            if (this.direction === 'top') {\n              this.$popover.css({\n                left: bnd.left,\n                top: bnd.top - this.$popover.outerHeight() - POPOVER_DIST\n              })\n            } else {\n              this.$popover.css({\n                left: bnd.left,\n                top: bnd.top + bnd.height + POPOVER_DIST\n              })\n            }\n          }\n        } else {\n          this.hide()\n        }\n      }\n    }\n\n    HintPopover.prototype.show = function () {\n      this.$popover.show()\n    }\n\n    HintPopover.prototype.hide = function () {\n      this.$popover.hide()\n    }\n\n    return HintPopover\n  }())\n\n  var Context =\n  /** @class */\n  (function () {\n    /**\n     * @param {jQuery} $note\n     * @param {Object} options\n     */\n    function Context ($note, options) {\n      this.ui = $$1.summernote.ui\n      this.$note = $note\n      this.memos = {}\n      this.modules = {}\n      this.layoutInfo = {}\n      this.options = options\n      this.initialize()\n    }\n    /**\n     * create layout and initialize modules and other resources\n     */\n\n    Context.prototype.initialize = function () {\n      this.layoutInfo = this.ui.createLayout(this.$note, this.options)\n\n      this._initialize()\n\n      this.$note.hide()\n      return this\n    }\n    /**\n     * destroy modules and other resources and remove layout\n     */\n\n    Context.prototype.destroy = function () {\n      this._destroy()\n\n      this.$note.removeData('summernote')\n      this.ui.removeLayout(this.$note, this.layoutInfo)\n    }\n    /**\n     * destory modules and other resources and initialize it again\n     */\n\n    Context.prototype.reset = function () {\n      var disabled = this.isDisabled()\n      this.code(dom.emptyPara)\n\n      this._destroy()\n\n      this._initialize()\n\n      if (disabled) {\n        this.disable()\n      }\n    }\n\n    Context.prototype._initialize = function () {\n      var _this = this // add optional buttons\n\n      var buttons = $$1.extend({}, this.options.buttons)\n      Object.keys(buttons).forEach(function (key) {\n        _this.memo('button.' + key, buttons[key])\n      })\n      var modules = $$1.extend({}, this.options.modules, $$1.summernote.plugins || {}) // add and initialize modules\n\n      Object.keys(modules).forEach(function (key) {\n        _this.module(key, modules[key], true)\n      })\n      Object.keys(this.modules).forEach(function (key) {\n        _this.initializeModule(key)\n      })\n    }\n\n    Context.prototype._destroy = function () {\n      var _this = this // destroy modules with reversed order\n\n      Object.keys(this.modules).reverse().forEach(function (key) {\n        _this.removeModule(key)\n      })\n      Object.keys(this.memos).forEach(function (key) {\n        _this.removeMemo(key)\n      }) // trigger custom onDestroy callback\n\n      this.triggerEvent('destroy', this)\n    }\n\n    Context.prototype.code = function (html) {\n      var isActivated = this.invoke('codeview.isActivated')\n\n      if (html === undefined) {\n        this.invoke('codeview.sync')\n        return isActivated ? this.layoutInfo.codable.val() : this.layoutInfo.editable.html()\n      } else {\n        if (isActivated) {\n          this.layoutInfo.codable.val(html)\n        } else {\n          this.layoutInfo.editable.html(html)\n        }\n\n        this.$note.val(html)\n        this.triggerEvent('change', html)\n      }\n    }\n\n    Context.prototype.isDisabled = function () {\n      return this.layoutInfo.editable.attr('contenteditable') === 'false'\n    }\n\n    Context.prototype.enable = function () {\n      this.layoutInfo.editable.attr('contenteditable', true)\n      this.invoke('toolbar.activate', true)\n      this.triggerEvent('disable', false)\n    }\n\n    Context.prototype.disable = function () {\n      // close codeview if codeview is opend\n      if (this.invoke('codeview.isActivated')) {\n        this.invoke('codeview.deactivate')\n      }\n\n      this.layoutInfo.editable.attr('contenteditable', false)\n      this.invoke('toolbar.deactivate', true)\n      this.triggerEvent('disable', true)\n    }\n\n    Context.prototype.triggerEvent = function () {\n      var namespace = lists.head(arguments)\n      var args = lists.tail(lists.from(arguments))\n      var callback = this.options.callbacks[func.namespaceToCamel(namespace, 'on')]\n\n      if (callback) {\n        callback.apply(this.$note[0], args)\n      }\n\n      this.$note.trigger('summernote.' + namespace, args)\n    }\n\n    Context.prototype.initializeModule = function (key) {\n      var module = this.modules[key]\n      module.shouldInitialize = module.shouldInitialize || func.ok\n\n      if (!module.shouldInitialize()) {\n        return\n      } // initialize module\n\n      if (module.initialize) {\n        module.initialize()\n      } // attach events\n\n      if (module.events) {\n        dom.attachEvents(this.$note, module.events)\n      }\n    }\n\n    Context.prototype.module = function (key, ModuleClass, withoutIntialize) {\n      if (arguments.length === 1) {\n        return this.modules[key]\n      }\n\n      this.modules[key] = new ModuleClass(this)\n\n      if (!withoutIntialize) {\n        this.initializeModule(key)\n      }\n    }\n\n    Context.prototype.removeModule = function (key) {\n      var module = this.modules[key]\n\n      if (module.shouldInitialize()) {\n        if (module.events) {\n          dom.detachEvents(this.$note, module.events)\n        }\n\n        if (module.destroy) {\n          module.destroy()\n        }\n      }\n\n      delete this.modules[key]\n    }\n\n    Context.prototype.memo = function (key, obj) {\n      if (arguments.length === 1) {\n        return this.memos[key]\n      }\n\n      this.memos[key] = obj\n    }\n\n    Context.prototype.removeMemo = function (key) {\n      if (this.memos[key] && this.memos[key].destroy) {\n        this.memos[key].destroy()\n      }\n\n      delete this.memos[key]\n    }\n    /**\n     * Some buttons need to change their visual style immediately once they get pressed\n     */\n\n    Context.prototype.createInvokeHandlerAndUpdateState = function (namespace, value) {\n      var _this = this\n\n      return function (event) {\n        _this.createInvokeHandler(namespace, value)(event)\n\n        _this.invoke('buttons.updateCurrentStyle')\n      }\n    }\n\n    Context.prototype.createInvokeHandler = function (namespace, value) {\n      var _this = this\n\n      return function (event) {\n        event.preventDefault()\n        var $target = $$1(event.target)\n\n        _this.invoke(namespace, value || $target.closest('[data-value]').data('value'), $target)\n      }\n    }\n\n    Context.prototype.invoke = function () {\n      var namespace = lists.head(arguments)\n      var args = lists.tail(lists.from(arguments))\n      var splits = namespace.split('.')\n      var hasSeparator = splits.length > 1\n      var moduleName = hasSeparator && lists.head(splits)\n      var methodName = hasSeparator ? lists.last(splits) : lists.head(splits)\n      var module = this.modules[moduleName || 'editor']\n\n      if (!moduleName && this[methodName]) {\n        return this[methodName].apply(this, args)\n      } else if (module && module[methodName] && module.shouldInitialize()) {\n        return module[methodName].apply(module, args)\n      }\n    }\n\n    return Context\n  }())\n\n  $$1.fn.extend({\n    /**\n     * Summernote API\n     *\n     * @param {Object|String}\n     * @return {this}\n     */\n    summernote: function () {\n      var type = $$1.type(lists.head(arguments))\n      var isExternalAPICalled = type === 'string'\n      var hasInitOptions = type === 'object'\n      var options = $$1.extend({}, $$1.summernote.options, hasInitOptions ? lists.head(arguments) : {}) // Update options\n\n      options.langInfo = $$1.extend(true, {}, $$1.summernote.lang['en-US'], $$1.summernote.lang[options.lang])\n      options.icons = $$1.extend(true, {}, $$1.summernote.options.icons, options.icons)\n      options.tooltip = options.tooltip === 'auto' ? !env.isSupportTouch : options.tooltip\n      this.each(function (idx, note) {\n        var $note = $$1(note)\n\n        if (!$note.data('summernote')) {\n          var context = new Context($note, options)\n          $note.data('summernote', context)\n          $note.data('summernote').triggerEvent('init', context.layoutInfo)\n        }\n      })\n      var $note = this.first()\n\n      if ($note.length) {\n        var context = $note.data('summernote')\n\n        if (isExternalAPICalled) {\n          return context.invoke.apply(context, lists.from(arguments))\n        } else if (options.focus) {\n          context.invoke('editor.focus')\n        }\n      }\n\n      return this\n    }\n  })\n  $$1.summernote = $$1.extend($$1.summernote, {\n    version: '0.8.10',\n    ui: ui,\n    dom: dom,\n    plugins: {},\n    options: {\n      modules: {\n        'editor': Editor,\n        'clipboard': Clipboard,\n        'dropzone': Dropzone,\n        'codeview': CodeView,\n        'statusbar': Statusbar,\n        'fullscreen': Fullscreen,\n        'handle': Handle,\n        // FIXME: HintPopover must be front of autolink\n        //  - Script error about range when Enter key is pressed on hint popover\n        'hintPopover': HintPopover,\n        'autoLink': AutoLink,\n        'autoSync': AutoSync,\n        'placeholder': Placeholder,\n        'buttons': Buttons,\n        'toolbar': Toolbar,\n        'linkDialog': LinkDialog,\n        'linkPopover': LinkPopover,\n        'imageDialog': ImageDialog,\n        'imagePopover': ImagePopover,\n        'tablePopover': TablePopover,\n        'videoDialog': VideoDialog,\n        'helpDialog': HelpDialog,\n        'airPopover': AirPopover\n      },\n      buttons: {},\n      lang: 'en-US',\n      followingToolbar: true,\n      otherStaticBar: '',\n      // toolbar\n      toolbar: [['style', ['style']], ['font', ['bold', 'underline', 'clear']], ['fontname', ['fontname']], ['color', ['color']], ['para', ['ul', 'ol', 'paragraph']], ['table', ['table']], ['insert', ['link', 'picture', 'video']], ['view', ['fullscreen', 'codeview', 'help']]],\n      // popover\n      popatmouse: true,\n      popover: {\n        image: [['imagesize', ['imageSize100', 'imageSize50', 'imageSize25']], ['float', ['floatLeft', 'floatRight', 'floatNone']], ['remove', ['removeMedia']]],\n        link: [['link', ['linkDialogShow', 'unlink']]],\n        table: [['add', ['addRowDown', 'addRowUp', 'addColLeft', 'addColRight']], ['delete', ['deleteRow', 'deleteCol', 'deleteTable']]],\n        air: [['color', ['color']], ['font', ['bold', 'underline', 'clear']], ['para', ['ul', 'paragraph']], ['table', ['table']], ['insert', ['link', 'picture']]]\n      },\n      // air mode: inline editor\n      airMode: false,\n      width: null,\n      height: null,\n      linkTargetBlank: true,\n      focus: false,\n      tabSize: 4,\n      styleWithSpan: true,\n      shortcuts: true,\n      textareaAutoSync: true,\n      hintDirection: 'bottom',\n      tooltip: 'auto',\n      container: 'body',\n      maxTextLength: 0,\n      styleTags: ['p', {\n        title: 'Blockquote',\n        tag: 'blockquote',\n        className: 'blockquote',\n        value: 'blockquote'\n      }, 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'],\n      fontNames: ['Arial', 'Arial Black', 'Comic Sans MS', 'Courier New', 'Helvetica Neue', 'Helvetica', 'Impact', 'Lucida Grande', 'Tahoma', 'Times New Roman', 'Verdana'],\n      fontSizes: ['8', '9', '10', '11', '12', '14', '18', '24', '36'],\n      // pallete colors(n x n)\n      colors: [['#000000', '#424242', '#636363', '#9C9C94', '#CEC6CE', '#EFEFEF', '#F7F7F7', '#FFFFFF'], ['#FF0000', '#FF9C00', '#FFFF00', '#00FF00', '#00FFFF', '#0000FF', '#9C00FF', '#FF00FF'], ['#F7C6CE', '#FFE7CE', '#FFEFC6', '#D6EFD6', '#CEDEE7', '#CEE7F7', '#D6D6E7', '#E7D6DE'], ['#E79C9C', '#FFC69C', '#FFE79C', '#B5D6A5', '#A5C6CE', '#9CC6EF', '#B5A5D6', '#D6A5BD'], ['#E76363', '#F7AD6B', '#FFD663', '#94BD7B', '#73A5AD', '#6BADDE', '#8C7BC6', '#C67BA5'], ['#CE0000', '#E79439', '#EFC631', '#6BA54A', '#4A7B8C', '#3984C6', '#634AA5', '#A54A7B'], ['#9C0000', '#B56308', '#BD9400', '#397B21', '#104A5A', '#085294', '#311873', '#731842'], ['#630000', '#7B3900', '#846300', '#295218', '#083139', '#003163', '#21104A', '#4A1031']],\n      // http://chir.ag/projects/name-that-color/\n      colorsName: [['Black', 'Tundora', 'Dove Gray', 'Star Dust', 'Pale Slate', 'Gallery', 'Alabaster', 'White'], ['Red', 'Orange Peel', 'Yellow', 'Green', 'Cyan', 'Blue', 'Electric Violet', 'Magenta'], ['Azalea', 'Karry', 'Egg White', 'Zanah', 'Botticelli', 'Tropical Blue', 'Mischka', 'Twilight'], ['Tonys Pink', 'Peach Orange', 'Cream Brulee', 'Sprout', 'Casper', 'Perano', 'Cold Purple', 'Careys Pink'], ['Mandy', 'Rajah', 'Dandelion', 'Olivine', 'Gulf Stream', 'Viking', 'Blue Marguerite', 'Puce'], ['Guardsman Red', 'Fire Bush', 'Golden Dream', 'Chelsea Cucumber', 'Smalt Blue', 'Boston Blue', 'Butterfly Bush', 'Cadillac'], ['Sangria', 'Mai Tai', 'Buddha Gold', 'Forest Green', 'Eden', 'Venice Blue', 'Meteorite', 'Claret'], ['Rosewood', 'Cinnamon', 'Olive', 'Parsley', 'Tiber', 'Midnight Blue', 'Valentino', 'Loulou']],\n      lineHeights: ['1.0', '1.2', '1.4', '1.5', '1.6', '1.8', '2.0', '3.0'],\n      tableClassName: 'table table-bordered',\n      insertTableMaxSize: {\n        col: 10,\n        row: 10\n      },\n      dialogsInBody: false,\n      dialogsFade: false,\n      maximumImageFileSize: null,\n      callbacks: {\n        onInit: null,\n        onFocus: null,\n        onBlur: null,\n        onBlurCodeview: null,\n        onEnter: null,\n        onKeyup: null,\n        onKeydown: null,\n        onImageUpload: null,\n        onImageUploadError: null\n      },\n      codemirror: {\n        mode: 'text/html',\n        htmlMode: true,\n        lineNumbers: true\n      },\n      keyMap: {\n        pc: {\n          'ENTER': 'insertParagraph',\n          'CTRL+Z': 'undo',\n          'CTRL+Y': 'redo',\n          'TAB': 'tab',\n          'SHIFT+TAB': 'untab',\n          'CTRL+B': 'bold',\n          'CTRL+I': 'italic',\n          'CTRL+U': 'underline',\n          'CTRL+SHIFT+S': 'strikethrough',\n          'CTRL+BACKSLASH': 'removeFormat',\n          'CTRL+SHIFT+L': 'justifyLeft',\n          'CTRL+SHIFT+E': 'justifyCenter',\n          'CTRL+SHIFT+R': 'justifyRight',\n          'CTRL+SHIFT+J': 'justifyFull',\n          'CTRL+SHIFT+NUM7': 'insertUnorderedList',\n          'CTRL+SHIFT+NUM8': 'insertOrderedList',\n          'CTRL+LEFTBRACKET': 'outdent',\n          'CTRL+RIGHTBRACKET': 'indent',\n          'CTRL+NUM0': 'formatPara',\n          'CTRL+NUM1': 'formatH1',\n          'CTRL+NUM2': 'formatH2',\n          'CTRL+NUM3': 'formatH3',\n          'CTRL+NUM4': 'formatH4',\n          'CTRL+NUM5': 'formatH5',\n          'CTRL+NUM6': 'formatH6',\n          'CTRL+ENTER': 'insertHorizontalRule',\n          'CTRL+K': 'linkDialog.show'\n        },\n        mac: {\n          'ENTER': 'insertParagraph',\n          'CMD+Z': 'undo',\n          'CMD+SHIFT+Z': 'redo',\n          'TAB': 'tab',\n          'SHIFT+TAB': 'untab',\n          'CMD+B': 'bold',\n          'CMD+I': 'italic',\n          'CMD+U': 'underline',\n          'CMD+SHIFT+S': 'strikethrough',\n          'CMD+BACKSLASH': 'removeFormat',\n          'CMD+SHIFT+L': 'justifyLeft',\n          'CMD+SHIFT+E': 'justifyCenter',\n          'CMD+SHIFT+R': 'justifyRight',\n          'CMD+SHIFT+J': 'justifyFull',\n          'CMD+SHIFT+NUM7': 'insertUnorderedList',\n          'CMD+SHIFT+NUM8': 'insertOrderedList',\n          'CMD+LEFTBRACKET': 'outdent',\n          'CMD+RIGHTBRACKET': 'indent',\n          'CMD+NUM0': 'formatPara',\n          'CMD+NUM1': 'formatH1',\n          'CMD+NUM2': 'formatH2',\n          'CMD+NUM3': 'formatH3',\n          'CMD+NUM4': 'formatH4',\n          'CMD+NUM5': 'formatH5',\n          'CMD+NUM6': 'formatH6',\n          'CMD+ENTER': 'insertHorizontalRule',\n          'CMD+K': 'linkDialog.show'\n        }\n      },\n      icons: {\n        'align': 'note-icon-align',\n        'alignCenter': 'note-icon-align-center',\n        'alignJustify': 'note-icon-align-justify',\n        'alignLeft': 'note-icon-align-left',\n        'alignRight': 'note-icon-align-right',\n        'rowBelow': 'note-icon-row-below',\n        'colBefore': 'note-icon-col-before',\n        'colAfter': 'note-icon-col-after',\n        'rowAbove': 'note-icon-row-above',\n        'rowRemove': 'note-icon-row-remove',\n        'colRemove': 'note-icon-col-remove',\n        'indent': 'note-icon-align-indent',\n        'outdent': 'note-icon-align-outdent',\n        'arrowsAlt': 'note-icon-arrows-alt',\n        'bold': 'note-icon-bold',\n        'caret': 'note-icon-caret',\n        'circle': 'note-icon-circle',\n        'close': 'note-icon-close',\n        'code': 'note-icon-code',\n        'eraser': 'note-icon-eraser',\n        'font': 'note-icon-font',\n        'frame': 'note-icon-frame',\n        'italic': 'note-icon-italic',\n        'link': 'note-icon-link',\n        'unlink': 'note-icon-chain-broken',\n        'magic': 'note-icon-magic',\n        'menuCheck': 'note-icon-menu-check',\n        'minus': 'note-icon-minus',\n        'orderedlist': 'note-icon-orderedlist',\n        'pencil': 'note-icon-pencil',\n        'picture': 'note-icon-picture',\n        'question': 'note-icon-question',\n        'redo': 'note-icon-redo',\n        'square': 'note-icon-square',\n        'strikethrough': 'note-icon-strikethrough',\n        'subscript': 'note-icon-subscript',\n        'superscript': 'note-icon-superscript',\n        'table': 'note-icon-table',\n        'textHeight': 'note-icon-text-height',\n        'trash': 'note-icon-trash',\n        'underline': 'note-icon-underline',\n        'undo': 'note-icon-undo',\n        'unorderedlist': 'note-icon-unorderedlist',\n        'video': 'note-icon-video'\n      }\n    }\n  })\n})\n// # sourceMappingURL=summernote-bs4.js.map\n"],"file":"summernote-bs4.js"}